import{d as q,l as Be,m as f,n as xe,b as D,c as b,q as F,e as l,h as v,f as R,F as U,v as V,x as B,y as w,t as k,z as Pe,A as fe,B as He,C as Ee,D as $,E as Ne,H as We,a as Ue,j as be,w as Ve,I as ye,J as z,K as ze,L as se,M as Re}from"./index-065d0b16.js";var je=Object.defineProperty,qe=(e,r,t)=>r in e?je(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,ee=(e,r,t)=>(qe(e,typeof r!="symbol"?r+"":r,t),t);const G=()=>te(new Date),Ge=(e,r,t)=>{switch(r){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return de(e,t);default:return e}},Je=e=>[...Array(7)].map((r,t)=>x(e,t)),x=(e,r)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+r,e.getHours(),e.getMinutes(),e.getSeconds()),de=(e,r)=>x(e,(r-e.getDay()-7)%-7),Ke=(e,r)=>x(de(e,r),7),j=e=>new Date(e.getFullYear(),e.getMonth()),Qe=e=>Math.ceil(e.getDate()/7),Xe=(e,r,t)=>new Date(e.getFullYear()+(r=="year"?t:0),e.getMonth()+(r=="month"?t:0),e.getDate()+(r=="week"?t*7:0)),ue=e=>("0"+String(e.getMonth()+1)).slice(-2),ce=e=>("0"+String(e.getDate())).slice(-2),ke=e=>e.getFullYear()+"-"+ue(e),Ze=e=>ke(e)+"-"+ce(e),et=e=>ue(e)+"-"+ce(e),tt=(e,r,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!ae()){var s=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-s).toISOString().slice(11,16)}return e.toLocaleTimeString(r,t)},at=(e,r,t,s)=>{const c=e.getFullYear()===r.getFullYear(),y=we(e,r),g=t!=="year"&&t!=="month";let m=[];return m.push(s[e.getMonth()]),g&&(m.push(" "),m.push(e.getDate())),c||(m.push(g?", ":" "),m.push(e.getFullYear())),!y||!c?(m.push(" – "),y||m.push(s[r.getMonth()]),g&&m.push(" ")):g&&m.push(" – "),g?(m.push(r.getDate()),m.push(", ")):m.push(" "),m.push(r.getFullYear()),m.join("")},Se=(e,r)=>{const t=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate()),s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-s)/864e5},rt=(e,r)=>!!e&&!!r&&Se(e,r)===0,it=(e,r)=>!!e&&!!r&&e.getTime()===r.getTime(),we=(e,r)=>!!e&&!!r&&e.getFullYear()===r.getFullYear()&&e.getMonth()===r.getMonth(),ot=e=>j(e)<j(G()),nt=e=>j(e)>j(G()),st=e=>te(e)>G(),lt=e=>te(e)<G(),dt=e=>e.getMonth()!==x(e,7).getMonth(),ut=e=>e.getMonth()!==x(e,1).getMonth(),Me=e=>{let r=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,s)=>r[s]=Number(t)),r[1]--,new Date(r[0],r[1],r[2],r[3],r[4],r[5],r[6])},le=e=>typeof e=="string"?Me(e):new Date(e),te=e=>{const r=new Date(e);return r.setHours(0,0,0,0),r},ct=e=>e.substring(0,2),ae=()=>typeof Intl<"u",gt=(e,r)=>{if(!ae())return[...Array(12)].map(s=>"");const t=new Intl.DateTimeFormat(e,{month:r});return[...Array(12)].map((s,c)=>t.format(new Date(2017,c,1)))},mt=(e,r,t)=>{if(!ae())return[...Array(7)].map(c=>"");const s=new Intl.DateTimeFormat(e,{weekday:r});return[...Array(7)].map((c,y)=>s.format(new Date(2017,0,(y+1+t)%7)))},pt=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),vt=(e,r)=>{const t=e.classes?[...e.classes]:[];return r&&t.push("isHovered"),{originalItem:e,startDate:le(e.startDate),endDate:le(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},i={addDays:x,beginningOfMonth:j,beginningOfPeriod:Ge,beginningOfWeek:de,dateOnly:te,dayDiff:Se,daysOfWeek:Je,endOfWeek:Ke,formattedPeriod:at,formattedTime:tt,fromIsoStringToLocalDate:Me,getDefaultBrowserLocale:pt,getFormattedMonthNames:gt,getFormattedWeekdayNames:mt,incrementPeriod:Xe,instanceOfMonth:Qe,isFutureMonth:nt,isInFuture:st,isInPast:lt,isLastDayOfMonth:ut,isLastInstanceOfMonth:dt,isoMonthDay:et,isoYearMonth:ke,isoYearMonthDay:Ze,isPastMonth:ot,isSameDate:rt,isSameDateTime:it,isSameMonth:we,languageCode:ct,normalizeItem:vt,paddedDay:ce,paddedMonth:ue,supportsIntl:ae,today:G,toLocalDate:le};class Dt{constructor(){ee(this,"currentDragItem"),ee(this,"dateSelectionOrigin"),ee(this,"currentHoveredItemId",""),ee(this,"CalendarMath",i)}}const ht={class:"cv-header-days"},ft={key:0,class:"cv-weeknumber"},bt=["aria-multiselectable"],yt={key:0,class:"cv-weeknumber"},Pt={class:"cv-weekdays"},kt=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],St={class:"cv-day-number"},wt=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],Mt=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],It=q({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:r}){const t=e,s=Be(new Dt),c=f(()=>t.locale||i.getDefaultBrowserLocale()),y=f(()=>t.showDate?i.dateOnly(t.showDate):i.today()),g=f(()=>i.beginningOfPeriod(y.value,t.displayPeriodUom,t.startingDayOfWeek)),m=f(()=>i.addDays(i.incrementPeriod(g.value,t.displayPeriodUom,t.displayPeriodCount),-1)),J=f(()=>{const a=i.beginningOfWeek(i.beginningOfPeriod(g.value,"year",0),t.startingDayOfWeek),n=i.beginningOfWeek(g.value,t.startingDayOfWeek);return 1+Math.floor(i.dayDiff(a,n)/7)}),_=f(()=>i.beginningOfWeek(g.value,t.startingDayOfWeek)),H=f(()=>i.endOfWeek(m.value,t.startingDayOfWeek)),re=f(()=>{const a=Math.floor((i.dayDiff(_.value,H.value)+1)/7);return[...Array(a)].map((n,u)=>i.addDays(_.value,u*7))}),A=f(()=>i.getFormattedMonthNames(c.value,t.monthNameFormat)),K=f(()=>i.getFormattedWeekdayNames(c.value,t.weekdayNameFormat,t.startingDayOfWeek)),L=f(()=>t.items?t.items.map(a=>i.normalizeItem(a,a.id===s.currentHoveredItemId)):[]),E=f(()=>i.beginningOfPeriod(i.today(),t.displayPeriodUom,t.startingDayOfWeek)),ie=f(()=>i.addDays(i.incrementPeriod(E.value,t.displayPeriodUom,t.displayPeriodCount),-1)),oe=f(()=>i.formattedPeriod(g.value,m.value,t.displayPeriodUom,A.value)),Q=f(()=>{const a=E.value,n=g.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(a.getTime()-n.getTime())+1]:t.currentPeriodLabel:i.formattedPeriod(a,ie.value,t.displayPeriodUom,A.value)}),p=f(()=>({previousYear:M(-12),previousPeriod:M(-1),nextPeriod:M(1),previousFullPeriod:M(-t.displayPeriodCount),nextFullPeriod:M(t.displayPeriodCount),nextYear:M(12),currentPeriod:E.value,currentPeriodLabel:Q.value,periodStart:g.value,periodEnd:m.value,displayLocale:c.value,displayFirstDate:_.value,displayLastDate:H.value,monthNames:A.value,fixedItems:L.value,periodLabel:oe.value})),I=f(()=>({periodStart:g,periodEnd:m,displayFirstDate:_,displayLastDate:H}));xe(()=>I,a=>{t.periodChangedCallback&&(r("period-changed"),t.periodChangedCallback(a,"watch"))},{immediate:!0,deep:!0});const S=(a,n)=>{t.disablePast&&i.isInPast(a)||t.disableFuture&&i.isInFuture(a)||r("click-date",a,me(a,a),n)},T=(a,n)=>r("click-item",a,n),C=a=>"dow"+(a+t.startingDayOfWeek)%7,M=a=>{const n=i.incrementPeriod(g.value,t.displayPeriodUom,a),u=i.incrementPeriod(n,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&u<=i.today()||t.disableFuture&&n>i.today()?null:n},Y=(a,n)=>{s.currentHoveredItemId=a.id,t.doEmitItemMouseEvents&&r("item-mouseenter",a,n)},N=(a,n)=>{s.currentHoveredItemId="",t.doEmitItemMouseEvents&&r("item-mouseleave",a,n)},Ce=(a,n)=>{var u,h;if(!t.enableDateSelection)return!1;(u=n.dataTransfer)==null||u.setData("text",a.toString());let o=new Image;return o.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(h=n.dataTransfer)==null||h.setDragImage(o,10,10),s.dateSelectionOrigin=a,r("date-selection-start",ne(a),n),!0},ge=(a,n)=>{var u;return t.enableDragDrop?((u=n.dataTransfer)==null||u.setData("text",a.id),s.currentDragItem=a,s.dateSelectionOrigin=void 0,r("drag-start",a,n),!0):!1},ne=a=>a<=s.dateSelectionOrigin?[a,s.dateSelectionOrigin]:[s.dateSelectionOrigin,a],Oe=(a,n)=>{t.enableDragDrop&&r("drag-over-date",s.currentDragItem,a,n)},$e=(a,n)=>{t.enableDateSelection&&s.dateSelectionOrigin&&r("date-selection",ne(a),n),t.enableDragDrop&&(r("drag-enter-date",s.currentDragItem,a,n),n.target.classList.add("draghover"))},Fe=(a,n)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(r("drag-leave-date",s.currentDragItem,a,n),n.target.classList.remove("draghover"))},_e=(a,n)=>{if(t.enableDateSelection&&s.dateSelectionOrigin){r("date-selection-finish",ne(a),n);return}t.enableDragDrop&&(r("drop-on-date",s.currentDragItem,a,n),n.target.classList.remove("draghover"))},Ae=(a,n)=>a.startDate<n.startDate?-1:n.startDate<a.startDate?1:a.endDate>n.endDate?-1:n.endDate>a.endDate?1:a.id<n.id?-1:1,Le=a=>me(a,i.addDays(a,6)),me=(a,n)=>L.value.filter(u=>u.endDate>=a&&i.dateOnly(u.startDate)<=n,this).sort(Ae),Te=a=>!!L.value.find(n=>n.endDate>=a&&i.dateOnly(n.startDate)<=a),pe=a=>!(!t.selectionStart||!t.selectionEnd||a<i.dateOnly(t.selectionStart)||a>i.dateOnly(t.selectionEnd)),ve=a=>{const n=Le(a),u=[],h=[[],[],[],[],[],[],[]];if(!n)return u;for(let o=0;o<n.length;o++){const d=Object.assign({},n[o],{classes:[...n[o].classes],itemRow:0}),P=d.startDate<a,W=P?0:i.dayDiff(a,d.startDate),he=Math.min(7-W,i.dayDiff(i.addDays(a,W),d.endDate)+1);P&&d.classes.push("continued"),i.dayDiff(a,d.endDate)>6&&d.classes.push("toBeContinued"),i.isInPast(d.endDate)&&d.classes.push("past"),d.originalItem.url&&d.classes.push("hasUrl");for(let O=0;O<7;O++)if(O===W){let Z=0;for(;h[O][Z];)Z++;d.itemRow=Z,h[O][Z]=!0}else O<W+he&&(h[O][d.itemRow]=!0);d.classes.push(`offset${W}`),d.classes.push(`span${he}`),u.push(d)}return u},Ye=a=>{const n='<span class="startTime">'+i.formattedTime(a.startDate,c.value,t.timeFormatOptions)+"</span>";let u="";return i.isSameDateTime(a.startDate,a.endDate)||(u='<span class="endTime">'+i.formattedTime(a.endDate,c.value,t.timeFormatOptions)+"</span>"),n+u},De=a=>t.showTimes?Ye(a)+" "+a.title:a.title,X=a=>{const n=a.itemRow,u=t.itemContentHeight,h=t.itemBorderHeight;return`calc(${t.itemTop} + ${n}*${u} + ${n}*${h})`};return(a,n)=>(D(),b("div",{"aria-label":"Calendar",class:B(["cv-wrapper",`locale-${l(i).languageCode(l(c))}`,`locale-${l(c)}`,`y${l(g).getFullYear()}`,`m${l(i).paddedMonth(l(g))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:l(i).isPastMonth(l(g)),future:l(i).isFutureMonth(l(g)),noIntl:!l(i).supportsIntl}])},[F(a.$slots,"header",{headerProps:l(p)}),v("div",ht,[e.displayWeekNumbers?(D(),b("div",ft)):R("",!0),(D(!0),b(U,null,V(l(K),(u,h)=>F(a.$slots,"dayHeader",{index:C(h),label:u},()=>[(D(),b("div",{key:C(h),class:B([C(h),"cv-header-day"])},k(u),3))])),256))]),v("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(D(!0),b(U,null,V(l(re),(u,h)=>(D(),b("div",{key:`${h}-week`,class:B(["cv-week",`week${h+1}`,`ws${l(i).isoYearMonthDay(u)}`])},[e.displayWeekNumbers?(D(),b("div",yt,[F(a.$slots,"weekNumber",{date:u,numberInYear:l(J)+h,numberInPeriod:h+1},()=>[v("span",null,k(l(J)+h),1)])])):R("",!0),v("div",Pt,[(D(!0),b(U,null,V(l(i).daysOfWeek(u),(o,d)=>(D(),b("div",{key:C(d),draggable:e.enableDateSelection,class:B(["cv-day",C(d),`d${l(i).isoYearMonthDay(o)}`,`d${l(i).isoMonthDay(o)}`,`d${l(i).paddedDay(o)}`,`instance${l(i).instanceOfMonth(o)}`,{today:l(i).isSameDate(o,l(i).today()),outsideOfMonth:!l(i).isSameMonth(o,l(y)),past:l(i).isInPast(o),future:l(i).isInFuture(o),last:l(i).isLastDayOfMonth(o),lastInstance:l(i).isLastInstanceOfMonth(o),hasItems:Te(o),selectionStart:l(i).isSameDate(o,e.selectionStart),selectionEnd:l(i).isSameDate(o,e.selectionEnd)},...e.dateClasses&&e.dateClasses[l(i).isoYearMonthDay(o)]||[]]),"aria-grabbed":e.enableDateSelection?pe(o):void 0,"aria-label":o.getDate().toString(),"aria-selected":pe(o),"aria-dropeffect":e.enableDragDrop&&s.currentDragItem?"move":e.enableDateSelection&&s.dateSelectionOrigin?"execute":"none",onClick:P=>S(o,P),onDragstart:P=>Ce(o,P),onDrop:w(P=>_e(o,P),["prevent"]),onDragover:w(P=>Oe(o,P),["prevent"]),onDragenter:w(P=>$e(o,P),["prevent"]),onDragleave:w(P=>Fe(o,P),["prevent"])},[v("div",St,k(o.getDate()),1),F(a.$slots,"dayContent",{day:o})],42,kt))),128)),t.enableHtmlTitles?(D(!0),b(U,{key:0},V(ve(u),o=>F(a.$slots,"item",{value:o,weekStartDate:u,top:X(o)},()=>[(D(),b("div",{key:o.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?o==s.currentDragItem:void 0,class:B([o.classes,"cv-item"]),title:o.tooltip||o.title,style:fe(`top:${X(o)};${o.originalItem.style}`),onDragstart:d=>ge(o,d),onMouseenter:d=>Y(o,d),onMouseleave:d=>N(o,d),onClick:w(d=>T(o,d),["stop"]),innerHTML:De(o)},null,46,wt))])),256)):(D(!0),b(U,{key:1},V(ve(u),o=>F(a.$slots,"item",{value:o,weekStartDate:u,top:X(o)},()=>[(D(),b("div",{key:o.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?o==s.currentDragItem:void 0,class:B([o.classes,"cv-item"]),title:o.tooltip||o.title,style:fe(`top:${X(o)};${o.originalItem.style}`),onDragstart:d=>ge(o,d),onMouseenter:d=>Y(o,d),onMouseleave:d=>N(o,d),onClick:w(d=>T(o,d),["stop"])},k(De(o)),47,Mt)),Pe(" div> ")])),256))])],2))),128))],8,bt)],2))}}),Ct={class:"cv-header"},Ot={class:"cv-header-nav"},$t=["disabled"],Ft=["disabled","innerHTML"],_t=["disabled"],At=["disabled"],Lt={class:"periodLabel"},Tt=q({__name:"CalendarViewHeader",props:{headerProps:{type:Object,required:!0},previousYearLabel:{type:String,default:"<<"},previousPeriodLabel:{type:String,default:"<"},nextPeriodLabel:{type:String,default:">"},nextYearLabel:{type:String,default:">>"}},emits:["input"],setup(e,{emit:r}){const t=s=>r("input",s);return(s,c)=>(D(),b("div",Ct,[v("div",Ot,[v("button",{disabled:!e.headerProps.previousYear,class:"previousYear","aria-label":"Previous Year",onClick:c[0]||(c[0]=w(y=>t(e.headerProps.previousYear),["prevent"]))},k(e.previousYearLabel),9,$t),v("button",{disabled:!e.headerProps.previousPeriod,class:"previousPeriod","aria-label":"Previous Period",onClick:c[1]||(c[1]=w(y=>t(e.headerProps.previousPeriod),["prevent"])),innerHTML:e.previousPeriodLabel},null,8,Ft),v("button",{class:"currentPeriod","aria-label":"Current Period",onClick:c[2]||(c[2]=w(y=>t(e.headerProps.currentPeriod),["prevent"]))},k(e.headerProps.currentPeriodLabel),1),v("button",{disabled:!e.headerProps.nextPeriod,class:"nextPeriod","aria-label":"Next Period",onClick:c[3]||(c[3]=w(y=>t(e.headerProps.nextPeriod),["prevent"]))},k(e.nextPeriodLabel),9,_t),v("button",{disabled:!e.headerProps.nextYear,class:"nextYear","aria-label":"Next Year",onClick:c[4]||(c[4]=w(y=>t(e.headerProps.nextYear),["prevent"]))},k(e.nextYearLabel),9,At)]),v("div",Lt,[F(s.$slots,"label",{},()=>[Pe(k(e.headerProps.periodLabel),1)])])]))}}),Ie=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],Yt=v("option",{value:"mattina"},"Mattina",-1),Bt=v("option",{value:"pomeriggio"},"Pomeriggio",-1),xt=[Yt,Bt],Ht=v("button",{type:"submit"},"Conferma",-1),Et={props:{date:{type:Date,required:!0}},data(){return{timeSlot:"mattina"}},methods:{saveBooking(){this.$emit("save",{date:this.date,timeSlot:this.timeSlot})}}},Nt=q({...Et,__name:"BookSlot",setup(e){return(r,t)=>(D(),b("div",null,[v("h2",null,"Dai la disponibilità per il "+k(e.date.getDate())+" "+k(l(Ie)[e.date.getMonth()]),1),v("form",{onSubmit:t[1]||(t[1]=w((...s)=>r.saveBooking&&r.saveBooking(...s),["prevent"]))},[He(v("select",{id:"time-slot","onUpdate:modelValue":t[0]||(t[0]=s=>r.timeSlot=s)},xt,512),[[Ee,r.timeSlot]]),Ht],32)]))}});const Wt={props:{date:{type:Date,required:!0},time:{type:String,required:!0}},data(){return{timeSlot:"mattina"}},methods:{saveBooking(){this.$emit("save",{date:this.date,timeSlot:this.time})}}},Ut=q({...Wt,__name:"ExistingSlot",setup(e){return(r,t)=>(D(),b("div",null,[v("h2",null,"Dai la disponibilità per il "+k(e.date.getDate())+" "+k(l(Ie)[e.date.getMonth()])+" "+k(e.time),1),v("button",{onClick:t[0]||(t[0]=(...s)=>r.saveBooking&&r.saveBooking(...s))},"Conferma")]))}}),Vt={class:"availabilityView"},zt=v("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),Rt={id:"calendar-component"},jt={key:2},Gt=q({__name:"AvailabilityView",setup(e){var Q;let r=$(new Date),t=$(!1),s=$(!1),c=$(new Date),y=$("mattina"),g=$(!1),m=$(!1);function J(p){return p.map(S=>{const T=S.id.substring(0,8),C=S.id.charAt(S.id.length-1);let M;if(C==="M")M=8;else if(C==="P")M=15;else throw new Error("Formato ID non riconosciuto");const Y=new Date(parseInt(T.substring(0,4),10),parseInt(T.substring(4,6),10)-1,parseInt(T.substring(6,8),10),M),N=new Date(Y);return N.setHours(Y.getHours()+4),{id:S.id,startDate:Y,endDate:N,title:S.users.length>=3?"Al completo":`${3-S.users.length} posti disponibili`,classes:S.users.length>=3?"red":"green",slotAvailables:3-S.users.length}})}const _=Ne(z,"availabilities"),H=We(_,{wait:!0}),re=f(()=>J(H.value)),A=(Q=Ue().value)==null?void 0:Q.uid;function K(p,I){return`availabilities/${p.getFullYear()}${(p.getMonth()+1).toString().padStart(2,"0")}${p.getDate().toString().padStart(2,"0")}-${I==="mattina"?"M":"P"}`}async function L(p){g.value=!0,await ze(z,async I=>{I.set(se(z,K(p.date,p.timeSlot)),{users:Re(se(z,`users/${A}`))}),I.set(se(z,`users/${A}/${K(p.date,p.timeSlot)}`),{date:p.date,timeSlot:p.timeSlot})}),g.value=!1,m.value=!0,s.value=!1,t.value=!1}function E(p){r.value=p}function ie(p){m.value=!1,c.value=p,s.value=!1,t.value=!0}function oe(p){m.value=!1,p.originalItem.slotAvailables>0&&(y.value=p.id.charAt(p.id.length-1)==="M"?"mattina":"pomeriggio",c.value=p.startDate,s.value=!0,t.value=!1)}return(p,I)=>(D(),b("div",Vt,[zt,v("div",Rt,[be(l(It),{"show-date":l(r),class:"theme-default",onClickDate:ie,onClickItem:oe,items:re.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month"},{header:Ve(({headerProps:S})=>[be(l(Tt),{"header-props":S,onInput:E},null,8,["header-props"])]),_:1},8,["show-date","items"]),l(t)&&!l(g)?(D(),ye(Nt,{key:0,date:l(c),onSave:L},null,8,["date"])):R("",!0),l(s)&&!l(g)?(D(),ye(Ut,{key:1,date:l(c),time:l(y),onSave:L},null,8,["date","time"])):R("",!0),l(m)?(D(),b("div",jt,"Prenotato")):R("",!0)])]))}});export{Gt as default};
