import{d as x,c as f,h as D,t as P,e as l,k as He,v as Ee,l as M,b as v,m as Ne,n as b,q as We,x as L,f as B,F as V,y as R,z as Y,A as X,B as he,C as A,a as ye,D as Ue,E as Ve,i as Z,w as be,H as z,r as Re,I as fe,J as ze,K as re,L as qe}from"./index-afbb1512.js";const ke=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],je=D("option",{value:"mattina"},"Mattina",-1),Ge=D("option",{value:"pomeriggio"},"Pomeriggio",-1),Je=[je,Ge],Ke=D("button",{type:"submit"},"Conferma",-1),Qe={props:{date:{type:Date,required:!0}},data(){return{timeSlot:"mattina"}},methods:{saveBooking(){this.$emit("save",{date:this.date,timeSlot:this.timeSlot})}}},Xe=x({...Qe,__name:"BookSlot",setup(e){return(a,t)=>(v(),f("div",null,[D("h2",null,"Dai la disponibilità per il "+P(e.date.getDate())+" "+P(l(ke)[e.date.getMonth()]),1),D("form",{onSubmit:t[1]||(t[1]=M((...s)=>a.saveBooking&&a.saveBooking(...s),["prevent"]))},[He(D("select",{id:"time-slot","onUpdate:modelValue":t[0]||(t[0]=s=>a.timeSlot=s)},Je,512),[[Ee,a.timeSlot]]),Ke],32)]))}});const Ze={props:{date:{type:Date,required:!0},time:{type:String,required:!0}},data(){return{timeSlot:"mattina"}},methods:{saveBooking(){this.$emit("save",{date:this.date,timeSlot:this.time})}}},et=x({...Ze,__name:"ExistingSlot",setup(e){return(a,t)=>(v(),f("div",null,[D("h2",null,"Dai la disponibilità per il "+P(e.date.getDate())+" "+P(l(ke)[e.date.getMonth()])+" "+P(e.time),1),D("button",{onClick:t[0]||(t[0]=(...s)=>a.saveBooking&&a.saveBooking(...s))},"Conferma")]))}});var tt=Object.defineProperty,at=(e,a,t)=>a in e?tt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,Q=(e,a,t)=>(at(e,typeof a!="symbol"?a+"":a,t),t);const j=()=>ee(new Date),rt=(e,a,t)=>{switch(a){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return oe(e,t);default:return e}},it=e=>[...Array(7)].map((a,t)=>H(e,t)),H=(e,a)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+a,e.getHours(),e.getMinutes(),e.getSeconds()),oe=(e,a)=>H(e,(a-e.getDay()-7)%-7),ot=(e,a)=>H(oe(e,a),7),q=e=>new Date(e.getFullYear(),e.getMonth()),nt=e=>Math.ceil(e.getDate()/7),st=(e,a,t)=>new Date(e.getFullYear()+(a=="year"?t:0),e.getMonth()+(a=="month"?t:0),e.getDate()+(a=="week"?t*7:0)),ne=e=>("0"+String(e.getMonth()+1)).slice(-2),se=e=>("0"+String(e.getDate())).slice(-2),Pe=e=>e.getFullYear()+"-"+ne(e),lt=e=>Pe(e)+"-"+se(e),dt=e=>ne(e)+"-"+se(e),ut=(e,a,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!te()){var s=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-s).toISOString().slice(11,16)}return e.toLocaleTimeString(a,t)},ct=(e,a,t,s)=>{const g=e.getFullYear()===a.getFullYear(),h=we(e,a),m=t!=="year"&&t!=="month";let p=[];return p.push(s[e.getMonth()]),m&&(p.push(" "),p.push(e.getDate())),g||(p.push(m?", ":" "),p.push(e.getFullYear())),!h||!g?(p.push(" – "),h||p.push(s[a.getMonth()]),m&&p.push(" ")):m&&p.push(" – "),m?(p.push(a.getDate()),p.push(", ")):p.push(" "),p.push(a.getFullYear()),p.join("")},Se=(e,a)=>{const t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-s)/864e5},gt=(e,a)=>!!e&&!!a&&Se(e,a)===0,mt=(e,a)=>!!e&&!!a&&e.getTime()===a.getTime(),we=(e,a)=>!!e&&!!a&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth(),pt=e=>q(e)<q(j()),vt=e=>q(e)>q(j()),Dt=e=>ee(e)>j(),ht=e=>ee(e)<j(),ft=e=>e.getMonth()!==H(e,7).getMonth(),yt=e=>e.getMonth()!==H(e,1).getMonth(),Me=e=>{let a=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,s)=>a[s]=Number(t)),a[1]--,new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])},ie=e=>typeof e=="string"?Me(e):new Date(e),ee=e=>{const a=new Date(e);return a.setHours(0,0,0,0),a},bt=e=>e.substring(0,2),te=()=>typeof Intl<"u",kt=(e,a)=>{if(!te())return[...Array(12)].map(s=>"");const t=new Intl.DateTimeFormat(e,{month:a});return[...Array(12)].map((s,g)=>t.format(new Date(2017,g,1)))},Pt=(e,a,t)=>{if(!te())return[...Array(7)].map(g=>"");const s=new Intl.DateTimeFormat(e,{weekday:a});return[...Array(7)].map((g,h)=>s.format(new Date(2017,0,(h+1+t)%7)))},St=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),wt=(e,a)=>{const t=e.classes?[...e.classes]:[];return a&&t.push("isHovered"),{originalItem:e,startDate:ie(e.startDate),endDate:ie(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},i={addDays:H,beginningOfMonth:q,beginningOfPeriod:rt,beginningOfWeek:oe,dateOnly:ee,dayDiff:Se,daysOfWeek:it,endOfWeek:ot,formattedPeriod:ct,formattedTime:ut,fromIsoStringToLocalDate:Me,getDefaultBrowserLocale:St,getFormattedMonthNames:kt,getFormattedWeekdayNames:Pt,incrementPeriod:st,instanceOfMonth:nt,isFutureMonth:vt,isInFuture:Dt,isInPast:ht,isLastDayOfMonth:yt,isLastInstanceOfMonth:ft,isoMonthDay:dt,isoYearMonth:Pe,isoYearMonthDay:lt,isPastMonth:pt,isSameDate:gt,isSameDateTime:mt,isSameMonth:we,languageCode:bt,normalizeItem:wt,paddedDay:se,paddedMonth:ne,supportsIntl:te,today:j,toLocalDate:ie};class Mt{constructor(){Q(this,"currentDragItem"),Q(this,"dateSelectionOrigin"),Q(this,"currentHoveredItemId",""),Q(this,"CalendarMath",i)}}const Ct={class:"cv-header-days"},_t={key:0,class:"cv-weeknumber"},It=["aria-multiselectable"],Ot={key:0,class:"cv-weeknumber"},$t={class:"cv-weekdays"},Ft=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],Lt={class:"cv-day-number"},At=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],Tt=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],Yt=x({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:a}){const t=e,s=Ne(new Mt),g=b(()=>t.locale||i.getDefaultBrowserLocale()),h=b(()=>t.showDate?i.dateOnly(t.showDate):i.today()),m=b(()=>i.beginningOfPeriod(h.value,t.displayPeriodUom,t.startingDayOfWeek)),p=b(()=>i.addDays(i.incrementPeriod(m.value,t.displayPeriodUom,t.displayPeriodCount),-1)),$=b(()=>{const r=i.beginningOfWeek(i.beginningOfPeriod(m.value,"year",0),t.startingDayOfWeek),n=i.beginningOfWeek(m.value,t.startingDayOfWeek);return 1+Math.floor(i.dayDiff(r,n)/7)}),C=b(()=>i.beginningOfWeek(m.value,t.startingDayOfWeek)),_=b(()=>i.endOfWeek(p.value,t.startingDayOfWeek)),w=b(()=>{const r=Math.floor((i.dayDiff(C.value,_.value)+1)/7);return[...Array(r)].map((n,u)=>i.addDays(C.value,u*7))}),I=b(()=>i.getFormattedMonthNames(g.value,t.monthNameFormat)),c=b(()=>i.getFormattedWeekdayNames(g.value,t.weekdayNameFormat,t.startingDayOfWeek)),S=b(()=>t.items?t.items.map(r=>i.normalizeItem(r,r.id===s.currentHoveredItemId)):[]),O=b(()=>i.beginningOfPeriod(i.today(),t.displayPeriodUom,t.startingDayOfWeek)),E=b(()=>i.addDays(i.incrementPeriod(O.value,t.displayPeriodUom,t.displayPeriodCount),-1)),N=b(()=>i.formattedPeriod(m.value,p.value,t.displayPeriodUom,I.value)),G=b(()=>{const r=O.value,n=m.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(r.getTime()-n.getTime())+1]:t.currentPeriodLabel:i.formattedPeriod(r,E.value,t.displayPeriodUom,I.value)}),Ce=b(()=>({previousYear:T(-12),previousPeriod:T(-1),nextPeriod:T(1),previousFullPeriod:T(-t.displayPeriodCount),nextFullPeriod:T(t.displayPeriodCount),nextYear:T(12),currentPeriod:O.value,currentPeriodLabel:G.value,periodStart:m.value,periodEnd:p.value,displayLocale:g.value,displayFirstDate:C.value,displayLastDate:_.value,monthNames:I.value,fixedItems:S.value,periodLabel:N.value})),_e=b(()=>({periodStart:m,periodEnd:p,displayFirstDate:C,displayLastDate:_}));We(()=>_e,r=>{t.periodChangedCallback&&(a("period-changed"),t.periodChangedCallback(r,"watch"))},{immediate:!0,deep:!0});const Ie=(r,n)=>{t.disablePast&&i.isInPast(r)||t.disableFuture&&i.isInFuture(r)||a("click-date",r,ge(r,r),n)},le=(r,n)=>a("click-item",r,n),W=r=>"dow"+(r+t.startingDayOfWeek)%7,T=r=>{const n=i.incrementPeriod(m.value,t.displayPeriodUom,r),u=i.incrementPeriod(n,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&u<=i.today()||t.disableFuture&&n>i.today()?null:n},de=(r,n)=>{s.currentHoveredItemId=r.id,t.doEmitItemMouseEvents&&a("item-mouseenter",r,n)},ue=(r,n)=>{s.currentHoveredItemId="",t.doEmitItemMouseEvents&&a("item-mouseleave",r,n)},Oe=(r,n)=>{var u,y;if(!t.enableDateSelection)return!1;(u=n.dataTransfer)==null||u.setData("text",r.toString());let o=new Image;return o.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(y=n.dataTransfer)==null||y.setDragImage(o,10,10),s.dateSelectionOrigin=r,a("date-selection-start",ae(r),n),!0},ce=(r,n)=>{var u;return t.enableDragDrop?((u=n.dataTransfer)==null||u.setData("text",r.id),s.currentDragItem=r,s.dateSelectionOrigin=void 0,a("drag-start",r,n),!0):!1},ae=r=>r<=s.dateSelectionOrigin?[r,s.dateSelectionOrigin]:[s.dateSelectionOrigin,r],$e=(r,n)=>{t.enableDragDrop&&a("drag-over-date",s.currentDragItem,r,n)},Fe=(r,n)=>{t.enableDateSelection&&s.dateSelectionOrigin&&a("date-selection",ae(r),n),t.enableDragDrop&&(a("drag-enter-date",s.currentDragItem,r,n),n.target.classList.add("draghover"))},Le=(r,n)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(a("drag-leave-date",s.currentDragItem,r,n),n.target.classList.remove("draghover"))},Ae=(r,n)=>{if(t.enableDateSelection&&s.dateSelectionOrigin){a("date-selection-finish",ae(r),n);return}t.enableDragDrop&&(a("drop-on-date",s.currentDragItem,r,n),n.target.classList.remove("draghover"))},Te=(r,n)=>r.startDate<n.startDate?-1:n.startDate<r.startDate?1:r.endDate>n.endDate?-1:n.endDate>r.endDate?1:r.id<n.id?-1:1,Ye=r=>ge(r,i.addDays(r,6)),ge=(r,n)=>S.value.filter(u=>u.endDate>=r&&i.dateOnly(u.startDate)<=n,this).sort(Te),Be=r=>!!S.value.find(n=>n.endDate>=r&&i.dateOnly(n.startDate)<=r),me=r=>!(!t.selectionStart||!t.selectionEnd||r<i.dateOnly(t.selectionStart)||r>i.dateOnly(t.selectionEnd)),pe=r=>{const n=Ye(r),u=[],y=[[],[],[],[],[],[],[]];if(!n)return u;for(let o=0;o<n.length;o++){const d=Object.assign({},n[o],{classes:[...n[o].classes],itemRow:0}),k=d.startDate<r,U=k?0:i.dayDiff(r,d.startDate),De=Math.min(7-U,i.dayDiff(i.addDays(r,U),d.endDate)+1);k&&d.classes.push("continued"),i.dayDiff(r,d.endDate)>6&&d.classes.push("toBeContinued"),i.isInPast(d.endDate)&&d.classes.push("past"),d.originalItem.url&&d.classes.push("hasUrl");for(let F=0;F<7;F++)if(F===U){let K=0;for(;y[F][K];)K++;d.itemRow=K,y[F][K]=!0}else F<U+De&&(y[F][d.itemRow]=!0);d.classes.push(`offset${U}`),d.classes.push(`span${De}`),u.push(d)}return u},xe=r=>{const n='<span class="startTime">'+i.formattedTime(r.startDate,g.value,t.timeFormatOptions)+"</span>";let u="";return i.isSameDateTime(r.startDate,r.endDate)||(u='<span class="endTime">'+i.formattedTime(r.endDate,g.value,t.timeFormatOptions)+"</span>"),n+u},ve=r=>t.showTimes?xe(r)+" "+r.title:r.title,J=r=>{const n=r.itemRow,u=t.itemContentHeight,y=t.itemBorderHeight;return`calc(${t.itemTop} + ${n}*${u} + ${n}*${y})`};return(r,n)=>(v(),f("div",{"aria-label":"Calendar",class:Y(["cv-wrapper",`locale-${l(i).languageCode(l(g))}`,`locale-${l(g)}`,`y${l(m).getFullYear()}`,`m${l(i).paddedMonth(l(m))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:l(i).isPastMonth(l(m)),future:l(i).isFutureMonth(l(m)),noIntl:!l(i).supportsIntl}])},[L(r.$slots,"header",{headerProps:l(Ce)}),D("div",Ct,[e.displayWeekNumbers?(v(),f("div",_t)):B("",!0),(v(!0),f(V,null,R(l(c),(u,y)=>L(r.$slots,"dayHeader",{index:W(y),label:u},()=>[(v(),f("div",{key:W(y),class:Y([W(y),"cv-header-day"])},P(u),3))])),256))]),D("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(v(!0),f(V,null,R(l(w),(u,y)=>(v(),f("div",{key:`${y}-week`,class:Y(["cv-week",`week${y+1}`,`ws${l(i).isoYearMonthDay(u)}`])},[e.displayWeekNumbers?(v(),f("div",Ot,[L(r.$slots,"weekNumber",{date:u,numberInYear:l($)+y,numberInPeriod:y+1},()=>[D("span",null,P(l($)+y),1)])])):B("",!0),D("div",$t,[(v(!0),f(V,null,R(l(i).daysOfWeek(u),(o,d)=>(v(),f("div",{key:W(d),draggable:e.enableDateSelection,class:Y(["cv-day",W(d),`d${l(i).isoYearMonthDay(o)}`,`d${l(i).isoMonthDay(o)}`,`d${l(i).paddedDay(o)}`,`instance${l(i).instanceOfMonth(o)}`,{today:l(i).isSameDate(o,l(i).today()),outsideOfMonth:!l(i).isSameMonth(o,l(h)),past:l(i).isInPast(o),future:l(i).isInFuture(o),last:l(i).isLastDayOfMonth(o),lastInstance:l(i).isLastInstanceOfMonth(o),hasItems:Be(o),selectionStart:l(i).isSameDate(o,e.selectionStart),selectionEnd:l(i).isSameDate(o,e.selectionEnd)},...e.dateClasses&&e.dateClasses[l(i).isoYearMonthDay(o)]||[]]),"aria-grabbed":e.enableDateSelection?me(o):void 0,"aria-label":o.getDate().toString(),"aria-selected":me(o),"aria-dropeffect":e.enableDragDrop&&s.currentDragItem?"move":e.enableDateSelection&&s.dateSelectionOrigin?"execute":"none",onClick:k=>Ie(o,k),onDragstart:k=>Oe(o,k),onDrop:M(k=>Ae(o,k),["prevent"]),onDragover:M(k=>$e(o,k),["prevent"]),onDragenter:M(k=>Fe(o,k),["prevent"]),onDragleave:M(k=>Le(o,k),["prevent"])},[D("div",Lt,P(o.getDate()),1),L(r.$slots,"dayContent",{day:o})],42,Ft))),128)),t.enableHtmlTitles?(v(!0),f(V,{key:0},R(pe(u),o=>L(r.$slots,"item",{value:o,weekStartDate:u,top:J(o)},()=>[(v(),f("div",{key:o.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?o==s.currentDragItem:void 0,class:Y([o.classes,"cv-item"]),title:o.tooltip||o.title,style:he(`top:${J(o)};${o.originalItem.style}`),onDragstart:d=>ce(o,d),onMouseenter:d=>de(o,d),onMouseleave:d=>ue(o,d),onClick:M(d=>le(o,d),["stop"]),innerHTML:ve(o)},null,46,At))])),256)):(v(!0),f(V,{key:1},R(pe(u),o=>L(r.$slots,"item",{value:o,weekStartDate:u,top:J(o)},()=>[(v(),f("div",{key:o.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?o==s.currentDragItem:void 0,class:Y([o.classes,"cv-item"]),title:o.tooltip||o.title,style:he(`top:${J(o)};${o.originalItem.style}`),onDragstart:d=>ce(o,d),onMouseenter:d=>de(o,d),onMouseleave:d=>ue(o,d),onClick:M(d=>le(o,d),["stop"])},P(ve(o)),47,Tt)),X(" div> ")])),256))])],2))),128))],8,It)],2))}}),Bt={class:"cv-header"},xt={class:"cv-header-nav"},Ht=["disabled"],Et=["disabled","innerHTML"],Nt=["disabled"],Wt=["disabled"],Ut={class:"periodLabel"},Vt=x({__name:"CalendarViewHeader",props:{headerProps:{type:Object,required:!0},previousYearLabel:{type:String,default:"<<"},previousPeriodLabel:{type:String,default:"<"},nextPeriodLabel:{type:String,default:">"},nextYearLabel:{type:String,default:">>"}},emits:["input"],setup(e,{emit:a}){const t=s=>a("input",s);return(s,g)=>(v(),f("div",Bt,[D("div",xt,[D("button",{disabled:!e.headerProps.previousYear,class:"previousYear","aria-label":"Previous Year",onClick:g[0]||(g[0]=M(h=>t(e.headerProps.previousYear),["prevent"]))},P(e.previousYearLabel),9,Ht),D("button",{disabled:!e.headerProps.previousPeriod,class:"previousPeriod","aria-label":"Previous Period",onClick:g[1]||(g[1]=M(h=>t(e.headerProps.previousPeriod),["prevent"])),innerHTML:e.previousPeriodLabel},null,8,Et),D("button",{class:"currentPeriod","aria-label":"Current Period",onClick:g[2]||(g[2]=M(h=>t(e.headerProps.currentPeriod),["prevent"]))},P(e.headerProps.currentPeriodLabel),1),D("button",{disabled:!e.headerProps.nextPeriod,class:"nextPeriod","aria-label":"Next Period",onClick:g[3]||(g[3]=M(h=>t(e.headerProps.nextPeriod),["prevent"]))},P(e.nextPeriodLabel),9,Nt),D("button",{disabled:!e.headerProps.nextYear,class:"nextYear","aria-label":"Next Year",onClick:g[4]||(g[4]=M(h=>t(e.headerProps.nextYear),["prevent"]))},P(e.nextYearLabel),9,Wt)]),D("div",Ut,[L(s.$slots,"label",{},()=>[X(P(e.headerProps.periodLabel),1)])])]))}}),Rt={class:"calendarContainer"},zt={id:"calendar-component"},qt=x({__name:"Calendar",emits:["onClickDay","onClickItem"],setup(e,{emit:a}){var _;let t=A(new Date);(_=ye().value)==null||_.uid;function s(w){return w.map(c=>{const S=c.id.substring(0,8),O=c.id.charAt(c.id.length-1);let E;if(O==="M")E=8;else if(O==="P")E=15;else throw new Error("Formato ID non riconosciuto");const N=new Date(parseInt(S.substring(0,4),10),parseInt(S.substring(4,6),10)-1,parseInt(S.substring(6,8),10),E),G=new Date(N);return G.setHours(N.getHours()+4),{id:c.id,startDate:N,endDate:G,title:c.users.length>=3?"Al completo":`${3-c.users.length} posti disponibili`,classes:c.users.length>=3?"red":"green",slotAvailables:3-c.users.length}})}const g=Ue(z,"availabilities"),h=Ve(g,{wait:!0}),m=b(()=>s(h.value));function p(w){t.value=w}function $(w){a("onClickDay",w)}function C(w){a("onClickItem",w)}return(w,I)=>(v(),f("div",Rt,[D("div",zt,[Z(l(Yt),{"show-date":l(t),class:"theme-default",onClickDate:$,onClickItem:C,items:m.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month"},{header:be(({headerProps:c})=>[Z(l(Vt),{"header-props":c,onInput:p},null,8,["header-props"])]),_:1},8,["show-date","items"])])]))}});const jt={class:"availabilityView"},Gt=D("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),Jt={key:2,class:"clausola"},Kt={key:3},Xt=x({__name:"AvailabilityView",setup(e){var I;let a=A(!1),t=A(!1),s=A(new Date),g=A("mattina"),h=A(!1),m=A(!1);const p=(I=ye().value)==null?void 0:I.uid;function $(c,S){return`availabilities/${c.getFullYear()}${(c.getMonth()+1).toString().padStart(2,"0")}${c.getDate().toString().padStart(2,"0")}-${S==="mattina"?"M":"P"}`}async function C(c){h.value=!0,await ze(z,async S=>{S.set(re(z,$(c.date,c.timeSlot)),{players:qe(re(z,`users/${p}`))}),S.set(re(z,`users/${p}/${$(c.date,c.timeSlot)}`),{date:c.date,timeSlot:c.timeSlot})}),h.value=!1,m.value=!0,t.value=!1,a.value=!1}function _(c){m.value=!1,s.value=c,t.value=!1,a.value=!0}function w(c){m.value=!1,c.originalItem.slotAvailables>0&&(g.value=c.id.charAt(c.id.length-1)==="M"?"mattina":"pomeriggio",s.value=c.startDate,t.value=!0,a.value=!1)}return(c,S)=>{const O=Re("RouterLink");return v(),f("div",jt,[Gt,Z(qt,{onOnClickDay:_,onOnClickItem:w}),l(a)&&!l(h)?(v(),fe(Xe,{key:0,date:l(s),onSave:C},null,8,["date"])):B("",!0),l(t)&&!l(h)?(v(),fe(et,{key:1,date:l(s),time:l(g),onSave:C},null,8,["date","time"])):B("",!0),!l(h)&&(l(a)||l(t))?(v(),f("div",Jt,[X("Confermando accetti "),Z(O,{class:"link",to:"/rules"},{default:be(()=>[X(" il regolamento")]),_:1})])):B("",!0),l(m)?(v(),f("div",Kt,"Prenotato")):B("",!0)])}}});export{Xt as default};
