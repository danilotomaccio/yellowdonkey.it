import{r as Ke,n as ue,i as je,a as Ge,d as Qe,o as Je,b as Xe,m as Ie}from"./dialog-e6d5860c.js";import{k as Me,l as xe,m as X,x as Ze,A as et,n as tt,d as z,c as D,h as u,t as I,e as d,b as y,q as at,v as w,y as ot,z as N,f as W,F as j,B as G,C as R,D as A,E as Ce,H as oe,I as L,a as $e,J as rt,K as U,L as it,i as re,w as Ae,M as st,N as Q,r as nt,O as Pe,P as lt,Q as dt,R as ct,S as Se}from"./index-0850df7f.js";/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const ut=Me`@media(forced-colors: active){:host{--md-radio-disabled-selected-icon-color: GrayText;--md-radio-disabled-selected-icon-opacity: 1;--md-radio-disabled-unselected-icon-color: GrayText;--md-radio-disabled-unselected-icon-opacity: 1;--md-radio-selected-icon-color: CanvasText;--md-radio-selected-hover-icon-color: CanvasText;--md-radio-selected-focus-icon-color: CanvasText;--md-radio-selected-pressed-icon-color: CanvasText;--md-radio-icon-color: CanvasText;--md-radio-hover-icon-color: CanvasText;--md-radio-focus-icon-color: CanvasText;--md-radio-pressed-icon-color: CanvasText}}/*# sourceMappingURL=forced-colors-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ht{constructor(a){this.host=a,this.focused=!1,this.root=null,this.handleFocusIn=()=>{this.focused=!0,this.updateTabIndices()},this.handleFocusOut=()=>{this.focused=!1,this.updateTabIndices()},this.handleKeyDown=t=>{const s=t.key==="ArrowDown",l=t.key==="ArrowUp",g=t.key==="ArrowLeft",m=t.key==="ArrowRight";if(!g&&!m&&!s&&!l)return;const h=this.getNamedSiblings();if(!h.length)return;t.preventDefault();const P=getComputedStyle(this.host).direction==="rtl"?g||s:m||s,M=h.indexOf(this.host);let C=P?M+1:M-1;for(;C!==M;){C>=h.length?C=0:C<0&&(C=h.length-1);const v=h[C];if(v.hasAttribute("disabled")){P?C++:C--;continue}for(const $ of h)$!==v&&($.checked=!1,$.tabIndex=-1);v.checked=!0,v.removeAttribute("tabindex"),v.focus(),v.dispatchEvent(new Event("change",{bubbles:!0}));break}}}hostConnected(){this.root=this.host.getRootNode(),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("focusin",this.handleFocusIn),this.host.addEventListener("focusout",this.handleFocusOut),this.host.checked&&this.uncheckSiblings(),this.updateTabIndices()}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("focusin",this.handleFocusIn),this.host.removeEventListener("focusout",this.handleFocusOut),this.updateTabIndices(),this.root=null}handleCheckedChange(){this.host.checked&&(this.uncheckSiblings(),this.updateTabIndices())}uncheckSiblings(){for(const a of this.getNamedSiblings())a!==this.host&&(a.checked=!1)}updateTabIndices(){const a=this.getNamedSiblings(),t=a.find(s=>s.checked);if(t||this.focused){const s=t||this.host;s.removeAttribute("tabindex");for(const l of a)l!==s&&(l.tabIndex=-1);return}for(const s of a)s.removeAttribute("tabindex")}getNamedSiblings(){const a=this.host.getAttribute("name");return!a||!this.root?[]:Array.from(this.root.querySelectorAll(`[name="${a}"]`))}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oe;const le=Symbol("checked");let pt=0;class Y extends xe{get checked(){return this[le]}set checked(a){const t=this.checked;if(t===a)return;this[le]=a;const s=String(a);this.internals.setFormValue(this.checked?this.value:null,s),this.requestUpdate("checked",t),this.selectionController.handleCheckedChange()}get name(){return this.getAttribute("name")??""}set name(a){this.setAttribute("name",a)}get form(){return this.internals.form}get labels(){return this.internals.labels}constructor(){super(),this.maskId=`cutout${++pt}`,this[Oe]=!1,this.disabled=!1,this.value="on",this.selectionController=new ht(this),this.internals=this.attachInternals(),this.addController(this.selectionController),this.addEventListener("click",a=>{Ge(a)&&(this.focus(),Qe(this.input))})}focus(){var a;(a=this.input)==null||a.focus()}render(){const a={checked:this.checked},{ariaLabel:t}=this;return Ze`
      <div class="container ${Je(a)}">
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <svg class="icon" viewBox="0 0 20 20">
          <mask id="${this.maskId}">
            <rect width="100%" height="100%" fill="white" />
            <circle cx="10" cy="10" r="8" fill="black" />
          </mask>
          <circle class="outer circle" cx="10" cy="10" r="10"
              mask="url(#${this.maskId})" />
          <circle class="inner circle" cx="10" cy="10" r="5" />
        </svg>
        <input
          id="input"
          type="radio"
          name=${this.name}
          aria-label=${t||et}
          .checked=${this.checked}
          .value=${this.value}
          ?disabled=${this.disabled}
          @change=${this.handleChange}
        >
      </div>
    `}handleChange(a){this.disabled||(this.checked=!0,Xe(this,a))}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(a){this.checked=a==="true"}}Oe=le;Ke(Y);Y.shadowRootOptions={...xe.shadowRootOptions,delegatesFocus:!0};Y.formAssociated=!0;X([ue({type:Boolean})],Y.prototype,"checked",null);X([ue({type:Boolean,reflect:!0})],Y.prototype,"disabled",void 0);X([ue()],Y.prototype,"value",void 0);X([je("input")],Y.prototype,"input",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const mt=Me`:host{--_disabled-selected-icon-color: var(--md-radio-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-icon-opacity: var(--md-radio-disabled-selected-icon-opacity, 0.38);--_disabled-unselected-icon-color: var(--md-radio-disabled-unselected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-unselected-icon-opacity: var(--md-radio-disabled-unselected-icon-opacity, 0.38);--_icon-size: var(--md-radio-icon-size, 20px);--_selected-focus-icon-color: var(--md-radio-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-radio-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-radio-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-radio-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-radio-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-radio-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-radio-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_selected-pressed-state-layer-opacity: var(--md-radio-selected-pressed-state-layer-opacity, 0.12);--_state-layer-size: var(--md-radio-state-layer-size, 40px);--_focus-icon-color: var(--md-radio-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color: var(--md-radio-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-color: var(--md-radio-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-radio-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-radio-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-radio-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color: var(--md-radio-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-radio-pressed-state-layer-opacity, 0.12);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity);display:inline-flex;height:var(--_icon-size);position:relative;vertical-align:top;width:var(--_icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_icon-size))/2)}.container{display:grid;height:100%;place-content:center;place-items:center;width:100%}md-focus-ring{height:44px;inset:unset;width:44px}.checked{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}input{appearance:none;height:48px;outline:none;margin:0;position:absolute;width:48px}:host([touch-target=none]) input{width:100%;height:100%}md-ripple{border-radius:50%;height:var(--_state-layer-size);inset:unset;width:var(--_state-layer-size)}.icon{fill:var(--_icon-color);inset:0;position:absolute}.outer.circle{transition:fill 50ms linear}.inner.circle{opacity:0;transform-origin:center;transition:opacity 50ms linear}.checked .icon{fill:var(--_selected-icon-color)}.checked .inner.circle{animation:inner-circle-grow 300ms cubic-bezier(0.05, 0.7, 0.1, 1);opacity:1}@keyframes inner-circle-grow{from{transform:scale(0)}to{transform:scale(1)}}:host([disabled]) .circle{animation-duration:0s;transition-duration:0s}:host(:hover) .icon{fill:var(--_hover-icon-color)}:host(:focus-within) .icon{fill:var(--_focus-icon-color)}:host(:active) .icon{fill:var(--_pressed-icon-color)}:host([disabled]) .icon{fill:var(--_disabled-unselected-icon-color);opacity:var(--_disabled-unselected-icon-opacity)}:host(:hover) .checked .icon{fill:var(--_selected-hover-icon-color)}:host(:focus-within) .checked .icon{fill:var(--_selected-focus-icon-color)}:host(:active) .checked .icon{fill:var(--_selected-pressed-icon-color)}:host([disabled]) .checked .icon{fill:var(--_disabled-selected-icon-color);opacity:var(--_disabled-selected-icon-opacity)}/*# sourceMappingURL=radio-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let de=class extends Y{};de.styles=[mt,ut];de=X([tt("md-radio")],de);const vt=u("span",{"aria-hidden":"true"},"Mattina",-1),gt=u("span",{"aria-hidden":"true"},"Pomeriggio",-1),ft={props:{date:{type:Date,required:!0}},methods:{onSelect(e){this.$emit("select",{timeSlot:e})}}},yt=z({...ft,__name:"BookSlot",setup(e){return(a,t)=>(y(),D("div",null,[u("h2",null,"Dai la disponibilità per il "+I(e.date.getDate())+" "+I(d(Ie)[e.date.getMonth()]),1),u("form",null,[u("label",null,[u("md-radio",{onChange:t[0]||(t[0]=s=>a.onSelect("mattina")),type:"radio",name:"time",value:"mattina","aria-label":"Mattina","touch-target":"wrapper",checked:""},null,32),vt]),u("label",null,[u("md-radio",{onChange:t[1]||(t[1]=s=>a.onSelect("pomeriggio")),type:"radio",name:"time",value:"pomeriggio","aria-label":"Pomeriggio","touch-target":"wrapper"},null,32),gt])])]))}});const bt={props:{date:{type:Date,required:!0},time:{type:String,required:!0}}},Dt=z({...bt,__name:"ExistingSlot",setup(e){return(a,t)=>(y(),D("div",null,[u("h2",null,"Dai la disponibilità per il "+I(e.date.getDate())+" "+I(d(Ie)[e.date.getMonth()])+" "+I(e.time),1)]))}});var kt=Object.defineProperty,_t=(e,a,t)=>a in e?kt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,ae=(e,a,t)=>(_t(e,typeof a!="symbol"?a+"":a,t),t);const Z=()=>ie(new Date),wt=(e,a,t)=>{switch(a){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return he(e,t);default:return e}},Ct=e=>[...Array(7)].map((a,t)=>V(e,t)),V=(e,a)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+a,e.getHours(),e.getMinutes(),e.getSeconds()),he=(e,a)=>V(e,(a-e.getDay()-7)%-7),Pt=(e,a)=>V(he(e,a),7),J=e=>new Date(e.getFullYear(),e.getMonth()),St=e=>Math.ceil(e.getDate()/7),It=(e,a,t)=>new Date(e.getFullYear()+(a=="year"?t:0),e.getMonth()+(a=="month"?t:0),e.getDate()+(a=="week"?t*7:0)),pe=e=>("0"+String(e.getMonth()+1)).slice(-2),me=e=>("0"+String(e.getDate())).slice(-2),Le=e=>e.getFullYear()+"-"+pe(e),Mt=e=>Le(e)+"-"+me(e),xt=e=>pe(e)+"-"+me(e),$t=(e,a,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!se()){var s=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-s).toISOString().slice(11,16)}return e.toLocaleTimeString(a,t)},At=(e,a,t,s)=>{const l=e.getFullYear()===a.getFullYear(),g=Te(e,a),m=t!=="year"&&t!=="month";let h=[];return h.push(s[e.getMonth()]),m&&(h.push(" "),h.push(e.getDate())),l||(h.push(m?", ":" "),h.push(e.getFullYear())),!g||!l?(h.push(" – "),g||h.push(s[a.getMonth()]),m&&h.push(" ")):m&&h.push(" – "),m?(h.push(a.getDate()),h.push(", ")):h.push(" "),h.push(a.getFullYear()),h.join("")},Fe=(e,a)=>{const t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-s)/864e5},Ot=(e,a)=>!!e&&!!a&&Fe(e,a)===0,Lt=(e,a)=>!!e&&!!a&&e.getTime()===a.getTime(),Te=(e,a)=>!!e&&!!a&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth(),Ft=e=>J(e)<J(Z()),Tt=e=>J(e)>J(Z()),Yt=e=>ie(e)>Z(),Et=e=>ie(e)<Z(),Nt=e=>e.getMonth()!==V(e,7).getMonth(),Bt=e=>e.getMonth()!==V(e,1).getMonth(),Ye=e=>{let a=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,s)=>a[s]=Number(t)),a[1]--,new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])},ce=e=>typeof e=="string"?Ye(e):new Date(e),ie=e=>{const a=new Date(e);return a.setHours(0,0,0,0),a},Ht=e=>e.substring(0,2),se=()=>typeof Intl<"u",Rt=(e,a)=>{if(!se())return[...Array(12)].map(s=>"");const t=new Intl.DateTimeFormat(e,{month:a});return[...Array(12)].map((s,l)=>t.format(new Date(2017,l,1)))},Ut=(e,a,t)=>{if(!se())return[...Array(7)].map(l=>"");const s=new Intl.DateTimeFormat(e,{weekday:a});return[...Array(7)].map((l,g)=>s.format(new Date(2017,0,(g+1+t)%7)))},Wt=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),zt=(e,a)=>{const t=e.classes?[...e.classes]:[];return a&&t.push("isHovered"),{originalItem:e,startDate:ce(e.startDate),endDate:ce(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},r={addDays:V,beginningOfMonth:J,beginningOfPeriod:wt,beginningOfWeek:he,dateOnly:ie,dayDiff:Fe,daysOfWeek:Ct,endOfWeek:Pt,formattedPeriod:At,formattedTime:$t,fromIsoStringToLocalDate:Ye,getDefaultBrowserLocale:Wt,getFormattedMonthNames:Rt,getFormattedWeekdayNames:Ut,incrementPeriod:It,instanceOfMonth:St,isFutureMonth:Tt,isInFuture:Yt,isInPast:Et,isLastDayOfMonth:Bt,isLastInstanceOfMonth:Nt,isoMonthDay:xt,isoYearMonth:Le,isoYearMonthDay:Mt,isPastMonth:Ft,isSameDate:Ot,isSameDateTime:Lt,isSameMonth:Te,languageCode:Ht,normalizeItem:zt,paddedDay:me,paddedMonth:pe,supportsIntl:se,today:Z,toLocalDate:ce};class Vt{constructor(){ae(this,"currentDragItem"),ae(this,"dateSelectionOrigin"),ae(this,"currentHoveredItemId",""),ae(this,"CalendarMath",r)}}const qt={class:"cv-header-days"},Kt={key:0,class:"cv-weeknumber"},jt=["aria-multiselectable"],Gt={key:0,class:"cv-weeknumber"},Qt={class:"cv-weekdays"},Jt=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],Xt={class:"cv-day-number"},Zt=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],ea=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],ta=z({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:a}){const t=e,s=at(new Vt),l=w(()=>t.locale||r.getDefaultBrowserLocale()),g=w(()=>t.showDate?r.dateOnly(t.showDate):r.today()),m=w(()=>r.beginningOfPeriod(g.value,t.displayPeriodUom,t.startingDayOfWeek)),h=w(()=>r.addDays(r.incrementPeriod(m.value,t.displayPeriodUom,t.displayPeriodCount),-1)),x=w(()=>{const o=r.beginningOfWeek(r.beginningOfPeriod(m.value,"year",0),t.startingDayOfWeek),n=r.beginningOfWeek(m.value,t.startingDayOfWeek);return 1+Math.floor(r.dayDiff(o,n)/7)}),P=w(()=>r.beginningOfWeek(m.value,t.startingDayOfWeek)),M=w(()=>r.endOfWeek(h.value,t.startingDayOfWeek)),C=w(()=>{const o=Math.floor((r.dayDiff(P.value,M.value)+1)/7);return[...Array(o)].map((n,p)=>r.addDays(P.value,p*7))}),v=w(()=>r.getFormattedMonthNames(l.value,t.monthNameFormat)),$=w(()=>r.getFormattedWeekdayNames(l.value,t.weekdayNameFormat,t.startingDayOfWeek)),k=w(()=>t.items?t.items.map(o=>r.normalizeItem(o,o.id===s.currentHoveredItemId)):[]),O=w(()=>r.beginningOfPeriod(r.today(),t.displayPeriodUom,t.startingDayOfWeek)),b=w(()=>r.addDays(r.incrementPeriod(O.value,t.displayPeriodUom,t.displayPeriodCount),-1)),f=w(()=>r.formattedPeriod(m.value,h.value,t.displayPeriodUom,v.value)),F=w(()=>{const o=O.value,n=m.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(o.getTime()-n.getTime())+1]:t.currentPeriodLabel:r.formattedPeriod(o,b.value,t.displayPeriodUom,v.value)}),T=w(()=>({previousYear:H(-12),previousPeriod:H(-1),nextPeriod:H(1),previousFullPeriod:H(-t.displayPeriodCount),nextFullPeriod:H(t.displayPeriodCount),nextYear:H(12),currentPeriod:O.value,currentPeriodLabel:F.value,periodStart:m.value,periodEnd:h.value,displayLocale:l.value,displayFirstDate:P.value,displayLastDate:M.value,monthNames:v.value,fixedItems:k.value,periodLabel:f.value})),B=w(()=>({periodStart:m,periodEnd:h,displayFirstDate:P,displayLastDate:M}));ot(()=>B,o=>{t.periodChangedCallback&&(a("period-changed"),t.periodChangedCallback(o,"watch"))},{immediate:!0,deep:!0});const Ee=(o,n)=>{t.disablePast&&r.isInPast(o)||t.disableFuture&&r.isInFuture(o)||a("click-date",o,be(o,o),n)},ve=(o,n)=>a("click-item",o,n),q=o=>"dow"+(o+t.startingDayOfWeek)%7,H=o=>{const n=r.incrementPeriod(m.value,t.displayPeriodUom,o),p=r.incrementPeriod(n,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&p<=r.today()||t.disableFuture&&n>r.today()?null:n},ge=(o,n)=>{s.currentHoveredItemId=o.id,t.doEmitItemMouseEvents&&a("item-mouseenter",o,n)},fe=(o,n)=>{s.currentHoveredItemId="",t.doEmitItemMouseEvents&&a("item-mouseleave",o,n)},Ne=(o,n)=>{var p,_;if(!t.enableDateSelection)return!1;(p=n.dataTransfer)==null||p.setData("text",o.toString());let i=new Image;return i.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(_=n.dataTransfer)==null||_.setDragImage(i,10,10),s.dateSelectionOrigin=o,a("date-selection-start",ne(o),n),!0},ye=(o,n)=>{var p;return t.enableDragDrop?((p=n.dataTransfer)==null||p.setData("text",o.id),s.currentDragItem=o,s.dateSelectionOrigin=void 0,a("drag-start",o,n),!0):!1},ne=o=>o<=s.dateSelectionOrigin?[o,s.dateSelectionOrigin]:[s.dateSelectionOrigin,o],Be=(o,n)=>{t.enableDragDrop&&a("drag-over-date",s.currentDragItem,o,n)},He=(o,n)=>{t.enableDateSelection&&s.dateSelectionOrigin&&a("date-selection",ne(o),n),t.enableDragDrop&&(a("drag-enter-date",s.currentDragItem,o,n),n.target.classList.add("draghover"))},Re=(o,n)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(a("drag-leave-date",s.currentDragItem,o,n),n.target.classList.remove("draghover"))},Ue=(o,n)=>{if(t.enableDateSelection&&s.dateSelectionOrigin){a("date-selection-finish",ne(o),n);return}t.enableDragDrop&&(a("drop-on-date",s.currentDragItem,o,n),n.target.classList.remove("draghover"))},We=(o,n)=>o.startDate<n.startDate?-1:n.startDate<o.startDate?1:o.endDate>n.endDate?-1:n.endDate>o.endDate?1:o.id<n.id?-1:1,ze=o=>be(o,r.addDays(o,6)),be=(o,n)=>k.value.filter(p=>p.endDate>=o&&r.dateOnly(p.startDate)<=n,this).sort(We),Ve=o=>!!k.value.find(n=>n.endDate>=o&&r.dateOnly(n.startDate)<=o),De=o=>!(!t.selectionStart||!t.selectionEnd||o<r.dateOnly(t.selectionStart)||o>r.dateOnly(t.selectionEnd)),ke=o=>{const n=ze(o),p=[],_=[[],[],[],[],[],[],[]];if(!n)return p;for(let i=0;i<n.length;i++){const c=Object.assign({},n[i],{classes:[...n[i].classes],itemRow:0}),S=c.startDate<o,K=S?0:r.dayDiff(o,c.startDate),we=Math.min(7-K,r.dayDiff(r.addDays(o,K),c.endDate)+1);S&&c.classes.push("continued"),r.dayDiff(o,c.endDate)>6&&c.classes.push("toBeContinued"),r.isInPast(c.endDate)&&c.classes.push("past"),c.originalItem.url&&c.classes.push("hasUrl");for(let E=0;E<7;E++)if(E===K){let te=0;for(;_[E][te];)te++;c.itemRow=te,_[E][te]=!0}else E<K+we&&(_[E][c.itemRow]=!0);c.classes.push(`offset${K}`),c.classes.push(`span${we}`),p.push(c)}return p},qe=o=>{const n='<span class="startTime">'+r.formattedTime(o.startDate,l.value,t.timeFormatOptions)+"</span>";let p="";return r.isSameDateTime(o.startDate,o.endDate)||(p='<span class="endTime">'+r.formattedTime(o.endDate,l.value,t.timeFormatOptions)+"</span>"),n+p},_e=o=>t.showTimes?qe(o)+" "+o.title:o.title,ee=o=>{const n=o.itemRow,p=t.itemContentHeight,_=t.itemBorderHeight;return`calc(${t.itemTop} + ${n}*${p} + ${n}*${_})`};return(o,n)=>(y(),D("div",{"aria-label":"Calendar",class:R(["cv-wrapper",`locale-${d(r).languageCode(d(l))}`,`locale-${d(l)}`,`y${d(m).getFullYear()}`,`m${d(r).paddedMonth(d(m))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:d(r).isPastMonth(d(m)),future:d(r).isFutureMonth(d(m)),noIntl:!d(r).supportsIntl}])},[N(o.$slots,"header",{headerProps:d(T)}),u("div",qt,[e.displayWeekNumbers?(y(),D("div",Kt)):W("",!0),(y(!0),D(j,null,G(d($),(p,_)=>N(o.$slots,"dayHeader",{index:q(_),label:p},()=>[(y(),D("div",{key:q(_),class:R([q(_),"cv-header-day"])},I(p),3))])),256))]),u("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(y(!0),D(j,null,G(d(C),(p,_)=>(y(),D("div",{key:`${_}-week`,class:R(["cv-week",`week${_+1}`,`ws${d(r).isoYearMonthDay(p)}`])},[e.displayWeekNumbers?(y(),D("div",Gt,[N(o.$slots,"weekNumber",{date:p,numberInYear:d(x)+_,numberInPeriod:_+1},()=>[u("span",null,I(d(x)+_),1)])])):W("",!0),u("div",Qt,[(y(!0),D(j,null,G(d(r).daysOfWeek(p),(i,c)=>(y(),D("div",{key:q(c),draggable:e.enableDateSelection,class:R(["cv-day",q(c),`d${d(r).isoYearMonthDay(i)}`,`d${d(r).isoMonthDay(i)}`,`d${d(r).paddedDay(i)}`,`instance${d(r).instanceOfMonth(i)}`,{today:d(r).isSameDate(i,d(r).today()),outsideOfMonth:!d(r).isSameMonth(i,d(g)),past:d(r).isInPast(i),future:d(r).isInFuture(i),last:d(r).isLastDayOfMonth(i),lastInstance:d(r).isLastInstanceOfMonth(i),hasItems:Ve(i),selectionStart:d(r).isSameDate(i,e.selectionStart),selectionEnd:d(r).isSameDate(i,e.selectionEnd)},...e.dateClasses&&e.dateClasses[d(r).isoYearMonthDay(i)]||[]]),"aria-grabbed":e.enableDateSelection?De(i):void 0,"aria-label":i.getDate().toString(),"aria-selected":De(i),"aria-dropeffect":e.enableDragDrop&&s.currentDragItem?"move":e.enableDateSelection&&s.dateSelectionOrigin?"execute":"none",onClick:S=>Ee(i,S),onDragstart:S=>Ne(i,S),onDrop:A(S=>Ue(i,S),["prevent"]),onDragover:A(S=>Be(i,S),["prevent"]),onDragenter:A(S=>He(i,S),["prevent"]),onDragleave:A(S=>Re(i,S),["prevent"])},[u("div",Xt,I(i.getDate()),1),N(o.$slots,"dayContent",{day:i})],42,Jt))),128)),t.enableHtmlTitles?(y(!0),D(j,{key:0},G(ke(p),i=>N(o.$slots,"item",{value:i,weekStartDate:p,top:ee(i)},()=>[(y(),D("div",{key:i.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?i==s.currentDragItem:void 0,class:R([i.classes,"cv-item"]),title:i.tooltip||i.title,style:Ce(`top:${ee(i)};${i.originalItem.style}`),onDragstart:c=>ye(i,c),onMouseenter:c=>ge(i,c),onMouseleave:c=>fe(i,c),onClick:A(c=>ve(i,c),["stop"]),innerHTML:_e(i)},null,46,Zt))])),256)):(y(!0),D(j,{key:1},G(ke(p),i=>N(o.$slots,"item",{value:i,weekStartDate:p,top:ee(i)},()=>[(y(),D("div",{key:i.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?i==s.currentDragItem:void 0,class:R([i.classes,"cv-item"]),title:i.tooltip||i.title,style:Ce(`top:${ee(i)};${i.originalItem.style}`),onDragstart:c=>ye(i,c),onMouseenter:c=>ge(i,c),onMouseleave:c=>fe(i,c),onClick:A(c=>ve(i,c),["stop"])},I(_e(i)),47,ea)),oe(" div> ")])),256))])],2))),128))],8,jt)],2))}}),aa={class:"cv-header"},oa={class:"cv-header-nav"},ra=["disabled"],ia=["disabled","innerHTML"],sa=["disabled"],na=["disabled"],la={class:"periodLabel"},da=z({__name:"CalendarViewHeader",props:{headerProps:{type:Object,required:!0},previousYearLabel:{type:String,default:"<<"},previousPeriodLabel:{type:String,default:"<"},nextPeriodLabel:{type:String,default:">"},nextYearLabel:{type:String,default:">>"}},emits:["input"],setup(e,{emit:a}){const t=s=>a("input",s);return(s,l)=>(y(),D("div",aa,[u("div",oa,[u("button",{disabled:!e.headerProps.previousYear,class:"previousYear","aria-label":"Previous Year",onClick:l[0]||(l[0]=A(g=>t(e.headerProps.previousYear),["prevent"]))},I(e.previousYearLabel),9,ra),u("button",{disabled:!e.headerProps.previousPeriod,class:"previousPeriod","aria-label":"Previous Period",onClick:l[1]||(l[1]=A(g=>t(e.headerProps.previousPeriod),["prevent"])),innerHTML:e.previousPeriodLabel},null,8,ia),u("button",{class:"currentPeriod","aria-label":"Current Period",onClick:l[2]||(l[2]=A(g=>t(e.headerProps.currentPeriod),["prevent"]))},I(e.headerProps.currentPeriodLabel),1),u("button",{disabled:!e.headerProps.nextPeriod,class:"nextPeriod","aria-label":"Next Period",onClick:l[3]||(l[3]=A(g=>t(e.headerProps.nextPeriod),["prevent"]))},I(e.nextPeriodLabel),9,sa),u("button",{disabled:!e.headerProps.nextYear,class:"nextYear","aria-label":"Next Year",onClick:l[4]||(l[4]=A(g=>t(e.headerProps.nextYear),["prevent"]))},I(e.nextYearLabel),9,na)]),u("div",la,[N(s.$slots,"label",{},()=>[oe(I(e.headerProps.periodLabel),1)])])]))}}),ca={class:"calendarContainer"},ua={id:"calendar-component"},ha=z({__name:"Calendar",emits:["onClickDay","onClickItem"],setup(e,{emit:a}){var C;let t=L(new Date);(C=$e().value)==null||C.uid;function s(v){return v.map(k=>{const O=k.id.substring(0,8),b=k.id.charAt(k.id.length-1);let f;if(b==="M")f=8;else if(b==="P")f=15;else throw new Error("Formato ID non riconosciuto");const F=new Date(parseInt(O.substring(0,4),10),parseInt(O.substring(4,6),10)-1,parseInt(O.substring(6,8),10),f),T=new Date(F);T.setHours(F.getHours()+4);const B=k.players||k.users;return{id:k.id,startDate:F,endDate:T,title:B.length>=3?"Al completo":`${3-B.length} posti disponibili`,classes:B.length>=3?"red":"green",slotAvailables:3-B.length}})}const l=rt(U,"availabilities"),g=it(l,{wait:!0}),m=w(()=>s(g.value));function h(v,$){return $.filter(k=>k.slotAvailables===0&&k.startDate.getFullYear()===v.getFullYear()&&k.startDate.getMonth()===v.getMonth()&&k.startDate.getDate()===v.getDate())}function x(v){t.value=v}function P(v){h(v,m.value).length>=1||a("onClickDay",v)}function M(v){v.originalItem.slotAvailables<=0||v.startDate<new Date||a("onClickItem",v)}return(v,$)=>(y(),D("div",ca,[u("div",ua,[re(d(ta),{"show-date":d(t),class:"theme-default",onClickDate:P,onClickItem:M,items:m.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month"},{header:Ae(({headerProps:k})=>[re(d(da),{"header-props":k,onInput:x},null,8,["header-props"])]),_:1},8,["show-date","items"])])]))}});const pa={class:"availabilityView"},ma=u("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),va=["open"],ga=u("div",{slot:"headline"},"Non puoi prenotare",-1),fa=u("form",{id:"form",slot:"content",method:"dialog"}," Hai ricevuto due o più ammonizioni e non puoi più prenotare. Dai un'occhiata al regolamento se vuoi sapere come ridurre le tue ammonizioni. ",-1),ya={slot:"actions"},ba=["open"],Da=u("div",{slot:"headline"},"Prenota slot",-1),ka={slot:"content",id:"form-id",method:"dialog"},_a={key:2,class:"clausola"},wa={slot:"actions"},Ca={key:0},Ma=z({__name:"AvailabilityView",setup(e){var O;const a=L(!1),t=L(!1),s=L(new Date),l=L("mattina"),g=L(!1),m=L(!1),h=L(!1),x=L(!1),P=(O=$e().value)==null?void 0:O.uid,M=st(Q(U,`users/${P}`));function C(b,f){return`availabilities/${b.getFullYear()}${(b.getMonth()+1).toString().padStart(2,"0")}${b.getDate().toString().padStart(2,"0")}-${f==="mattina"?"M":"P"}`}async function v(){if(x.value=!1,s.value==null||l.value==null){console.error("Ma che cazz");return}g.value=!0;const b=Q(U,C(s.value,l.value)),f=Q(U,`users/${P}/${C(s.value,l.value)}`);(await lt(b)).exists()?dt(b,{players:ct(Q(U,`users/${P}`))}):Se(b,{players:[Q(U,`users/${P}`)]}),Se(f,{date:s.value,timeSlot:l.value}),g.value=!1,m.value=!0,t.value=!1,a.value=!1}function $(b){var f;if(((f=M.value)==null?void 0:f.admonitionCount)>=2){h.value=!0;return}x.value=!0,m.value=!1,s.value=b,t.value=!1,a.value=!0}function k(b){var f;if(((f=M.value)==null?void 0:f.admonitionCount)>=2){h.value=!0;return}m.value=!1,x.value=!0,b.originalItem.slotAvailables>0&&(l.value=b.id.charAt(b.id.length-1)==="M"?"mattina":"pomeriggio",s.value=b.startDate,t.value=!0,a.value=!1)}return(b,f)=>{const F=nt("RouterLink");return y(),D("div",pa,[ma,re(ha,{onOnClickDay:$,onOnClickItem:k}),u("md-dialog",{type:"alert",open:h.value},[ga,fa,u("div",ya,[u("md-text-button",{form:"form",value:"ok",onClick:f[0]||(f[0]=T=>h.value=!1)},"OK")])],8,va),u("md-dialog",{type:"alert",open:x.value},[Da,u("form",ka,[a.value&&!g.value?(y(),Pe(yt,{key:0,date:s.value,onSelect:f[1]||(f[1]=T=>l.value=T.timeSlot)},null,8,["date"])):W("",!0),t.value&&!g.value?(y(),Pe(Dt,{key:1,date:s.value,time:l.value},null,8,["date","time"])):W("",!0),!g.value&&(a.value||t.value)?(y(),D("div",_a,[oe("Confermando accetti "),re(F,{class:"link",to:"/rules"},{default:Ae(()=>[oe(" il regolamento")]),_:1})])):W("",!0)]),u("div",wa,[u("md-text-button",{form:"form-id",value:"cancel",onClick:f[2]||(f[2]=T=>x.value=!1)},"Annulla"),u("md-text-button",{form:"form-id",value:"delete",onClick:v},"Conferma")])],8,ba),m.value?(y(),D("div",Ca,"Prenotato")):W("",!0)])}}});export{Ma as default};
