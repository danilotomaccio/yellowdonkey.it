import{k as ne,l as Xe,m as Pe,n as z,q as me,v as Ge,x as Je,y as Qe,z as Ae,A as et,B as tt,C as at,D as Oe,d as V,c as D,h as d,t as A,e as l,b as f,E as ve,H as ot,I as rt,J as nt,K as w,L as it,M as W,f as U,F as j,N as X,O as Y,P as R,Q as Se,R as oe,S as O,a as Fe,T as st,U as H,V as lt,i as re,w as Te,W as dt,X as G,r as ct,Y as Me,Z as ut,$ as ht,a0 as mt,a1 as $e}from"./index-14810358.js";/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const vt=ne`@media(forced-colors: active){:host{--md-radio-disabled-selected-icon-color: GrayText;--md-radio-disabled-selected-icon-opacity: 1;--md-radio-disabled-unselected-icon-color: GrayText;--md-radio-disabled-unselected-icon-opacity: 1;--md-radio-selected-icon-color: CanvasText;--md-radio-selected-hover-icon-color: CanvasText;--md-radio-selected-focus-icon-color: CanvasText;--md-radio-selected-pressed-icon-color: CanvasText;--md-radio-icon-color: CanvasText;--md-radio-hover-icon-color: CanvasText;--md-radio-focus-icon-color: CanvasText;--md-radio-pressed-icon-color: CanvasText}}/*# sourceMappingURL=forced-colors-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pt{constructor(a){this.host=a,this.focused=!1,this.root=null,this.handleFocusIn=()=>{this.focused=!0,this.updateTabIndices()},this.handleFocusOut=()=>{this.focused=!1,this.updateTabIndices()},this.handleKeyDown=t=>{const i=t.key==="ArrowDown",m=t.key==="ArrowUp",y=t.key==="ArrowLeft",v=t.key==="ArrowRight";if(!y&&!v&&!i&&!m)return;const c=this.getNamedSiblings();if(!c.length)return;t.preventDefault();const x=getComputedStyle(this.host).direction==="rtl"?y||i:v||i,S=c.indexOf(this.host);let C=x?S+1:S-1;for(;C!==S;){C>=c.length?C=0:C<0&&(C=c.length-1);const p=c[C];if(p.hasAttribute("disabled")){x?C++:C--;continue}for(const $ of c)$!==p&&($.checked=!1,$.tabIndex=-1);p.checked=!0,p.removeAttribute("tabindex"),p.focus(),p.dispatchEvent(new Event("change",{bubbles:!0}));break}}}hostConnected(){this.root=this.host.getRootNode(),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("focusin",this.handleFocusIn),this.host.addEventListener("focusout",this.handleFocusOut),this.host.checked&&this.uncheckSiblings(),this.updateTabIndices()}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("focusin",this.handleFocusIn),this.host.removeEventListener("focusout",this.handleFocusOut),this.updateTabIndices(),this.root=null}handleCheckedChange(){this.host.checked&&(this.uncheckSiblings(),this.updateTabIndices())}uncheckSiblings(){for(const a of this.getNamedSiblings())a!==this.host&&(a.checked=!1)}updateTabIndices(){const a=this.getNamedSiblings(),t=a.find(i=>i.checked);if(t||this.focused){const i=t||this.host;i.removeAttribute("tabindex");for(const m of a)m!==i&&(m.tabIndex=-1);return}for(const i of a)i.removeAttribute("tabindex")}getNamedSiblings(){const a=this.host.getAttribute("name");return!a||!this.root?[]:Array.from(this.root.querySelectorAll(`[name="${a}"]`))}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Le;const de=Symbol("checked");let gt=0;class L extends Pe{get checked(){return this[de]}set checked(a){const t=this.checked;if(t===a)return;this[de]=a;const i=String(a);this.internals.setFormValue(this.checked?this.value:null,i),this.requestUpdate("checked",t),this.selectionController.handleCheckedChange()}get name(){return this.getAttribute("name")??""}set name(a){this.setAttribute("name",a)}get form(){return this.internals.form}get labels(){return this.internals.labels}constructor(){super(),this.maskId=`cutout${++gt}`,this[Le]=!1,this.disabled=!1,this.value="on",this.selectionController=new pt(this),this.internals=this.attachInternals(),this.addController(this.selectionController),this.addEventListener("click",a=>{Je(a)&&(this.focus(),Qe(this.input))})}focus(){var a;(a=this.input)==null||a.focus()}render(){const a={checked:this.checked},{ariaLabel:t}=this;return Ae`
      <div class="container ${et(a)}">
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <svg class="icon" viewBox="0 0 20 20">
          <mask id="${this.maskId}">
            <rect width="100%" height="100%" fill="white" />
            <circle cx="10" cy="10" r="8" fill="black" />
          </mask>
          <circle class="outer circle" cx="10" cy="10" r="10"
              mask="url(#${this.maskId})" />
          <circle class="inner circle" cx="10" cy="10" r="5" />
        </svg>
        <input
          id="input"
          type="radio"
          name=${this.name}
          aria-label=${t||tt}
          .checked=${this.checked}
          .value=${this.value}
          ?disabled=${this.disabled}
          @change=${this.handleChange}
        >
      </div>
    `}handleChange(a){this.disabled||(this.checked=!0,at(this,a))}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(a){this.checked=a==="true"}}Le=de;Xe(L);L.shadowRootOptions={...Pe.shadowRootOptions,delegatesFocus:!0};L.formAssociated=!0;z([me({type:Boolean})],L.prototype,"checked",null);z([me({type:Boolean,reflect:!0})],L.prototype,"disabled",void 0);z([me()],L.prototype,"value",void 0);z([Ge("input")],L.prototype,"input",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const ft=ne`:host{--_disabled-selected-icon-color: var(--md-radio-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-icon-opacity: var(--md-radio-disabled-selected-icon-opacity, 0.38);--_disabled-unselected-icon-color: var(--md-radio-disabled-unselected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-unselected-icon-opacity: var(--md-radio-disabled-unselected-icon-opacity, 0.38);--_icon-size: var(--md-radio-icon-size, 20px);--_selected-focus-icon-color: var(--md-radio-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-radio-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-radio-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-radio-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-radio-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-radio-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-radio-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_selected-pressed-state-layer-opacity: var(--md-radio-selected-pressed-state-layer-opacity, 0.12);--_state-layer-size: var(--md-radio-state-layer-size, 40px);--_focus-icon-color: var(--md-radio-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color: var(--md-radio-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-color: var(--md-radio-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-radio-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-radio-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-radio-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color: var(--md-radio-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-radio-pressed-state-layer-opacity, 0.12);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity);display:inline-flex;height:var(--_icon-size);position:relative;vertical-align:top;width:var(--_icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_icon-size))/2)}.container{display:grid;height:100%;place-content:center;place-items:center;width:100%}md-focus-ring{height:44px;inset:unset;width:44px}.checked{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}input{appearance:none;height:48px;outline:none;margin:0;position:absolute;width:48px}:host([touch-target=none]) input{width:100%;height:100%}md-ripple{border-radius:50%;height:var(--_state-layer-size);inset:unset;width:var(--_state-layer-size)}.icon{fill:var(--_icon-color);inset:0;position:absolute}.outer.circle{transition:fill 50ms linear}.inner.circle{opacity:0;transform-origin:center;transition:opacity 50ms linear}.checked .icon{fill:var(--_selected-icon-color)}.checked .inner.circle{animation:inner-circle-grow 300ms cubic-bezier(0.05, 0.7, 0.1, 1);opacity:1}@keyframes inner-circle-grow{from{transform:scale(0)}to{transform:scale(1)}}:host([disabled]) .circle{animation-duration:0s;transition-duration:0s}:host(:hover) .icon{fill:var(--_hover-icon-color)}:host(:focus-within) .icon{fill:var(--_focus-icon-color)}:host(:active) .icon{fill:var(--_pressed-icon-color)}:host([disabled]) .icon{fill:var(--_disabled-unselected-icon-color);opacity:var(--_disabled-unselected-icon-opacity)}:host(:hover) .checked .icon{fill:var(--_selected-hover-icon-color)}:host(:focus-within) .checked .icon{fill:var(--_selected-focus-icon-color)}:host(:active) .checked .icon{fill:var(--_selected-pressed-icon-color)}:host([disabled]) .checked .icon{fill:var(--_disabled-selected-icon-color);opacity:var(--_disabled-selected-icon-opacity)}/*# sourceMappingURL=radio-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ce=class extends L{};ce.styles=[ft,vt];ce=z([Oe("md-radio")],ce);const yt=d("span",{"aria-hidden":"true"},"Mattina",-1),bt=d("span",{"aria-hidden":"true"},"Pomeriggio",-1),Dt={props:{date:{type:Date,required:!0}},methods:{onSelect(e){this.$emit("select",{timeSlot:e})}}},_t=V({...Dt,__name:"BookSlot",setup(e){return(a,t)=>(f(),D("div",null,[d("h2",null,"Dai la disponibilità per il "+A(e.date.getDate())+" "+A(l(ve)[e.date.getMonth()]),1),d("form",null,[d("label",null,[d("md-radio",{onChange:t[0]||(t[0]=i=>a.onSelect("mattina")),type:"radio",name:"time",value:"mattina","aria-label":"Mattina","touch-target":"wrapper",checked:""},null,32),yt]),d("label",null,[d("md-radio",{onChange:t[1]||(t[1]=i=>a.onSelect("pomeriggio")),type:"radio",name:"time",value:"pomeriggio","aria-label":"Pomeriggio","touch-target":"wrapper"},null,32),bt])])]))}});const kt={props:{date:{type:Date,required:!0},time:{type:String,required:!0}}},wt=V({...kt,__name:"ExistingSlot",setup(e){return(a,t)=>(f(),D("div",null,[d("h2",null,"Dai la disponibilità per il "+A(e.date.getDate())+" "+A(l(ve)[e.date.getMonth()])+" "+A(e.time),1)]))}});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ct extends ot{renderElevation(){return Ae`<md-elevation></md-elevation>`}}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const xt=ne`:host{--_container-color: var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation: var(--md-filled-tonal-button-container-elevation, 0);--_container-height: var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color: var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_container-shape: var(--md-filled-tonal-button-container-shape, 9999px);--_disabled-container-color: var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation: var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color: var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity: var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-type: var(--md-filled-tonal-button-label-text-type, var(--md-sys-typescale-label-large, 500 0.875rem / 1.25rem var(--md-ref-typeface-plain, Roboto)));--_pressed-container-elevation: var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color: var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity: var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color: var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color: var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size: var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_leading-space: var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space: var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px);--_container-shape-start-start: var( --md-filled-tonal-button-container-shape-start-start, var(--_container-shape) );--_container-shape-start-end: var( --md-filled-tonal-button-container-shape-start-end, var(--_container-shape) );--_container-shape-end-end: var( --md-filled-tonal-button-container-shape-end-end, var(--_container-shape) );--_container-shape-end-start: var( --md-filled-tonal-button-container-shape-end-start, var(--_container-shape) )}/*# sourceMappingURL=filled-tonal-styles.css.map */
`;/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const It=ne`md-elevation{transition-duration:280ms}.button{--md-elevation-level:var(--_container-elevation);--md-elevation-shadow-color:var(--_container-shadow-color)}.button:focus{--md-elevation-level:var(--_focus-container-elevation)}.button:hover{--md-elevation-level:var(--_hover-container-elevation)}.button:active{--md-elevation-level:var(--_pressed-container-elevation)}.button:disabled{--md-elevation-level:var(--_disabled-container-elevation)}/*# sourceMappingURL=shared-elevation-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let ue=class extends Ct{};ue.styles=[rt,It,xt];ue=z([Oe("md-filled-tonal-button")],ue);var St=Object.defineProperty,Mt=(e,a,t)=>a in e?St(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,ae=(e,a,t)=>(Mt(e,typeof a!="symbol"?a+"":a,t),t);const Q=()=>ie(new Date),$t=(e,a,t)=>{switch(a){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return pe(e,t);default:return e}},Pt=e=>[...Array(7)].map((a,t)=>q(e,t)),q=(e,a)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+a,e.getHours(),e.getMinutes(),e.getSeconds()),pe=(e,a)=>q(e,(a-e.getDay()-7)%-7),At=(e,a)=>q(pe(e,a),7),J=e=>new Date(e.getFullYear(),e.getMonth()),Ot=e=>Math.ceil(e.getDate()/7),Ft=(e,a,t)=>new Date(e.getFullYear()+(a=="year"?t:0),e.getMonth()+(a=="month"?t:0),e.getDate()+(a=="week"?t*7:0)),ge=e=>("0"+String(e.getMonth()+1)).slice(-2),fe=e=>("0"+String(e.getDate())).slice(-2),Ee=e=>e.getFullYear()+"-"+ge(e),Tt=e=>Ee(e)+"-"+fe(e),Lt=e=>ge(e)+"-"+fe(e),Et=(e,a,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!se()){var i=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-i).toISOString().slice(11,16)}return e.toLocaleTimeString(a,t)},Bt=(e,a,t,i)=>{const m=e.getFullYear()===a.getFullYear(),y=Ne(e,a),v=t!=="year"&&t!=="month";let c=[];return c.push(i[e.getMonth()]),v&&(c.push(" "),c.push(e.getDate())),m||(c.push(v?", ":" "),c.push(e.getFullYear())),!y||!m?(c.push(" – "),y||c.push(i[a.getMonth()]),v&&c.push(" ")):v&&c.push(" – "),v?(c.push(a.getDate()),c.push(", ")):c.push(" "),c.push(a.getFullYear()),c.join("")},Be=(e,a)=>{const t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-i)/864e5},Nt=(e,a)=>!!e&&!!a&&Be(e,a)===0,Wt=(e,a)=>!!e&&!!a&&e.getTime()===a.getTime(),Ne=(e,a)=>!!e&&!!a&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth(),Yt=e=>J(e)<J(Q()),Rt=e=>J(e)>J(Q()),Ht=e=>ie(e)>Q(),Ut=e=>ie(e)<Q(),zt=e=>e.getMonth()!==q(e,7).getMonth(),Vt=e=>e.getMonth()!==q(e,1).getMonth(),We=e=>{let a=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,i)=>a[i]=Number(t)),a[1]--,new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])},he=e=>typeof e=="string"?We(e):new Date(e),ie=e=>{const a=new Date(e);return a.setHours(0,0,0,0),a},qt=e=>e.substring(0,2),se=()=>typeof Intl<"u",Kt=(e,a)=>{if(!se())return[...Array(12)].map(i=>"");const t=new Intl.DateTimeFormat(e,{month:a});return[...Array(12)].map((i,m)=>t.format(new Date(2017,m,1)))},Zt=(e,a,t)=>{if(!se())return[...Array(7)].map(m=>"");const i=new Intl.DateTimeFormat(e,{weekday:a});return[...Array(7)].map((m,y)=>i.format(new Date(2017,0,(y+1+t)%7)))},jt=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),Xt=(e,a)=>{const t=e.classes?[...e.classes]:[];return a&&t.push("isHovered"),{originalItem:e,startDate:he(e.startDate),endDate:he(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},r={addDays:q,beginningOfMonth:J,beginningOfPeriod:$t,beginningOfWeek:pe,dateOnly:ie,dayDiff:Be,daysOfWeek:Pt,endOfWeek:At,formattedPeriod:Bt,formattedTime:Et,fromIsoStringToLocalDate:We,getDefaultBrowserLocale:jt,getFormattedMonthNames:Kt,getFormattedWeekdayNames:Zt,incrementPeriod:Ft,instanceOfMonth:Ot,isFutureMonth:Rt,isInFuture:Ht,isInPast:Ut,isLastDayOfMonth:Vt,isLastInstanceOfMonth:zt,isoMonthDay:Lt,isoYearMonth:Ee,isoYearMonthDay:Tt,isPastMonth:Yt,isSameDate:Nt,isSameDateTime:Wt,isSameMonth:Ne,languageCode:qt,normalizeItem:Xt,paddedDay:fe,paddedMonth:ge,supportsIntl:se,today:Q,toLocalDate:he};class Gt{constructor(){ae(this,"currentDragItem"),ae(this,"dateSelectionOrigin"),ae(this,"currentHoveredItemId",""),ae(this,"CalendarMath",r)}}const Jt={class:"cv-header-days"},Qt={key:0,class:"cv-weeknumber"},ea=["aria-multiselectable"],ta={key:0,class:"cv-weeknumber"},aa={class:"cv-weekdays"},oa=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],ra={class:"cv-day-number"},na=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],ia=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],sa=V({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:a}){const t=e,i=nt(new Gt),m=w(()=>t.locale||r.getDefaultBrowserLocale()),y=w(()=>t.showDate?r.dateOnly(t.showDate):r.today()),v=w(()=>r.beginningOfPeriod(y.value,t.displayPeriodUom,t.startingDayOfWeek)),c=w(()=>r.addDays(r.incrementPeriod(v.value,t.displayPeriodUom,t.displayPeriodCount),-1)),M=w(()=>{const o=r.beginningOfWeek(r.beginningOfPeriod(v.value,"year",0),t.startingDayOfWeek),s=r.beginningOfWeek(v.value,t.startingDayOfWeek);return 1+Math.floor(r.dayDiff(o,s)/7)}),x=w(()=>r.beginningOfWeek(v.value,t.startingDayOfWeek)),S=w(()=>r.endOfWeek(c.value,t.startingDayOfWeek)),C=w(()=>{const o=Math.floor((r.dayDiff(x.value,S.value)+1)/7);return[...Array(o)].map((s,h)=>r.addDays(x.value,h*7))}),p=w(()=>r.getFormattedMonthNames(m.value,t.monthNameFormat)),$=w(()=>r.getFormattedWeekdayNames(m.value,t.weekdayNameFormat,t.startingDayOfWeek)),_=w(()=>t.items?t.items.map(o=>r.normalizeItem(o,o.id===i.currentHoveredItemId)):[]),P=w(()=>r.beginningOfPeriod(r.today(),t.displayPeriodUom,t.startingDayOfWeek)),b=w(()=>r.addDays(r.incrementPeriod(P.value,t.displayPeriodUom,t.displayPeriodCount),-1)),g=w(()=>r.formattedPeriod(v.value,c.value,t.displayPeriodUom,p.value)),F=w(()=>{const o=P.value,s=v.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(o.getTime()-s.getTime())+1]:t.currentPeriodLabel:r.formattedPeriod(o,b.value,t.displayPeriodUom,p.value)}),T=w(()=>({previousYear:N(-12),previousPeriod:N(-1),nextPeriod:N(1),previousFullPeriod:N(-t.displayPeriodCount),nextFullPeriod:N(t.displayPeriodCount),nextYear:N(12),currentPeriod:P.value,currentPeriodLabel:F.value,periodStart:v.value,periodEnd:c.value,displayLocale:m.value,displayFirstDate:x.value,displayLastDate:S.value,monthNames:p.value,fixedItems:_.value,periodLabel:g.value})),B=w(()=>({periodStart:v,periodEnd:c,displayFirstDate:x,displayLastDate:S}));it(()=>B,o=>{t.periodChangedCallback&&(a("period-changed"),t.periodChangedCallback(o,"watch"))},{immediate:!0,deep:!0});const Ye=(o,s)=>{t.disablePast&&r.isInPast(o)||t.disableFuture&&r.isInFuture(o)||a("click-date",o,ke(o,o),s)},ye=(o,s)=>a("click-item",o,s),K=o=>"dow"+(o+t.startingDayOfWeek)%7,N=o=>{const s=r.incrementPeriod(v.value,t.displayPeriodUom,o),h=r.incrementPeriod(s,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&h<=r.today()||t.disableFuture&&s>r.today()?null:s},be=(o,s)=>{i.currentHoveredItemId=o.id,t.doEmitItemMouseEvents&&a("item-mouseenter",o,s)},De=(o,s)=>{i.currentHoveredItemId="",t.doEmitItemMouseEvents&&a("item-mouseleave",o,s)},Re=(o,s)=>{var h,k;if(!t.enableDateSelection)return!1;(h=s.dataTransfer)==null||h.setData("text",o.toString());let n=new Image;return n.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(k=s.dataTransfer)==null||k.setDragImage(n,10,10),i.dateSelectionOrigin=o,a("date-selection-start",le(o),s),!0},_e=(o,s)=>{var h;return t.enableDragDrop?((h=s.dataTransfer)==null||h.setData("text",o.id),i.currentDragItem=o,i.dateSelectionOrigin=void 0,a("drag-start",o,s),!0):!1},le=o=>o<=i.dateSelectionOrigin?[o,i.dateSelectionOrigin]:[i.dateSelectionOrigin,o],He=(o,s)=>{t.enableDragDrop&&a("drag-over-date",i.currentDragItem,o,s)},Ue=(o,s)=>{t.enableDateSelection&&i.dateSelectionOrigin&&a("date-selection",le(o),s),t.enableDragDrop&&(a("drag-enter-date",i.currentDragItem,o,s),s.target.classList.add("draghover"))},ze=(o,s)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(a("drag-leave-date",i.currentDragItem,o,s),s.target.classList.remove("draghover"))},Ve=(o,s)=>{if(t.enableDateSelection&&i.dateSelectionOrigin){a("date-selection-finish",le(o),s);return}t.enableDragDrop&&(a("drop-on-date",i.currentDragItem,o,s),s.target.classList.remove("draghover"))},qe=(o,s)=>o.startDate<s.startDate?-1:s.startDate<o.startDate?1:o.endDate>s.endDate?-1:s.endDate>o.endDate?1:o.id<s.id?-1:1,Ke=o=>ke(o,r.addDays(o,6)),ke=(o,s)=>_.value.filter(h=>h.endDate>=o&&r.dateOnly(h.startDate)<=s,this).sort(qe),Ze=o=>!!_.value.find(s=>s.endDate>=o&&r.dateOnly(s.startDate)<=o),we=o=>!(!t.selectionStart||!t.selectionEnd||o<r.dateOnly(t.selectionStart)||o>r.dateOnly(t.selectionEnd)),Ce=o=>{const s=Ke(o),h=[],k=[[],[],[],[],[],[],[]];if(!s)return h;for(let n=0;n<s.length;n++){const u=Object.assign({},s[n],{classes:[...s[n].classes],itemRow:0}),I=u.startDate<o,Z=I?0:r.dayDiff(o,u.startDate),Ie=Math.min(7-Z,r.dayDiff(r.addDays(o,Z),u.endDate)+1);I&&u.classes.push("continued"),r.dayDiff(o,u.endDate)>6&&u.classes.push("toBeContinued"),r.isInPast(u.endDate)&&u.classes.push("past"),u.originalItem.url&&u.classes.push("hasUrl");for(let E=0;E<7;E++)if(E===Z){let te=0;for(;k[E][te];)te++;u.itemRow=te,k[E][te]=!0}else E<Z+Ie&&(k[E][u.itemRow]=!0);u.classes.push(`offset${Z}`),u.classes.push(`span${Ie}`),h.push(u)}return h},je=o=>{const s='<span class="startTime">'+r.formattedTime(o.startDate,m.value,t.timeFormatOptions)+"</span>";let h="";return r.isSameDateTime(o.startDate,o.endDate)||(h='<span class="endTime">'+r.formattedTime(o.endDate,m.value,t.timeFormatOptions)+"</span>"),s+h},xe=o=>t.showTimes?je(o)+" "+o.title:o.title,ee=o=>{const s=o.itemRow,h=t.itemContentHeight,k=t.itemBorderHeight;return`calc(${t.itemTop} + ${s}*${h} + ${s}*${k})`};return(o,s)=>(f(),D("div",{"aria-label":"Calendar",class:Y(["cv-wrapper",`locale-${l(r).languageCode(l(m))}`,`locale-${l(m)}`,`y${l(v).getFullYear()}`,`m${l(r).paddedMonth(l(v))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:l(r).isPastMonth(l(v)),future:l(r).isFutureMonth(l(v)),noIntl:!l(r).supportsIntl}])},[W(o.$slots,"header",{headerProps:l(T)}),d("div",Jt,[e.displayWeekNumbers?(f(),D("div",Qt)):U("",!0),(f(!0),D(j,null,X(l($),(h,k)=>W(o.$slots,"dayHeader",{index:K(k),label:h},()=>[(f(),D("div",{key:K(k),class:Y([K(k),"cv-header-day"])},A(h),3))])),256))]),d("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(f(!0),D(j,null,X(l(C),(h,k)=>(f(),D("div",{key:`${k}-week`,class:Y(["cv-week",`week${k+1}`,`ws${l(r).isoYearMonthDay(h)}`])},[e.displayWeekNumbers?(f(),D("div",ta,[W(o.$slots,"weekNumber",{date:h,numberInYear:l(M)+k,numberInPeriod:k+1},()=>[d("span",null,A(l(M)+k),1)])])):U("",!0),d("div",aa,[(f(!0),D(j,null,X(l(r).daysOfWeek(h),(n,u)=>(f(),D("div",{key:K(u),draggable:e.enableDateSelection,class:Y(["cv-day",K(u),`d${l(r).isoYearMonthDay(n)}`,`d${l(r).isoMonthDay(n)}`,`d${l(r).paddedDay(n)}`,`instance${l(r).instanceOfMonth(n)}`,{today:l(r).isSameDate(n,l(r).today()),outsideOfMonth:!l(r).isSameMonth(n,l(y)),past:l(r).isInPast(n),future:l(r).isInFuture(n),last:l(r).isLastDayOfMonth(n),lastInstance:l(r).isLastInstanceOfMonth(n),hasItems:Ze(n),selectionStart:l(r).isSameDate(n,e.selectionStart),selectionEnd:l(r).isSameDate(n,e.selectionEnd)},...e.dateClasses&&e.dateClasses[l(r).isoYearMonthDay(n)]||[]]),"aria-grabbed":e.enableDateSelection?we(n):void 0,"aria-label":n.getDate().toString(),"aria-selected":we(n),"aria-dropeffect":e.enableDragDrop&&i.currentDragItem?"move":e.enableDateSelection&&i.dateSelectionOrigin?"execute":"none",onClick:I=>Ye(n,I),onDragstart:I=>Re(n,I),onDrop:R(I=>Ve(n,I),["prevent"]),onDragover:R(I=>He(n,I),["prevent"]),onDragenter:R(I=>Ue(n,I),["prevent"]),onDragleave:R(I=>ze(n,I),["prevent"])},[d("div",ra,A(n.getDate()),1),W(o.$slots,"dayContent",{day:n})],42,oa))),128)),t.enableHtmlTitles?(f(!0),D(j,{key:0},X(Ce(h),n=>W(o.$slots,"item",{value:n,weekStartDate:h,top:ee(n)},()=>[(f(),D("div",{key:n.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?n==i.currentDragItem:void 0,class:Y([n.classes,"cv-item"]),title:n.tooltip||n.title,style:Se(`top:${ee(n)};${n.originalItem.style}`),onDragstart:u=>_e(n,u),onMouseenter:u=>be(n,u),onMouseleave:u=>De(n,u),onClick:R(u=>ye(n,u),["stop"]),innerHTML:xe(n)},null,46,na))])),256)):(f(!0),D(j,{key:1},X(Ce(h),n=>W(o.$slots,"item",{value:n,weekStartDate:h,top:ee(n)},()=>[(f(),D("div",{key:n.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?n==i.currentDragItem:void 0,class:Y([n.classes,"cv-item"]),title:n.tooltip||n.title,style:Se(`top:${ee(n)};${n.originalItem.style}`),onDragstart:u=>_e(n,u),onMouseenter:u=>be(n,u),onMouseleave:u=>De(n,u),onClick:R(u=>ye(n,u),["stop"])},A(xe(n)),47,ia)),oe(" div> ")])),256))])],2))),128))],8,ea)],2))}}),la={class:"calendarHeader"},da=d("md-icon",null,"chevron_left",-1),ca=[da],ua=d("md-icon",null,"today",-1),ha=[ua],ma=d("md-icon",null,"chevron_right",-1),va=[ma],pa={class:"date"},ga=V({__name:"CalendarHeader",props:{headerProps:{type:Object,required:!0}},emits:["input"],setup(e,{emit:a}){const t=e;function i(){a("input",t.headerProps.nextPeriod)}function m(){a("input",t.headerProps.currentPeriod)}function y(){a("input",t.headerProps.previousPeriod)}return(v,c)=>(f(),D("div",la,[d("div",{class:"navButtons"},[d("md-icon-button",{onClick:y},ca),d("md-icon-button",{onClick:m},ha),d("md-icon-button",{onClick:i},va)]),d("div",pa,A(l(ve)[t.headerProps.periodStart.getMonth()]),1)]))}});const fa={class:"calendarContainer"},ya={id:"calendar-component"},ba=V({__name:"Calendar",emits:["onClickDay","onClickItem"],setup(e,{emit:a}){var C;let t=O(new Date);(C=Fe().value)==null||C.uid;function i(p){return p.map(_=>{const P=_.id.substring(0,8),b=_.id.charAt(_.id.length-1);let g;if(b==="M")g=8;else if(b==="P")g=15;else throw new Error("Formato ID non riconosciuto");const F=new Date(parseInt(P.substring(0,4),10),parseInt(P.substring(4,6),10)-1,parseInt(P.substring(6,8),10),g),T=new Date(F);T.setHours(F.getHours()+4);const B=_.players||_.users;return{id:_.id,startDate:F,endDate:T,title:B.length>=3?"Al completo":`${3-B.length} posti disponibili`,classes:B.length>=3?"red":"green",slotAvailables:3-B.length}})}const m=st(H,"availabilities"),y=lt(m,{wait:!0}),v=w(()=>i(y.value));function c(p,$){return $.filter(_=>_.slotAvailables===0&&_.startDate.getFullYear()===p.getFullYear()&&_.startDate.getMonth()===p.getMonth()&&_.startDate.getDate()===p.getDate())}function M(p){t.value=p}function x(p){c(p,v.value).length>=1||a("onClickDay",p)}function S(p){p.originalItem.slotAvailables<=0||p.startDate<new Date||a("onClickItem",p)}return(p,$)=>(f(),D("div",fa,[d("div",ya,[re(l(sa),{"show-date":l(t),class:"theme-default",onClickDate:x,onClickItem:S,items:v.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month",startingDayOfWeek:1},{header:Te(({headerProps:_})=>[re(ga,{headerProps:_,onInput:M},null,8,["headerProps"])]),_:1},8,["show-date","items"])])]))}});const Da={class:"availabilityView"},_a=d("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),ka=["open"],wa=d("div",{slot:"headline"},"Non puoi prenotare",-1),Ca=d("form",{id:"form",slot:"content",method:"dialog"}," Hai ricevuto due o più ammonizioni e non puoi più prenotare. Dai un'occhiata al regolamento se vuoi sapere come ridurre le tue ammonizioni. ",-1),xa={slot:"actions"},Ia=["open"],Sa=d("div",{slot:"headline"},"Prenota slot",-1),Ma={slot:"content",id:"form-id",method:"dialog"},$a={key:2,class:"clausola"},Pa={slot:"actions"},Aa={key:0},Oa=d("a",{target:"_blank",rel:"noopener noreferrer",href:"https://calendar.google.com/calendar/u/0?cid=cmhvNW45MW9jMzJ0N3BkaXBqZWNxdnBlOXNAZ3JvdXAuY2FsZW5kYXIuZ29vZ2xlLmNvbQ"},[d("md-filled-tonal-button",{id:"addToCalendar"},[oe(" Aggiungi calendario a Google Calendar "),d("md-icon",{slot:"icon"},"calendar_add_on")])],-1),Ea=V({__name:"AvailabilityView",setup(e){var P;const a=O(!1),t=O(!1),i=O(new Date),m=O("mattina"),y=O(!1),v=O(!1),c=O(!1),M=O(!1),x=(P=Fe().value)==null?void 0:P.uid,S=dt(G(H,`users/${x}`));function C(b,g){return`availabilities/${b.getFullYear()}${(b.getMonth()+1).toString().padStart(2,"0")}${b.getDate().toString().padStart(2,"0")}-${g==="mattina"?"M":"P"}`}async function p(){if(M.value=!1,i.value==null||m.value==null){console.error("Ma che cazz");return}y.value=!0;const b=G(H,C(i.value,m.value)),g=G(H,`users/${x}/${C(i.value,m.value)}`);(await ut(b)).exists()?ht(b,{players:mt(G(H,`users/${x}`))}):$e(b,{players:[G(H,`users/${x}`)]}),$e(g,{date:i.value,timeSlot:m.value}),y.value=!1,v.value=!0,t.value=!1,a.value=!1}function $(b){var g;if(((g=S.value)==null?void 0:g.admonitionCount)>=2){c.value=!0;return}M.value=!0,v.value=!1,i.value=b,t.value=!1,a.value=!0}function _(b){var g;if(((g=S.value)==null?void 0:g.admonitionCount)>=2){c.value=!0;return}v.value=!1,M.value=!0,b.originalItem.slotAvailables>0&&(m.value=b.id.charAt(b.id.length-1)==="M"?"mattina":"pomeriggio",i.value=b.startDate,t.value=!0,a.value=!1)}return(b,g)=>{const F=ct("RouterLink");return f(),D("div",Da,[_a,re(ba,{onOnClickDay:$,onOnClickItem:_}),d("md-dialog",{type:"alert",open:c.value},[wa,Ca,d("div",xa,[d("md-text-button",{form:"form",value:"ok",onClick:g[0]||(g[0]=T=>c.value=!1)},"OK")])],8,ka),d("md-dialog",{type:"alert",open:M.value},[Sa,d("form",Ma,[a.value&&!y.value?(f(),Me(_t,{key:0,date:i.value,onSelect:g[1]||(g[1]=T=>m.value=T.timeSlot)},null,8,["date"])):U("",!0),t.value&&!y.value?(f(),Me(wt,{key:1,date:i.value,time:m.value},null,8,["date","time"])):U("",!0),!y.value&&(a.value||t.value)?(f(),D("div",$a,[oe("Confermando accetti "),re(F,{class:"link",to:"/rules"},{default:Te(()=>[oe(" il regolamento")]),_:1})])):U("",!0)]),d("div",Pa,[d("md-text-button",{form:"form-id",value:"cancel",onClick:g[2]||(g[2]=T=>M.value=!1)},"Annulla"),d("md-text-button",{form:"form-id",value:"delete",onClick:p},"Conferma")])],8,Ia),v.value?(f(),D("div",Aa,"Prenotato")):U("",!0),Oa])}}});export{Ea as default};
