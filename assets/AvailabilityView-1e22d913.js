import{k as $e,l as Ke,m as Pe,n as X,q as ue,v as je,x as Ge,y as Qe,z as Je,A as Xe,B as Ze,C as et,D as tt,d as z,c as D,h as d,t as A,e as l,b as f,E as he,H as at,I as w,J as ot,K as H,f as W,F as j,L as G,M as Y,N as R,O as Se,P as ne,Q as O,a as xe,R as rt,S as U,T as it,i as oe,w as Ae,U as st,V as Q,r as nt,W as Ie,X as lt,Y as dt,Z as ct,$ as Me}from"./index-c2e3ebd5.js";/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const ut=$e`@media(forced-colors: active){:host{--md-radio-disabled-selected-icon-color: GrayText;--md-radio-disabled-selected-icon-opacity: 1;--md-radio-disabled-unselected-icon-color: GrayText;--md-radio-disabled-unselected-icon-opacity: 1;--md-radio-selected-icon-color: CanvasText;--md-radio-selected-hover-icon-color: CanvasText;--md-radio-selected-focus-icon-color: CanvasText;--md-radio-selected-pressed-icon-color: CanvasText;--md-radio-icon-color: CanvasText;--md-radio-hover-icon-color: CanvasText;--md-radio-focus-icon-color: CanvasText;--md-radio-pressed-icon-color: CanvasText}}/*# sourceMappingURL=forced-colors-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ht{constructor(a){this.host=a,this.focused=!1,this.root=null,this.handleFocusIn=()=>{this.focused=!0,this.updateTabIndices()},this.handleFocusOut=()=>{this.focused=!1,this.updateTabIndices()},this.handleKeyDown=t=>{const s=t.key==="ArrowDown",m=t.key==="ArrowUp",y=t.key==="ArrowLeft",p=t.key==="ArrowRight";if(!y&&!p&&!s&&!m)return;const c=this.getNamedSiblings();if(!c.length)return;t.preventDefault();const S=getComputedStyle(this.host).direction==="rtl"?y||s:p||s,M=c.indexOf(this.host);let C=S?M+1:M-1;for(;C!==M;){C>=c.length?C=0:C<0&&(C=c.length-1);const v=c[C];if(v.hasAttribute("disabled")){S?C++:C--;continue}for(const P of c)P!==v&&(P.checked=!1,P.tabIndex=-1);v.checked=!0,v.removeAttribute("tabindex"),v.focus(),v.dispatchEvent(new Event("change",{bubbles:!0}));break}}}hostConnected(){this.root=this.host.getRootNode(),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("focusin",this.handleFocusIn),this.host.addEventListener("focusout",this.handleFocusOut),this.host.checked&&this.uncheckSiblings(),this.updateTabIndices()}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("focusin",this.handleFocusIn),this.host.removeEventListener("focusout",this.handleFocusOut),this.updateTabIndices(),this.root=null}handleCheckedChange(){this.host.checked&&(this.uncheckSiblings(),this.updateTabIndices())}uncheckSiblings(){for(const a of this.getNamedSiblings())a!==this.host&&(a.checked=!1)}updateTabIndices(){const a=this.getNamedSiblings(),t=a.find(s=>s.checked);if(t||this.focused){const s=t||this.host;s.removeAttribute("tabindex");for(const m of a)m!==s&&(m.tabIndex=-1);return}for(const s of a)s.removeAttribute("tabindex")}getNamedSiblings(){const a=this.host.getAttribute("name");return!a||!this.root?[]:Array.from(this.root.querySelectorAll(`[name="${a}"]`))}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Oe;const le=Symbol("checked");let mt=0;class L extends Pe{get checked(){return this[le]}set checked(a){const t=this.checked;if(t===a)return;this[le]=a;const s=String(a);this.internals.setFormValue(this.checked?this.value:null,s),this.requestUpdate("checked",t),this.selectionController.handleCheckedChange()}get name(){return this.getAttribute("name")??""}set name(a){this.setAttribute("name",a)}get form(){return this.internals.form}get labels(){return this.internals.labels}constructor(){super(),this.maskId=`cutout${++mt}`,this[Oe]=!1,this.disabled=!1,this.value="on",this.selectionController=new ht(this),this.internals=this.attachInternals(),this.addController(this.selectionController),this.addEventListener("click",a=>{Ge(a)&&(this.focus(),Qe(this.input))})}focus(){var a;(a=this.input)==null||a.focus()}render(){const a={checked:this.checked},{ariaLabel:t}=this;return Je`
      <div class="container ${Xe(a)}">
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <svg class="icon" viewBox="0 0 20 20">
          <mask id="${this.maskId}">
            <rect width="100%" height="100%" fill="white" />
            <circle cx="10" cy="10" r="8" fill="black" />
          </mask>
          <circle class="outer circle" cx="10" cy="10" r="10"
              mask="url(#${this.maskId})" />
          <circle class="inner circle" cx="10" cy="10" r="5" />
        </svg>
        <input
          id="input"
          type="radio"
          name=${this.name}
          aria-label=${t||Ze}
          .checked=${this.checked}
          .value=${this.value}
          ?disabled=${this.disabled}
          @change=${this.handleChange}
        >
      </div>
    `}handleChange(a){this.disabled||(this.checked=!0,et(this,a))}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(a){this.checked=a==="true"}}Oe=le;Ke(L);L.shadowRootOptions={...Pe.shadowRootOptions,delegatesFocus:!0};L.formAssociated=!0;X([ue({type:Boolean})],L.prototype,"checked",null);X([ue({type:Boolean,reflect:!0})],L.prototype,"disabled",void 0);X([ue()],L.prototype,"value",void 0);X([je("input")],L.prototype,"input",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const pt=$e`:host{--_disabled-selected-icon-color: var(--md-radio-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-icon-opacity: var(--md-radio-disabled-selected-icon-opacity, 0.38);--_disabled-unselected-icon-color: var(--md-radio-disabled-unselected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-unselected-icon-opacity: var(--md-radio-disabled-unselected-icon-opacity, 0.38);--_icon-size: var(--md-radio-icon-size, 20px);--_selected-focus-icon-color: var(--md-radio-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-radio-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-radio-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-radio-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-radio-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-radio-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-radio-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_selected-pressed-state-layer-opacity: var(--md-radio-selected-pressed-state-layer-opacity, 0.12);--_state-layer-size: var(--md-radio-state-layer-size, 40px);--_focus-icon-color: var(--md-radio-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color: var(--md-radio-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-color: var(--md-radio-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-radio-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-radio-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-radio-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color: var(--md-radio-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-radio-pressed-state-layer-opacity, 0.12);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity);display:inline-flex;height:var(--_icon-size);position:relative;vertical-align:top;width:var(--_icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_icon-size))/2)}.container{display:grid;height:100%;place-content:center;place-items:center;width:100%}md-focus-ring{height:44px;inset:unset;width:44px}.checked{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}input{appearance:none;height:48px;outline:none;margin:0;position:absolute;width:48px}:host([touch-target=none]) input{width:100%;height:100%}md-ripple{border-radius:50%;height:var(--_state-layer-size);inset:unset;width:var(--_state-layer-size)}.icon{fill:var(--_icon-color);inset:0;position:absolute}.outer.circle{transition:fill 50ms linear}.inner.circle{opacity:0;transform-origin:center;transition:opacity 50ms linear}.checked .icon{fill:var(--_selected-icon-color)}.checked .inner.circle{animation:inner-circle-grow 300ms cubic-bezier(0.05, 0.7, 0.1, 1);opacity:1}@keyframes inner-circle-grow{from{transform:scale(0)}to{transform:scale(1)}}:host([disabled]) .circle{animation-duration:0s;transition-duration:0s}:host(:hover) .icon{fill:var(--_hover-icon-color)}:host(:focus-within) .icon{fill:var(--_focus-icon-color)}:host(:active) .icon{fill:var(--_pressed-icon-color)}:host([disabled]) .icon{fill:var(--_disabled-unselected-icon-color);opacity:var(--_disabled-unselected-icon-opacity)}:host(:hover) .checked .icon{fill:var(--_selected-hover-icon-color)}:host(:focus-within) .checked .icon{fill:var(--_selected-focus-icon-color)}:host(:active) .checked .icon{fill:var(--_selected-pressed-icon-color)}:host([disabled]) .checked .icon{fill:var(--_disabled-selected-icon-color);opacity:var(--_disabled-selected-icon-opacity)}/*# sourceMappingURL=radio-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let de=class extends L{};de.styles=[pt,ut];de=X([tt("md-radio")],de);const vt=d("span",{"aria-hidden":"true"},"Mattina",-1),gt=d("span",{"aria-hidden":"true"},"Pomeriggio",-1),ft={props:{date:{type:Date,required:!0}},methods:{onSelect(e){this.$emit("select",{timeSlot:e})}}},yt=z({...ft,__name:"BookSlot",setup(e){return(a,t)=>(f(),D("div",null,[d("h2",null,"Dai la disponibilità per il "+A(e.date.getDate())+" "+A(l(he)[e.date.getMonth()]),1),d("form",null,[d("label",null,[d("md-radio",{onChange:t[0]||(t[0]=s=>a.onSelect("mattina")),type:"radio",name:"time",value:"mattina","aria-label":"Mattina","touch-target":"wrapper",checked:""},null,32),vt]),d("label",null,[d("md-radio",{onChange:t[1]||(t[1]=s=>a.onSelect("pomeriggio")),type:"radio",name:"time",value:"pomeriggio","aria-label":"Pomeriggio","touch-target":"wrapper"},null,32),gt])])]))}});const bt={props:{date:{type:Date,required:!0},time:{type:String,required:!0}}},Dt=z({...bt,__name:"ExistingSlot",setup(e){return(a,t)=>(f(),D("div",null,[d("h2",null,"Dai la disponibilità per il "+A(e.date.getDate())+" "+A(l(he)[e.date.getMonth()])+" "+A(e.time),1)]))}});var _t=Object.defineProperty,kt=(e,a,t)=>a in e?_t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,ae=(e,a,t)=>(kt(e,typeof a!="symbol"?a+"":a,t),t);const Z=()=>re(new Date),wt=(e,a,t)=>{switch(a){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return me(e,t);default:return e}},Ct=e=>[...Array(7)].map((a,t)=>V(e,t)),V=(e,a)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+a,e.getHours(),e.getMinutes(),e.getSeconds()),me=(e,a)=>V(e,(a-e.getDay()-7)%-7),St=(e,a)=>V(me(e,a),7),J=e=>new Date(e.getFullYear(),e.getMonth()),It=e=>Math.ceil(e.getDate()/7),Mt=(e,a,t)=>new Date(e.getFullYear()+(a=="year"?t:0),e.getMonth()+(a=="month"?t:0),e.getDate()+(a=="week"?t*7:0)),pe=e=>("0"+String(e.getMonth()+1)).slice(-2),ve=e=>("0"+String(e.getDate())).slice(-2),Fe=e=>e.getFullYear()+"-"+pe(e),$t=e=>Fe(e)+"-"+ve(e),Pt=e=>pe(e)+"-"+ve(e),xt=(e,a,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!ie()){var s=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-s).toISOString().slice(11,16)}return e.toLocaleTimeString(a,t)},At=(e,a,t,s)=>{const m=e.getFullYear()===a.getFullYear(),y=Le(e,a),p=t!=="year"&&t!=="month";let c=[];return c.push(s[e.getMonth()]),p&&(c.push(" "),c.push(e.getDate())),m||(c.push(p?", ":" "),c.push(e.getFullYear())),!y||!m?(c.push(" – "),y||c.push(s[a.getMonth()]),p&&c.push(" ")):p&&c.push(" – "),p?(c.push(a.getDate()),c.push(", ")):c.push(" "),c.push(a.getFullYear()),c.join("")},Te=(e,a)=>{const t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),s=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-s)/864e5},Ot=(e,a)=>!!e&&!!a&&Te(e,a)===0,Ft=(e,a)=>!!e&&!!a&&e.getTime()===a.getTime(),Le=(e,a)=>!!e&&!!a&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth(),Tt=e=>J(e)<J(Z()),Lt=e=>J(e)>J(Z()),Et=e=>re(e)>Z(),Bt=e=>re(e)<Z(),Nt=e=>e.getMonth()!==V(e,7).getMonth(),Ht=e=>e.getMonth()!==V(e,1).getMonth(),Ee=e=>{let a=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,s)=>a[s]=Number(t)),a[1]--,new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])},ce=e=>typeof e=="string"?Ee(e):new Date(e),re=e=>{const a=new Date(e);return a.setHours(0,0,0,0),a},Yt=e=>e.substring(0,2),ie=()=>typeof Intl<"u",Rt=(e,a)=>{if(!ie())return[...Array(12)].map(s=>"");const t=new Intl.DateTimeFormat(e,{month:a});return[...Array(12)].map((s,m)=>t.format(new Date(2017,m,1)))},Ut=(e,a,t)=>{if(!ie())return[...Array(7)].map(m=>"");const s=new Intl.DateTimeFormat(e,{weekday:a});return[...Array(7)].map((m,y)=>s.format(new Date(2017,0,(y+1+t)%7)))},Wt=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),zt=(e,a)=>{const t=e.classes?[...e.classes]:[];return a&&t.push("isHovered"),{originalItem:e,startDate:ce(e.startDate),endDate:ce(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},r={addDays:V,beginningOfMonth:J,beginningOfPeriod:wt,beginningOfWeek:me,dateOnly:re,dayDiff:Te,daysOfWeek:Ct,endOfWeek:St,formattedPeriod:At,formattedTime:xt,fromIsoStringToLocalDate:Ee,getDefaultBrowserLocale:Wt,getFormattedMonthNames:Rt,getFormattedWeekdayNames:Ut,incrementPeriod:Mt,instanceOfMonth:It,isFutureMonth:Lt,isInFuture:Et,isInPast:Bt,isLastDayOfMonth:Ht,isLastInstanceOfMonth:Nt,isoMonthDay:Pt,isoYearMonth:Fe,isoYearMonthDay:$t,isPastMonth:Tt,isSameDate:Ot,isSameDateTime:Ft,isSameMonth:Le,languageCode:Yt,normalizeItem:zt,paddedDay:ve,paddedMonth:pe,supportsIntl:ie,today:Z,toLocalDate:ce};class Vt{constructor(){ae(this,"currentDragItem"),ae(this,"dateSelectionOrigin"),ae(this,"currentHoveredItemId",""),ae(this,"CalendarMath",r)}}const qt={class:"cv-header-days"},Kt={key:0,class:"cv-weeknumber"},jt=["aria-multiselectable"],Gt={key:0,class:"cv-weeknumber"},Qt={class:"cv-weekdays"},Jt=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],Xt={class:"cv-day-number"},Zt=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],ea=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],ta=z({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:a}){const t=e,s=at(new Vt),m=w(()=>t.locale||r.getDefaultBrowserLocale()),y=w(()=>t.showDate?r.dateOnly(t.showDate):r.today()),p=w(()=>r.beginningOfPeriod(y.value,t.displayPeriodUom,t.startingDayOfWeek)),c=w(()=>r.addDays(r.incrementPeriod(p.value,t.displayPeriodUom,t.displayPeriodCount),-1)),$=w(()=>{const o=r.beginningOfWeek(r.beginningOfPeriod(p.value,"year",0),t.startingDayOfWeek),n=r.beginningOfWeek(p.value,t.startingDayOfWeek);return 1+Math.floor(r.dayDiff(o,n)/7)}),S=w(()=>r.beginningOfWeek(p.value,t.startingDayOfWeek)),M=w(()=>r.endOfWeek(c.value,t.startingDayOfWeek)),C=w(()=>{const o=Math.floor((r.dayDiff(S.value,M.value)+1)/7);return[...Array(o)].map((n,h)=>r.addDays(S.value,h*7))}),v=w(()=>r.getFormattedMonthNames(m.value,t.monthNameFormat)),P=w(()=>r.getFormattedWeekdayNames(m.value,t.weekdayNameFormat,t.startingDayOfWeek)),_=w(()=>t.items?t.items.map(o=>r.normalizeItem(o,o.id===s.currentHoveredItemId)):[]),x=w(()=>r.beginningOfPeriod(r.today(),t.displayPeriodUom,t.startingDayOfWeek)),b=w(()=>r.addDays(r.incrementPeriod(x.value,t.displayPeriodUom,t.displayPeriodCount),-1)),g=w(()=>r.formattedPeriod(p.value,c.value,t.displayPeriodUom,v.value)),F=w(()=>{const o=x.value,n=p.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(o.getTime()-n.getTime())+1]:t.currentPeriodLabel:r.formattedPeriod(o,b.value,t.displayPeriodUom,v.value)}),T=w(()=>({previousYear:N(-12),previousPeriod:N(-1),nextPeriod:N(1),previousFullPeriod:N(-t.displayPeriodCount),nextFullPeriod:N(t.displayPeriodCount),nextYear:N(12),currentPeriod:x.value,currentPeriodLabel:F.value,periodStart:p.value,periodEnd:c.value,displayLocale:m.value,displayFirstDate:S.value,displayLastDate:M.value,monthNames:v.value,fixedItems:_.value,periodLabel:g.value})),B=w(()=>({periodStart:p,periodEnd:c,displayFirstDate:S,displayLastDate:M}));ot(()=>B,o=>{t.periodChangedCallback&&(a("period-changed"),t.periodChangedCallback(o,"watch"))},{immediate:!0,deep:!0});const Be=(o,n)=>{t.disablePast&&r.isInPast(o)||t.disableFuture&&r.isInFuture(o)||a("click-date",o,De(o,o),n)},ge=(o,n)=>a("click-item",o,n),q=o=>"dow"+(o+t.startingDayOfWeek)%7,N=o=>{const n=r.incrementPeriod(p.value,t.displayPeriodUom,o),h=r.incrementPeriod(n,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&h<=r.today()||t.disableFuture&&n>r.today()?null:n},fe=(o,n)=>{s.currentHoveredItemId=o.id,t.doEmitItemMouseEvents&&a("item-mouseenter",o,n)},ye=(o,n)=>{s.currentHoveredItemId="",t.doEmitItemMouseEvents&&a("item-mouseleave",o,n)},Ne=(o,n)=>{var h,k;if(!t.enableDateSelection)return!1;(h=n.dataTransfer)==null||h.setData("text",o.toString());let i=new Image;return i.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(k=n.dataTransfer)==null||k.setDragImage(i,10,10),s.dateSelectionOrigin=o,a("date-selection-start",se(o),n),!0},be=(o,n)=>{var h;return t.enableDragDrop?((h=n.dataTransfer)==null||h.setData("text",o.id),s.currentDragItem=o,s.dateSelectionOrigin=void 0,a("drag-start",o,n),!0):!1},se=o=>o<=s.dateSelectionOrigin?[o,s.dateSelectionOrigin]:[s.dateSelectionOrigin,o],He=(o,n)=>{t.enableDragDrop&&a("drag-over-date",s.currentDragItem,o,n)},Ye=(o,n)=>{t.enableDateSelection&&s.dateSelectionOrigin&&a("date-selection",se(o),n),t.enableDragDrop&&(a("drag-enter-date",s.currentDragItem,o,n),n.target.classList.add("draghover"))},Re=(o,n)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(a("drag-leave-date",s.currentDragItem,o,n),n.target.classList.remove("draghover"))},Ue=(o,n)=>{if(t.enableDateSelection&&s.dateSelectionOrigin){a("date-selection-finish",se(o),n);return}t.enableDragDrop&&(a("drop-on-date",s.currentDragItem,o,n),n.target.classList.remove("draghover"))},We=(o,n)=>o.startDate<n.startDate?-1:n.startDate<o.startDate?1:o.endDate>n.endDate?-1:n.endDate>o.endDate?1:o.id<n.id?-1:1,ze=o=>De(o,r.addDays(o,6)),De=(o,n)=>_.value.filter(h=>h.endDate>=o&&r.dateOnly(h.startDate)<=n,this).sort(We),Ve=o=>!!_.value.find(n=>n.endDate>=o&&r.dateOnly(n.startDate)<=o),_e=o=>!(!t.selectionStart||!t.selectionEnd||o<r.dateOnly(t.selectionStart)||o>r.dateOnly(t.selectionEnd)),ke=o=>{const n=ze(o),h=[],k=[[],[],[],[],[],[],[]];if(!n)return h;for(let i=0;i<n.length;i++){const u=Object.assign({},n[i],{classes:[...n[i].classes],itemRow:0}),I=u.startDate<o,K=I?0:r.dayDiff(o,u.startDate),Ce=Math.min(7-K,r.dayDiff(r.addDays(o,K),u.endDate)+1);I&&u.classes.push("continued"),r.dayDiff(o,u.endDate)>6&&u.classes.push("toBeContinued"),r.isInPast(u.endDate)&&u.classes.push("past"),u.originalItem.url&&u.classes.push("hasUrl");for(let E=0;E<7;E++)if(E===K){let te=0;for(;k[E][te];)te++;u.itemRow=te,k[E][te]=!0}else E<K+Ce&&(k[E][u.itemRow]=!0);u.classes.push(`offset${K}`),u.classes.push(`span${Ce}`),h.push(u)}return h},qe=o=>{const n='<span class="startTime">'+r.formattedTime(o.startDate,m.value,t.timeFormatOptions)+"</span>";let h="";return r.isSameDateTime(o.startDate,o.endDate)||(h='<span class="endTime">'+r.formattedTime(o.endDate,m.value,t.timeFormatOptions)+"</span>"),n+h},we=o=>t.showTimes?qe(o)+" "+o.title:o.title,ee=o=>{const n=o.itemRow,h=t.itemContentHeight,k=t.itemBorderHeight;return`calc(${t.itemTop} + ${n}*${h} + ${n}*${k})`};return(o,n)=>(f(),D("div",{"aria-label":"Calendar",class:Y(["cv-wrapper",`locale-${l(r).languageCode(l(m))}`,`locale-${l(m)}`,`y${l(p).getFullYear()}`,`m${l(r).paddedMonth(l(p))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:l(r).isPastMonth(l(p)),future:l(r).isFutureMonth(l(p)),noIntl:!l(r).supportsIntl}])},[H(o.$slots,"header",{headerProps:l(T)}),d("div",qt,[e.displayWeekNumbers?(f(),D("div",Kt)):W("",!0),(f(!0),D(j,null,G(l(P),(h,k)=>H(o.$slots,"dayHeader",{index:q(k),label:h},()=>[(f(),D("div",{key:q(k),class:Y([q(k),"cv-header-day"])},A(h),3))])),256))]),d("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(f(!0),D(j,null,G(l(C),(h,k)=>(f(),D("div",{key:`${k}-week`,class:Y(["cv-week",`week${k+1}`,`ws${l(r).isoYearMonthDay(h)}`])},[e.displayWeekNumbers?(f(),D("div",Gt,[H(o.$slots,"weekNumber",{date:h,numberInYear:l($)+k,numberInPeriod:k+1},()=>[d("span",null,A(l($)+k),1)])])):W("",!0),d("div",Qt,[(f(!0),D(j,null,G(l(r).daysOfWeek(h),(i,u)=>(f(),D("div",{key:q(u),draggable:e.enableDateSelection,class:Y(["cv-day",q(u),`d${l(r).isoYearMonthDay(i)}`,`d${l(r).isoMonthDay(i)}`,`d${l(r).paddedDay(i)}`,`instance${l(r).instanceOfMonth(i)}`,{today:l(r).isSameDate(i,l(r).today()),outsideOfMonth:!l(r).isSameMonth(i,l(y)),past:l(r).isInPast(i),future:l(r).isInFuture(i),last:l(r).isLastDayOfMonth(i),lastInstance:l(r).isLastInstanceOfMonth(i),hasItems:Ve(i),selectionStart:l(r).isSameDate(i,e.selectionStart),selectionEnd:l(r).isSameDate(i,e.selectionEnd)},...e.dateClasses&&e.dateClasses[l(r).isoYearMonthDay(i)]||[]]),"aria-grabbed":e.enableDateSelection?_e(i):void 0,"aria-label":i.getDate().toString(),"aria-selected":_e(i),"aria-dropeffect":e.enableDragDrop&&s.currentDragItem?"move":e.enableDateSelection&&s.dateSelectionOrigin?"execute":"none",onClick:I=>Be(i,I),onDragstart:I=>Ne(i,I),onDrop:R(I=>Ue(i,I),["prevent"]),onDragover:R(I=>He(i,I),["prevent"]),onDragenter:R(I=>Ye(i,I),["prevent"]),onDragleave:R(I=>Re(i,I),["prevent"])},[d("div",Xt,A(i.getDate()),1),H(o.$slots,"dayContent",{day:i})],42,Jt))),128)),t.enableHtmlTitles?(f(!0),D(j,{key:0},G(ke(h),i=>H(o.$slots,"item",{value:i,weekStartDate:h,top:ee(i)},()=>[(f(),D("div",{key:i.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?i==s.currentDragItem:void 0,class:Y([i.classes,"cv-item"]),title:i.tooltip||i.title,style:Se(`top:${ee(i)};${i.originalItem.style}`),onDragstart:u=>be(i,u),onMouseenter:u=>fe(i,u),onMouseleave:u=>ye(i,u),onClick:R(u=>ge(i,u),["stop"]),innerHTML:we(i)},null,46,Zt))])),256)):(f(!0),D(j,{key:1},G(ke(h),i=>H(o.$slots,"item",{value:i,weekStartDate:h,top:ee(i)},()=>[(f(),D("div",{key:i.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?i==s.currentDragItem:void 0,class:Y([i.classes,"cv-item"]),title:i.tooltip||i.title,style:Se(`top:${ee(i)};${i.originalItem.style}`),onDragstart:u=>be(i,u),onMouseenter:u=>fe(i,u),onMouseleave:u=>ye(i,u),onClick:R(u=>ge(i,u),["stop"])},A(we(i)),47,ea)),ne(" div> ")])),256))])],2))),128))],8,jt)],2))}}),aa={class:"calendarHeader"},oa=d("md-icon",null,"chevron_left",-1),ra=[oa],ia=d("md-icon",null,"today",-1),sa=[ia],na=d("md-icon",null,"chevron_right",-1),la=[na],da={class:"date"},ca=z({__name:"CalendarHeader",props:{headerProps:{type:Object,required:!0}},emits:["input"],setup(e,{emit:a}){const t=e;function s(){a("input",t.headerProps.nextPeriod)}function m(){a("input",t.headerProps.currentPeriod)}function y(){a("input",t.headerProps.previousPeriod)}return(p,c)=>(f(),D("div",aa,[d("div",{class:"navButtons"},[d("md-icon-button",{onClick:y},ra),d("md-icon-button",{onClick:m},sa),d("md-icon-button",{onClick:s},la)]),d("div",da,A(l(he)[t.headerProps.periodStart.getMonth()]),1)]))}});const ua={class:"calendarContainer"},ha={id:"calendar-component"},ma=z({__name:"Calendar",emits:["onClickDay","onClickItem"],setup(e,{emit:a}){var C;let t=O(new Date);(C=xe().value)==null||C.uid;function s(v){return v.map(_=>{const x=_.id.substring(0,8),b=_.id.charAt(_.id.length-1);let g;if(b==="M")g=8;else if(b==="P")g=15;else throw new Error("Formato ID non riconosciuto");const F=new Date(parseInt(x.substring(0,4),10),parseInt(x.substring(4,6),10)-1,parseInt(x.substring(6,8),10),g),T=new Date(F);T.setHours(F.getHours()+4);const B=_.players||_.users;return{id:_.id,startDate:F,endDate:T,title:B.length>=3?"Al completo":`${3-B.length} posti disponibili`,classes:B.length>=3?"red":"green",slotAvailables:3-B.length}})}const m=rt(U,"availabilities"),y=it(m,{wait:!0}),p=w(()=>s(y.value));function c(v,P){return P.filter(_=>_.slotAvailables===0&&_.startDate.getFullYear()===v.getFullYear()&&_.startDate.getMonth()===v.getMonth()&&_.startDate.getDate()===v.getDate())}function $(v){t.value=v}function S(v){c(v,p.value).length>=1||a("onClickDay",v)}function M(v){v.originalItem.slotAvailables<=0||v.startDate<new Date||a("onClickItem",v)}return(v,P)=>(f(),D("div",ua,[d("div",ha,[oe(l(ta),{"show-date":l(t),class:"theme-default",onClickDate:S,onClickItem:M,items:p.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month"},{header:Ae(({headerProps:_})=>[oe(ca,{headerProps:_,onInput:$},null,8,["headerProps"])]),_:1},8,["show-date","items"])])]))}});const pa={class:"availabilityView"},va=d("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),ga=["open"],fa=d("div",{slot:"headline"},"Non puoi prenotare",-1),ya=d("form",{id:"form",slot:"content",method:"dialog"}," Hai ricevuto due o più ammonizioni e non puoi più prenotare. Dai un'occhiata al regolamento se vuoi sapere come ridurre le tue ammonizioni. ",-1),ba={slot:"actions"},Da=["open"],_a=d("div",{slot:"headline"},"Prenota slot",-1),ka={slot:"content",id:"form-id",method:"dialog"},wa={key:2,class:"clausola"},Ca={slot:"actions"},Sa={key:0},$a=z({__name:"AvailabilityView",setup(e){var x;const a=O(!1),t=O(!1),s=O(new Date),m=O("mattina"),y=O(!1),p=O(!1),c=O(!1),$=O(!1),S=(x=xe().value)==null?void 0:x.uid,M=st(Q(U,`users/${S}`));function C(b,g){return`availabilities/${b.getFullYear()}${(b.getMonth()+1).toString().padStart(2,"0")}${b.getDate().toString().padStart(2,"0")}-${g==="mattina"?"M":"P"}`}async function v(){if($.value=!1,s.value==null||m.value==null){console.error("Ma che cazz");return}y.value=!0;const b=Q(U,C(s.value,m.value)),g=Q(U,`users/${S}/${C(s.value,m.value)}`);(await lt(b)).exists()?dt(b,{players:ct(Q(U,`users/${S}`))}):Me(b,{players:[Q(U,`users/${S}`)]}),Me(g,{date:s.value,timeSlot:m.value}),y.value=!1,p.value=!0,t.value=!1,a.value=!1}function P(b){var g;if(((g=M.value)==null?void 0:g.admonitionCount)>=2){c.value=!0;return}$.value=!0,p.value=!1,s.value=b,t.value=!1,a.value=!0}function _(b){var g;if(((g=M.value)==null?void 0:g.admonitionCount)>=2){c.value=!0;return}p.value=!1,$.value=!0,b.originalItem.slotAvailables>0&&(m.value=b.id.charAt(b.id.length-1)==="M"?"mattina":"pomeriggio",s.value=b.startDate,t.value=!0,a.value=!1)}return(b,g)=>{const F=nt("RouterLink");return f(),D("div",pa,[va,oe(ma,{onOnClickDay:P,onOnClickItem:_}),d("md-dialog",{type:"alert",open:c.value},[fa,ya,d("div",ba,[d("md-text-button",{form:"form",value:"ok",onClick:g[0]||(g[0]=T=>c.value=!1)},"OK")])],8,ga),d("md-dialog",{type:"alert",open:$.value},[_a,d("form",ka,[a.value&&!y.value?(f(),Ie(yt,{key:0,date:s.value,onSelect:g[1]||(g[1]=T=>m.value=T.timeSlot)},null,8,["date"])):W("",!0),t.value&&!y.value?(f(),Ie(Dt,{key:1,date:s.value,time:m.value},null,8,["date","time"])):W("",!0),!y.value&&(a.value||t.value)?(f(),D("div",wa,[ne("Confermando accetti "),oe(F,{class:"link",to:"/rules"},{default:Ae(()=>[ne(" il regolamento")]),_:1})])):W("",!0)]),d("div",Ca,[d("md-text-button",{form:"form-id",value:"cancel",onClick:g[2]||(g[2]=T=>$.value=!1)},"Annulla"),d("md-text-button",{form:"form-id",value:"delete",onClick:v},"Conferma")])],8,Da),p.value?(f(),D("div",Sa,"Prenotato")):W("",!0)])}}});export{$a as default};
