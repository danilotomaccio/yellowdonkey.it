import{d as H,c as f,h as D,t as P,e as s,k as He,v as Ee,l as M,b as v,m as Ne,n as b,q as We,x as L,f as x,F as R,y as z,z as B,A as Z,B as fe,C as A,a as be,D as Ue,E as Ve,i as ee,w as ke,H as q,r as Re,I as ye,J as ze,K as ie,L as qe}from"./index-9cd3a124.js";const Pe=["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],je=D("option",{value:"mattina"},"Mattina",-1),Ge=D("option",{value:"pomeriggio"},"Pomeriggio",-1),Je=[je,Ge],Ke=D("button",{type:"submit"},"Conferma",-1),Qe={props:{date:{type:Date,required:!0}},data(){return{timeSlot:"mattina"}},methods:{saveBooking(){this.$emit("save",{date:this.date,timeSlot:this.timeSlot})}}},Xe=H({...Qe,__name:"BookSlot",setup(e){return(a,t)=>(v(),f("div",null,[D("h2",null,"Dai la disponibilità per il "+P(e.date.getDate())+" "+P(s(Pe)[e.date.getMonth()]),1),D("form",{onSubmit:t[1]||(t[1]=M((...l)=>a.saveBooking&&a.saveBooking(...l),["prevent"]))},[He(D("select",{id:"time-slot","onUpdate:modelValue":t[0]||(t[0]=l=>a.timeSlot=l)},Je,512),[[Ee,a.timeSlot]]),Ke],32)]))}});const Ze={props:{date:{type:Date,required:!0},time:{type:String,required:!0}},data(){return{timeSlot:"mattina"}},methods:{saveBooking(){this.$emit("save",{date:this.date,timeSlot:this.time})}}},et=H({...Ze,__name:"ExistingSlot",setup(e){return(a,t)=>(v(),f("div",null,[D("h2",null,"Dai la disponibilità per il "+P(e.date.getDate())+" "+P(s(Pe)[e.date.getMonth()])+" "+P(e.time),1),D("button",{onClick:t[0]||(t[0]=(...l)=>a.saveBooking&&a.saveBooking(...l))},"Conferma")]))}});var tt=Object.defineProperty,at=(e,a,t)=>a in e?tt(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,X=(e,a,t)=>(at(e,typeof a!="symbol"?a+"":a,t),t);const G=()=>te(new Date),rt=(e,a,t)=>{switch(a){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return ne(e,t);default:return e}},it=e=>[...Array(7)].map((a,t)=>E(e,t)),E=(e,a)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+a,e.getHours(),e.getMinutes(),e.getSeconds()),ne=(e,a)=>E(e,(a-e.getDay()-7)%-7),ot=(e,a)=>E(ne(e,a),7),j=e=>new Date(e.getFullYear(),e.getMonth()),nt=e=>Math.ceil(e.getDate()/7),lt=(e,a,t)=>new Date(e.getFullYear()+(a=="year"?t:0),e.getMonth()+(a=="month"?t:0),e.getDate()+(a=="week"?t*7:0)),le=e=>("0"+String(e.getMonth()+1)).slice(-2),se=e=>("0"+String(e.getDate())).slice(-2),Se=e=>e.getFullYear()+"-"+le(e),st=e=>Se(e)+"-"+se(e),dt=e=>le(e)+"-"+se(e),ut=(e,a,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!ae()){var l=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-l).toISOString().slice(11,16)}return e.toLocaleTimeString(a,t)},ct=(e,a,t,l)=>{const c=e.getFullYear()===a.getFullYear(),h=Me(e,a),m=t!=="year"&&t!=="month";let p=[];return p.push(l[e.getMonth()]),m&&(p.push(" "),p.push(e.getDate())),c||(p.push(m?", ":" "),p.push(e.getFullYear())),!h||!c?(p.push(" – "),h||p.push(l[a.getMonth()]),m&&p.push(" ")):m&&p.push(" – "),m?(p.push(a.getDate()),p.push(", ")):p.push(" "),p.push(a.getFullYear()),p.join("")},we=(e,a)=>{const t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),l=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-l)/864e5},gt=(e,a)=>!!e&&!!a&&we(e,a)===0,mt=(e,a)=>!!e&&!!a&&e.getTime()===a.getTime(),Me=(e,a)=>!!e&&!!a&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth(),pt=e=>j(e)<j(G()),vt=e=>j(e)>j(G()),Dt=e=>te(e)>G(),ht=e=>te(e)<G(),ft=e=>e.getMonth()!==E(e,7).getMonth(),yt=e=>e.getMonth()!==E(e,1).getMonth(),Ce=e=>{let a=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,l)=>a[l]=Number(t)),a[1]--,new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])},oe=e=>typeof e=="string"?Ce(e):new Date(e),te=e=>{const a=new Date(e);return a.setHours(0,0,0,0),a},bt=e=>e.substring(0,2),ae=()=>typeof Intl<"u",kt=(e,a)=>{if(!ae())return[...Array(12)].map(l=>"");const t=new Intl.DateTimeFormat(e,{month:a});return[...Array(12)].map((l,c)=>t.format(new Date(2017,c,1)))},Pt=(e,a,t)=>{if(!ae())return[...Array(7)].map(c=>"");const l=new Intl.DateTimeFormat(e,{weekday:a});return[...Array(7)].map((c,h)=>l.format(new Date(2017,0,(h+1+t)%7)))},St=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),wt=(e,a)=>{const t=e.classes?[...e.classes]:[];return a&&t.push("isHovered"),{originalItem:e,startDate:oe(e.startDate),endDate:oe(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},i={addDays:E,beginningOfMonth:j,beginningOfPeriod:rt,beginningOfWeek:ne,dateOnly:te,dayDiff:we,daysOfWeek:it,endOfWeek:ot,formattedPeriod:ct,formattedTime:ut,fromIsoStringToLocalDate:Ce,getDefaultBrowserLocale:St,getFormattedMonthNames:kt,getFormattedWeekdayNames:Pt,incrementPeriod:lt,instanceOfMonth:nt,isFutureMonth:vt,isInFuture:Dt,isInPast:ht,isLastDayOfMonth:yt,isLastInstanceOfMonth:ft,isoMonthDay:dt,isoYearMonth:Se,isoYearMonthDay:st,isPastMonth:pt,isSameDate:gt,isSameDateTime:mt,isSameMonth:Me,languageCode:bt,normalizeItem:wt,paddedDay:se,paddedMonth:le,supportsIntl:ae,today:G,toLocalDate:oe};class Mt{constructor(){X(this,"currentDragItem"),X(this,"dateSelectionOrigin"),X(this,"currentHoveredItemId",""),X(this,"CalendarMath",i)}}const Ct={class:"cv-header-days"},_t={key:0,class:"cv-weeknumber"},It=["aria-multiselectable"],Ot={key:0,class:"cv-weeknumber"},$t={class:"cv-weekdays"},Ft=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],Lt={class:"cv-day-number"},At=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],Tt=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],Yt=H({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:a}){const t=e,l=Ne(new Mt),c=b(()=>t.locale||i.getDefaultBrowserLocale()),h=b(()=>t.showDate?i.dateOnly(t.showDate):i.today()),m=b(()=>i.beginningOfPeriod(h.value,t.displayPeriodUom,t.startingDayOfWeek)),p=b(()=>i.addDays(i.incrementPeriod(m.value,t.displayPeriodUom,t.displayPeriodCount),-1)),$=b(()=>{const r=i.beginningOfWeek(i.beginningOfPeriod(m.value,"year",0),t.startingDayOfWeek),n=i.beginningOfWeek(m.value,t.startingDayOfWeek);return 1+Math.floor(i.dayDiff(r,n)/7)}),C=b(()=>i.beginningOfWeek(m.value,t.startingDayOfWeek)),_=b(()=>i.endOfWeek(p.value,t.startingDayOfWeek)),w=b(()=>{const r=Math.floor((i.dayDiff(C.value,_.value)+1)/7);return[...Array(r)].map((n,u)=>i.addDays(C.value,u*7))}),I=b(()=>i.getFormattedMonthNames(c.value,t.monthNameFormat)),g=b(()=>i.getFormattedWeekdayNames(c.value,t.weekdayNameFormat,t.startingDayOfWeek)),S=b(()=>t.items?t.items.map(r=>i.normalizeItem(r,r.id===l.currentHoveredItemId)):[]),O=b(()=>i.beginningOfPeriod(i.today(),t.displayPeriodUom,t.startingDayOfWeek)),N=b(()=>i.addDays(i.incrementPeriod(O.value,t.displayPeriodUom,t.displayPeriodCount),-1)),W=b(()=>i.formattedPeriod(m.value,p.value,t.displayPeriodUom,I.value)),J=b(()=>{const r=O.value,n=m.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(r.getTime()-n.getTime())+1]:t.currentPeriodLabel:i.formattedPeriod(r,N.value,t.displayPeriodUom,I.value)}),T=b(()=>({previousYear:Y(-12),previousPeriod:Y(-1),nextPeriod:Y(1),previousFullPeriod:Y(-t.displayPeriodCount),nextFullPeriod:Y(t.displayPeriodCount),nextYear:Y(12),currentPeriod:O.value,currentPeriodLabel:J.value,periodStart:m.value,periodEnd:p.value,displayLocale:c.value,displayFirstDate:C.value,displayLastDate:_.value,monthNames:I.value,fixedItems:S.value,periodLabel:W.value})),_e=b(()=>({periodStart:m,periodEnd:p,displayFirstDate:C,displayLastDate:_}));We(()=>_e,r=>{t.periodChangedCallback&&(a("period-changed"),t.periodChangedCallback(r,"watch"))},{immediate:!0,deep:!0});const Ie=(r,n)=>{t.disablePast&&i.isInPast(r)||t.disableFuture&&i.isInFuture(r)||a("click-date",r,me(r,r),n)},de=(r,n)=>a("click-item",r,n),U=r=>"dow"+(r+t.startingDayOfWeek)%7,Y=r=>{const n=i.incrementPeriod(m.value,t.displayPeriodUom,r),u=i.incrementPeriod(n,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&u<=i.today()||t.disableFuture&&n>i.today()?null:n},ue=(r,n)=>{l.currentHoveredItemId=r.id,t.doEmitItemMouseEvents&&a("item-mouseenter",r,n)},ce=(r,n)=>{l.currentHoveredItemId="",t.doEmitItemMouseEvents&&a("item-mouseleave",r,n)},Oe=(r,n)=>{var u,y;if(!t.enableDateSelection)return!1;(u=n.dataTransfer)==null||u.setData("text",r.toString());let o=new Image;return o.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(y=n.dataTransfer)==null||y.setDragImage(o,10,10),l.dateSelectionOrigin=r,a("date-selection-start",re(r),n),!0},ge=(r,n)=>{var u;return t.enableDragDrop?((u=n.dataTransfer)==null||u.setData("text",r.id),l.currentDragItem=r,l.dateSelectionOrigin=void 0,a("drag-start",r,n),!0):!1},re=r=>r<=l.dateSelectionOrigin?[r,l.dateSelectionOrigin]:[l.dateSelectionOrigin,r],$e=(r,n)=>{t.enableDragDrop&&a("drag-over-date",l.currentDragItem,r,n)},Fe=(r,n)=>{t.enableDateSelection&&l.dateSelectionOrigin&&a("date-selection",re(r),n),t.enableDragDrop&&(a("drag-enter-date",l.currentDragItem,r,n),n.target.classList.add("draghover"))},Le=(r,n)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(a("drag-leave-date",l.currentDragItem,r,n),n.target.classList.remove("draghover"))},Ae=(r,n)=>{if(t.enableDateSelection&&l.dateSelectionOrigin){a("date-selection-finish",re(r),n);return}t.enableDragDrop&&(a("drop-on-date",l.currentDragItem,r,n),n.target.classList.remove("draghover"))},Te=(r,n)=>r.startDate<n.startDate?-1:n.startDate<r.startDate?1:r.endDate>n.endDate?-1:n.endDate>r.endDate?1:r.id<n.id?-1:1,Ye=r=>me(r,i.addDays(r,6)),me=(r,n)=>S.value.filter(u=>u.endDate>=r&&i.dateOnly(u.startDate)<=n,this).sort(Te),Be=r=>!!S.value.find(n=>n.endDate>=r&&i.dateOnly(n.startDate)<=r),pe=r=>!(!t.selectionStart||!t.selectionEnd||r<i.dateOnly(t.selectionStart)||r>i.dateOnly(t.selectionEnd)),ve=r=>{const n=Ye(r),u=[],y=[[],[],[],[],[],[],[]];if(!n)return u;for(let o=0;o<n.length;o++){const d=Object.assign({},n[o],{classes:[...n[o].classes],itemRow:0}),k=d.startDate<r,V=k?0:i.dayDiff(r,d.startDate),he=Math.min(7-V,i.dayDiff(i.addDays(r,V),d.endDate)+1);k&&d.classes.push("continued"),i.dayDiff(r,d.endDate)>6&&d.classes.push("toBeContinued"),i.isInPast(d.endDate)&&d.classes.push("past"),d.originalItem.url&&d.classes.push("hasUrl");for(let F=0;F<7;F++)if(F===V){let Q=0;for(;y[F][Q];)Q++;d.itemRow=Q,y[F][Q]=!0}else F<V+he&&(y[F][d.itemRow]=!0);d.classes.push(`offset${V}`),d.classes.push(`span${he}`),u.push(d)}return u},xe=r=>{const n='<span class="startTime">'+i.formattedTime(r.startDate,c.value,t.timeFormatOptions)+"</span>";let u="";return i.isSameDateTime(r.startDate,r.endDate)||(u='<span class="endTime">'+i.formattedTime(r.endDate,c.value,t.timeFormatOptions)+"</span>"),n+u},De=r=>t.showTimes?xe(r)+" "+r.title:r.title,K=r=>{const n=r.itemRow,u=t.itemContentHeight,y=t.itemBorderHeight;return`calc(${t.itemTop} + ${n}*${u} + ${n}*${y})`};return(r,n)=>(v(),f("div",{"aria-label":"Calendar",class:B(["cv-wrapper",`locale-${s(i).languageCode(s(c))}`,`locale-${s(c)}`,`y${s(m).getFullYear()}`,`m${s(i).paddedMonth(s(m))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:s(i).isPastMonth(s(m)),future:s(i).isFutureMonth(s(m)),noIntl:!s(i).supportsIntl}])},[L(r.$slots,"header",{headerProps:s(T)}),D("div",Ct,[e.displayWeekNumbers?(v(),f("div",_t)):x("",!0),(v(!0),f(R,null,z(s(g),(u,y)=>L(r.$slots,"dayHeader",{index:U(y),label:u},()=>[(v(),f("div",{key:U(y),class:B([U(y),"cv-header-day"])},P(u),3))])),256))]),D("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(v(!0),f(R,null,z(s(w),(u,y)=>(v(),f("div",{key:`${y}-week`,class:B(["cv-week",`week${y+1}`,`ws${s(i).isoYearMonthDay(u)}`])},[e.displayWeekNumbers?(v(),f("div",Ot,[L(r.$slots,"weekNumber",{date:u,numberInYear:s($)+y,numberInPeriod:y+1},()=>[D("span",null,P(s($)+y),1)])])):x("",!0),D("div",$t,[(v(!0),f(R,null,z(s(i).daysOfWeek(u),(o,d)=>(v(),f("div",{key:U(d),draggable:e.enableDateSelection,class:B(["cv-day",U(d),`d${s(i).isoYearMonthDay(o)}`,`d${s(i).isoMonthDay(o)}`,`d${s(i).paddedDay(o)}`,`instance${s(i).instanceOfMonth(o)}`,{today:s(i).isSameDate(o,s(i).today()),outsideOfMonth:!s(i).isSameMonth(o,s(h)),past:s(i).isInPast(o),future:s(i).isInFuture(o),last:s(i).isLastDayOfMonth(o),lastInstance:s(i).isLastInstanceOfMonth(o),hasItems:Be(o),selectionStart:s(i).isSameDate(o,e.selectionStart),selectionEnd:s(i).isSameDate(o,e.selectionEnd)},...e.dateClasses&&e.dateClasses[s(i).isoYearMonthDay(o)]||[]]),"aria-grabbed":e.enableDateSelection?pe(o):void 0,"aria-label":o.getDate().toString(),"aria-selected":pe(o),"aria-dropeffect":e.enableDragDrop&&l.currentDragItem?"move":e.enableDateSelection&&l.dateSelectionOrigin?"execute":"none",onClick:k=>Ie(o,k),onDragstart:k=>Oe(o,k),onDrop:M(k=>Ae(o,k),["prevent"]),onDragover:M(k=>$e(o,k),["prevent"]),onDragenter:M(k=>Fe(o,k),["prevent"]),onDragleave:M(k=>Le(o,k),["prevent"])},[D("div",Lt,P(o.getDate()),1),L(r.$slots,"dayContent",{day:o})],42,Ft))),128)),t.enableHtmlTitles?(v(!0),f(R,{key:0},z(ve(u),o=>L(r.$slots,"item",{value:o,weekStartDate:u,top:K(o)},()=>[(v(),f("div",{key:o.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?o==l.currentDragItem:void 0,class:B([o.classes,"cv-item"]),title:o.tooltip||o.title,style:fe(`top:${K(o)};${o.originalItem.style}`),onDragstart:d=>ge(o,d),onMouseenter:d=>ue(o,d),onMouseleave:d=>ce(o,d),onClick:M(d=>de(o,d),["stop"]),innerHTML:De(o)},null,46,At))])),256)):(v(!0),f(R,{key:1},z(ve(u),o=>L(r.$slots,"item",{value:o,weekStartDate:u,top:K(o)},()=>[(v(),f("div",{key:o.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?o==l.currentDragItem:void 0,class:B([o.classes,"cv-item"]),title:o.tooltip||o.title,style:fe(`top:${K(o)};${o.originalItem.style}`),onDragstart:d=>ge(o,d),onMouseenter:d=>ue(o,d),onMouseleave:d=>ce(o,d),onClick:M(d=>de(o,d),["stop"])},P(De(o)),47,Tt)),Z(" div> ")])),256))])],2))),128))],8,It)],2))}}),Bt={class:"cv-header"},xt={class:"cv-header-nav"},Ht=["disabled"],Et=["disabled","innerHTML"],Nt=["disabled"],Wt=["disabled"],Ut={class:"periodLabel"},Vt=H({__name:"CalendarViewHeader",props:{headerProps:{type:Object,required:!0},previousYearLabel:{type:String,default:"<<"},previousPeriodLabel:{type:String,default:"<"},nextPeriodLabel:{type:String,default:">"},nextYearLabel:{type:String,default:">>"}},emits:["input"],setup(e,{emit:a}){const t=l=>a("input",l);return(l,c)=>(v(),f("div",Bt,[D("div",xt,[D("button",{disabled:!e.headerProps.previousYear,class:"previousYear","aria-label":"Previous Year",onClick:c[0]||(c[0]=M(h=>t(e.headerProps.previousYear),["prevent"]))},P(e.previousYearLabel),9,Ht),D("button",{disabled:!e.headerProps.previousPeriod,class:"previousPeriod","aria-label":"Previous Period",onClick:c[1]||(c[1]=M(h=>t(e.headerProps.previousPeriod),["prevent"])),innerHTML:e.previousPeriodLabel},null,8,Et),D("button",{class:"currentPeriod","aria-label":"Current Period",onClick:c[2]||(c[2]=M(h=>t(e.headerProps.currentPeriod),["prevent"]))},P(e.headerProps.currentPeriodLabel),1),D("button",{disabled:!e.headerProps.nextPeriod,class:"nextPeriod","aria-label":"Next Period",onClick:c[3]||(c[3]=M(h=>t(e.headerProps.nextPeriod),["prevent"]))},P(e.nextPeriodLabel),9,Nt),D("button",{disabled:!e.headerProps.nextYear,class:"nextYear","aria-label":"Next Year",onClick:c[4]||(c[4]=M(h=>t(e.headerProps.nextYear),["prevent"]))},P(e.nextYearLabel),9,Wt)]),D("div",Ut,[L(l.$slots,"label",{},()=>[Z(P(e.headerProps.periodLabel),1)])])]))}}),Rt={class:"calendarContainer"},zt={id:"calendar-component"},qt=H({__name:"Calendar",emits:["onClickDay","onClickItem"],setup(e,{emit:a}){var _;let t=A(new Date);(_=be().value)==null||_.uid;function l(w){return w.map(g=>{const S=g.id.substring(0,8),O=g.id.charAt(g.id.length-1);let N;if(O==="M")N=8;else if(O==="P")N=15;else throw new Error("Formato ID non riconosciuto");const W=new Date(parseInt(S.substring(0,4),10),parseInt(S.substring(4,6),10)-1,parseInt(S.substring(6,8),10),N),J=new Date(W);J.setHours(W.getHours()+4);const T=g.users||g.players;return{id:g.id,startDate:W,endDate:J,title:T.length>=3?"Al completo":`${3-T.length} posti disponibili`,classes:T.length>=3?"red":"green",slotAvailables:3-T.length}})}const c=Ue(q,"availabilities"),h=Ve(c,{wait:!0}),m=b(()=>l(h.value));function p(w){t.value=w}function $(w){a("onClickDay",w)}function C(w){a("onClickItem",w)}return(w,I)=>(v(),f("div",Rt,[D("div",zt,[ee(s(Yt),{"show-date":s(t),class:"theme-default",onClickDate:$,onClickItem:C,items:m.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month"},{header:ke(({headerProps:g})=>[ee(s(Vt),{"header-props":g,onInput:p},null,8,["header-props"])]),_:1},8,["show-date","items"])])]))}});const jt={class:"availabilityView"},Gt=D("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),Jt={key:2,class:"clausola"},Kt={key:3},Xt=H({__name:"AvailabilityView",setup(e){var I;let a=A(!1),t=A(!1),l=A(new Date),c=A("mattina"),h=A(!1),m=A(!1);const p=(I=be().value)==null?void 0:I.uid;function $(g,S){return`availabilities/${g.getFullYear()}${(g.getMonth()+1).toString().padStart(2,"0")}${g.getDate().toString().padStart(2,"0")}-${S==="mattina"?"M":"P"}`}async function C(g){h.value=!0,await ze(q,async S=>{S.set(ie(q,$(g.date,g.timeSlot)),{players:qe(ie(q,`users/${p}`))}),S.set(ie(q,`users/${p}/${$(g.date,g.timeSlot)}`),{date:g.date,timeSlot:g.timeSlot})}),h.value=!1,m.value=!0,t.value=!1,a.value=!1}function _(g){m.value=!1,l.value=g,t.value=!1,a.value=!0}function w(g){m.value=!1,g.originalItem.slotAvailables>0&&(c.value=g.id.charAt(g.id.length-1)==="M"?"mattina":"pomeriggio",l.value=g.startDate,t.value=!0,a.value=!1)}return(g,S)=>{const O=Re("RouterLink");return v(),f("div",jt,[Gt,ee(qt,{onOnClickDay:_,onOnClickItem:w}),s(a)&&!s(h)?(v(),ye(Xe,{key:0,date:s(l),onSave:C},null,8,["date"])):x("",!0),s(t)&&!s(h)?(v(),ye(et,{key:1,date:s(l),time:s(c),onSave:C},null,8,["date","time"])):x("",!0),!s(h)&&(s(a)||s(t))?(v(),f("div",Jt,[Z("Confermando accetti "),ee(O,{class:"link",to:"/rules"},{default:ke(()=>[Z(" il regolamento")]),_:1})])):x("",!0),s(m)?(v(),f("div",Kt,"Prenotato")):x("",!0)])}}});export{Xt as default};
