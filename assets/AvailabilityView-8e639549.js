import{k as se,l as Qe,m as Ae,n as j,q as pe,v as Je,x as Xe,y as Ze,z as Oe,A as et,B as tt,C as at,D as Fe,d as G,c as b,h as l,t as O,e as d,b as f,E as ge,H as ot,I as rt,J as nt,K as w,L as it,M as H,f as K,F as W,N as V,O as Y,P as z,Q as Me,R as ee,S as A,a as Te,T as st,U as q,V as lt,i as ie,w as Le,W as dt,X as Z,r as ct,Y as $e,Z as ut,$ as ht,a0 as mt,a1 as Pe}from"./index-3cbb2844.js";/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const vt=se`@media(forced-colors: active){:host{--md-radio-disabled-selected-icon-color: GrayText;--md-radio-disabled-selected-icon-opacity: 1;--md-radio-disabled-unselected-icon-color: GrayText;--md-radio-disabled-unselected-icon-opacity: 1;--md-radio-selected-icon-color: CanvasText;--md-radio-selected-hover-icon-color: CanvasText;--md-radio-selected-focus-icon-color: CanvasText;--md-radio-selected-pressed-icon-color: CanvasText;--md-radio-icon-color: CanvasText;--md-radio-hover-icon-color: CanvasText;--md-radio-focus-icon-color: CanvasText;--md-radio-pressed-icon-color: CanvasText}}/*# sourceMappingURL=forced-colors-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pt{constructor(a){this.host=a,this.focused=!1,this.root=null,this.handleFocusIn=()=>{this.focused=!0,this.updateTabIndices()},this.handleFocusOut=()=>{this.focused=!1,this.updateTabIndices()},this.handleKeyDown=t=>{const i=t.key==="ArrowDown",m=t.key==="ArrowUp",_=t.key==="ArrowLeft",v=t.key==="ArrowRight";if(!_&&!v&&!i&&!m)return;const c=this.getNamedSiblings();if(!c.length)return;t.preventDefault();const M=getComputedStyle(this.host).direction==="rtl"?_||i:v||i,$=c.indexOf(this.host);let C=M?$+1:$-1;for(;C!==$;){C>=c.length?C=0:C<0&&(C=c.length-1);const x=c[C];if(x.hasAttribute("disabled")){M?C++:C--;continue}for(const p of c)p!==x&&(p.checked=!1,p.tabIndex=-1);x.checked=!0,x.removeAttribute("tabindex"),x.focus(),x.dispatchEvent(new Event("change",{bubbles:!0}));break}}}hostConnected(){this.root=this.host.getRootNode(),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("focusin",this.handleFocusIn),this.host.addEventListener("focusout",this.handleFocusOut),this.host.checked&&this.uncheckSiblings(),this.updateTabIndices()}hostDisconnected(){this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("focusin",this.handleFocusIn),this.host.removeEventListener("focusout",this.handleFocusOut),this.updateTabIndices(),this.root=null}handleCheckedChange(){this.host.checked&&(this.uncheckSiblings(),this.updateTabIndices())}uncheckSiblings(){for(const a of this.getNamedSiblings())a!==this.host&&(a.checked=!1)}updateTabIndices(){const a=this.getNamedSiblings(),t=a.find(i=>i.checked);if(t||this.focused){const i=t||this.host;i.removeAttribute("tabindex");for(const m of a)m!==i&&(m.tabIndex=-1);return}for(const i of a)i.removeAttribute("tabindex")}getNamedSiblings(){const a=this.host.getAttribute("name");return!a||!this.root?[]:Array.from(this.root.querySelectorAll(`[name="${a}"]`))}}/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ee;const ue=Symbol("checked");let gt=0;class L extends Ae{get checked(){return this[ue]}set checked(a){const t=this.checked;if(t===a)return;this[ue]=a;const i=String(a);this.internals.setFormValue(this.checked?this.value:null,i),this.requestUpdate("checked",t),this.selectionController.handleCheckedChange()}get name(){return this.getAttribute("name")??""}set name(a){this.setAttribute("name",a)}get form(){return this.internals.form}get labels(){return this.internals.labels}constructor(){super(),this.maskId=`cutout${++gt}`,this[Ee]=!1,this.disabled=!1,this.value="on",this.selectionController=new pt(this),this.internals=this.attachInternals(),this.addController(this.selectionController),this.addEventListener("click",a=>{Xe(a)&&(this.focus(),Ze(this.input))})}focus(){var a;(a=this.input)==null||a.focus()}render(){const a={checked:this.checked},{ariaLabel:t}=this;return Oe`
      <div class="container ${et(a)}">
        <md-ripple for="input" ?disabled=${this.disabled}></md-ripple>
        <md-focus-ring part="focus-ring" for="input"></md-focus-ring>
        <svg class="icon" viewBox="0 0 20 20">
          <mask id="${this.maskId}">
            <rect width="100%" height="100%" fill="white" />
            <circle cx="10" cy="10" r="8" fill="black" />
          </mask>
          <circle class="outer circle" cx="10" cy="10" r="10"
              mask="url(#${this.maskId})" />
          <circle class="inner circle" cx="10" cy="10" r="5" />
        </svg>
        <input
          id="input"
          type="radio"
          name=${this.name}
          aria-label=${t||tt}
          .checked=${this.checked}
          .value=${this.value}
          ?disabled=${this.disabled}
          @change=${this.handleChange}
        >
      </div>
    `}handleChange(a){this.disabled||(this.checked=!0,at(this,a))}formResetCallback(){this.checked=this.hasAttribute("checked")}formStateRestoreCallback(a){this.checked=a==="true"}}Ee=ue;Qe(L);L.shadowRootOptions={...Ae.shadowRootOptions,delegatesFocus:!0};L.formAssociated=!0;j([pe({type:Boolean})],L.prototype,"checked",null);j([pe({type:Boolean,reflect:!0})],L.prototype,"disabled",void 0);j([pe()],L.prototype,"value",void 0);j([Je("input")],L.prototype,"input",void 0);/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const ft=se`:host{--_disabled-selected-icon-color: var(--md-radio-disabled-selected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-selected-icon-opacity: var(--md-radio-disabled-selected-icon-opacity, 0.38);--_disabled-unselected-icon-color: var(--md-radio-disabled-unselected-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-unselected-icon-opacity: var(--md-radio-disabled-unselected-icon-opacity, 0.38);--_icon-size: var(--md-radio-icon-size, 20px);--_selected-focus-icon-color: var(--md-radio-selected-focus-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-icon-color: var(--md-radio-selected-hover-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-color: var(--md-radio-selected-hover-state-layer-color, var(--md-sys-color-primary, #6750a4));--_selected-hover-state-layer-opacity: var(--md-radio-selected-hover-state-layer-opacity, 0.08);--_selected-icon-color: var(--md-radio-selected-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-icon-color: var(--md-radio-selected-pressed-icon-color, var(--md-sys-color-primary, #6750a4));--_selected-pressed-state-layer-color: var(--md-radio-selected-pressed-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_selected-pressed-state-layer-opacity: var(--md-radio-selected-pressed-state-layer-opacity, 0.12);--_state-layer-size: var(--md-radio-state-layer-size, 40px);--_focus-icon-color: var(--md-radio-focus-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-icon-color: var(--md-radio-hover-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-color: var(--md-radio-hover-state-layer-color, var(--md-sys-color-on-surface, #1d1b20));--_hover-state-layer-opacity: var(--md-radio-hover-state-layer-opacity, 0.08);--_icon-color: var(--md-radio-icon-color, var(--md-sys-color-on-surface-variant, #49454f));--_pressed-icon-color: var(--md-radio-pressed-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_pressed-state-layer-color: var(--md-radio-pressed-state-layer-color, var(--md-sys-color-primary, #6750a4));--_pressed-state-layer-opacity: var(--md-radio-pressed-state-layer-opacity, 0.12);--md-ripple-hover-color: var(--_hover-state-layer-color);--md-ripple-hover-opacity: var(--_hover-state-layer-opacity);--md-ripple-pressed-color: var(--_pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_pressed-state-layer-opacity);display:inline-flex;height:var(--_icon-size);position:relative;vertical-align:top;width:var(--_icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}:host([touch-target=wrapper]){margin:max(0px,(48px - var(--_icon-size))/2)}.container{display:grid;height:100%;place-content:center;place-items:center;width:100%}md-focus-ring{height:44px;inset:unset;width:44px}.checked{--md-ripple-hover-color: var(--_selected-hover-state-layer-color);--md-ripple-hover-opacity: var(--_selected-hover-state-layer-opacity);--md-ripple-pressed-color: var(--_selected-pressed-state-layer-color);--md-ripple-pressed-opacity: var(--_selected-pressed-state-layer-opacity)}input{appearance:none;height:48px;outline:none;margin:0;position:absolute;width:48px}:host([touch-target=none]) input{width:100%;height:100%}md-ripple{border-radius:50%;height:var(--_state-layer-size);inset:unset;width:var(--_state-layer-size)}.icon{fill:var(--_icon-color);inset:0;position:absolute}.outer.circle{transition:fill 50ms linear}.inner.circle{opacity:0;transform-origin:center;transition:opacity 50ms linear}.checked .icon{fill:var(--_selected-icon-color)}.checked .inner.circle{animation:inner-circle-grow 300ms cubic-bezier(0.05, 0.7, 0.1, 1);opacity:1}@keyframes inner-circle-grow{from{transform:scale(0)}to{transform:scale(1)}}:host([disabled]) .circle{animation-duration:0s;transition-duration:0s}:host(:hover) .icon{fill:var(--_hover-icon-color)}:host(:focus-within) .icon{fill:var(--_focus-icon-color)}:host(:active) .icon{fill:var(--_pressed-icon-color)}:host([disabled]) .icon{fill:var(--_disabled-unselected-icon-color);opacity:var(--_disabled-unselected-icon-opacity)}:host(:hover) .checked .icon{fill:var(--_selected-hover-icon-color)}:host(:focus-within) .checked .icon{fill:var(--_selected-focus-icon-color)}:host(:active) .checked .icon{fill:var(--_selected-pressed-icon-color)}:host([disabled]) .checked .icon{fill:var(--_disabled-selected-icon-color);opacity:var(--_disabled-selected-icon-opacity)}/*# sourceMappingURL=radio-styles.css.map */
`;/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let he=class extends L{};he.styles=[ft,vt];he=j([Fe("md-radio")],he);const yt=l("span",{"aria-hidden":"true"},"Mattina",-1),bt=l("span",{"aria-hidden":"true"},"Pomeriggio",-1),_t={props:{date:{type:Date,required:!0}},methods:{onSelect(e){this.$emit("select",{timeSlot:e})}}},Dt=G({..._t,__name:"BookSlot",setup(e){return(a,t)=>(f(),b("div",null,[l("h2",null,"Dai la disponibilità per il "+O(e.date.getDate())+" "+O(d(ge)[e.date.getMonth()]),1),l("form",null,[l("label",null,[l("md-radio",{onChange:t[0]||(t[0]=i=>a.onSelect("mattina")),type:"radio",name:"time",value:"mattina","aria-label":"Mattina","touch-target":"wrapper",checked:""},null,32),yt]),l("label",null,[l("md-radio",{onChange:t[1]||(t[1]=i=>a.onSelect("pomeriggio")),type:"radio",name:"time",value:"pomeriggio","aria-label":"Pomeriggio","touch-target":"wrapper"},null,32),bt])])]))}});const kt={props:{date:{type:Date,required:!0},time:{type:String,required:!0}}},wt=G({...kt,__name:"ExistingSlot",setup(e){return(a,t)=>(f(),b("div",null,[l("h2",null,"Dai la disponibilità per il "+O(e.date.getDate())+" "+O(d(ge)[e.date.getMonth()])+" "+O(e.time),1)]))}});/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ct extends ot{renderElevation(){return Oe`<md-elevation></md-elevation>`}}/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const xt=se`:host{--_container-color: var(--md-filled-tonal-button-container-color, var(--md-sys-color-secondary-container, #e8def8));--_container-elevation: var(--md-filled-tonal-button-container-elevation, 0);--_container-height: var(--md-filled-tonal-button-container-height, 40px);--_container-shadow-color: var(--md-filled-tonal-button-container-shadow-color, var(--md-sys-color-shadow, #000));--_container-shape: var(--md-filled-tonal-button-container-shape, 9999px);--_disabled-container-color: var(--md-filled-tonal-button-disabled-container-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-container-elevation: var(--md-filled-tonal-button-disabled-container-elevation, 0);--_disabled-container-opacity: var(--md-filled-tonal-button-disabled-container-opacity, 0.12);--_disabled-label-text-color: var(--md-filled-tonal-button-disabled-label-text-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-label-text-opacity: var(--md-filled-tonal-button-disabled-label-text-opacity, 0.38);--_focus-container-elevation: var(--md-filled-tonal-button-focus-container-elevation, 0);--_focus-label-text-color: var(--md-filled-tonal-button-focus-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-container-elevation: var(--md-filled-tonal-button-hover-container-elevation, 1);--_hover-label-text-color: var(--md-filled-tonal-button-hover-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-color: var(--md-filled-tonal-button-hover-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-state-layer-opacity: var(--md-filled-tonal-button-hover-state-layer-opacity, 0.08);--_label-text-color: var(--md-filled-tonal-button-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_label-text-type: var(--md-filled-tonal-button-label-text-type, var(--md-sys-typescale-label-large, 500 0.875rem / 1.25rem var(--md-ref-typeface-plain, Roboto)));--_pressed-container-elevation: var(--md-filled-tonal-button-pressed-container-elevation, 0);--_pressed-label-text-color: var(--md-filled-tonal-button-pressed-label-text-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-color: var(--md-filled-tonal-button-pressed-state-layer-color, var(--md-sys-color-on-secondary-container, #1d192b));--_pressed-state-layer-opacity: var(--md-filled-tonal-button-pressed-state-layer-opacity, 0.12);--_disabled-icon-color: var(--md-filled-tonal-button-disabled-icon-color, var(--md-sys-color-on-surface, #1d1b20));--_disabled-icon-opacity: var(--md-filled-tonal-button-disabled-icon-opacity, 0.38);--_focus-icon-color: var(--md-filled-tonal-button-focus-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_hover-icon-color: var(--md-filled-tonal-button-hover-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-color: var(--md-filled-tonal-button-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_icon-size: var(--md-filled-tonal-button-icon-size, 18px);--_pressed-icon-color: var(--md-filled-tonal-button-pressed-icon-color, var(--md-sys-color-on-secondary-container, #1d192b));--_leading-space: var(--md-filled-tonal-button-leading-space, 24px);--_trailing-space: var(--md-filled-tonal-button-trailing-space, 24px);--_with-leading-icon-leading-space: var(--md-filled-tonal-button-with-leading-icon-leading-space, 16px);--_with-leading-icon-trailing-space: var(--md-filled-tonal-button-with-leading-icon-trailing-space, 24px);--_with-trailing-icon-leading-space: var(--md-filled-tonal-button-with-trailing-icon-leading-space, 24px);--_with-trailing-icon-trailing-space: var(--md-filled-tonal-button-with-trailing-icon-trailing-space, 16px);--_container-shape-start-start: var( --md-filled-tonal-button-container-shape-start-start, var(--_container-shape) );--_container-shape-start-end: var( --md-filled-tonal-button-container-shape-start-end, var(--_container-shape) );--_container-shape-end-end: var( --md-filled-tonal-button-container-shape-end-end, var(--_container-shape) );--_container-shape-end-start: var( --md-filled-tonal-button-container-shape-end-start, var(--_container-shape) )}/*# sourceMappingURL=filled-tonal-styles.css.map */
`;/**
  * @license
  * Copyright 2022 Google LLC
  * SPDX-License-Identifier: Apache-2.0
  */const St=se`md-elevation{transition-duration:280ms}.button{--md-elevation-level: var(--_container-elevation);--md-elevation-shadow-color: var(--_container-shadow-color)}.button:focus{--md-elevation-level: var(--_focus-container-elevation)}.button:hover{--md-elevation-level: var(--_hover-container-elevation)}.button:active{--md-elevation-level: var(--_pressed-container-elevation)}.button:disabled{--md-elevation-level: var(--_disabled-container-elevation)}/*# sourceMappingURL=shared-elevation-styles.css.map */
`;/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let me=class extends Ct{};me.styles=[rt,St,xt];me=j([Fe("md-filled-tonal-button")],me);var It=Object.defineProperty,Mt=(e,a,t)=>a in e?It(e,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[a]=t,ne=(e,a,t)=>(Mt(e,typeof a!="symbol"?a+"":a,t),t);const ae=()=>le(new Date),$t=(e,a,t)=>{switch(a){case"year":return new Date(e.getFullYear(),0);case"month":return new Date(e.getFullYear(),e.getMonth());case"week":return fe(e,t);default:return e}},Pt=e=>[...Array(7)].map((a,t)=>Q(e,t)),Q=(e,a)=>new Date(e.getFullYear(),e.getMonth(),e.getDate()+a,e.getHours(),e.getMinutes(),e.getSeconds()),fe=(e,a)=>Q(e,(a-e.getDay()-7)%-7),At=(e,a)=>Q(fe(e,a),7),te=e=>new Date(e.getFullYear(),e.getMonth()),Ot=e=>Math.ceil(e.getDate()/7),Ft=(e,a,t)=>new Date(e.getFullYear()+(a=="year"?t:0),e.getMonth()+(a=="month"?t:0),e.getDate()+(a=="week"?t*7:0)),ye=e=>("0"+String(e.getMonth()+1)).slice(-2),be=e=>("0"+String(e.getDate())).slice(-2),Be=e=>e.getFullYear()+"-"+ye(e),Tt=e=>Be(e)+"-"+be(e),Lt=e=>ye(e)+"-"+be(e),Et=(e,a,t)=>{if(e.getHours()===0&&e.getMinutes()===0&&e.getSeconds()===0)return"";if(!de()){var i=new Date().getTimezoneOffset()*6e4;return new Date(e.getTime()-i).toISOString().slice(11,16)}return e.toLocaleTimeString(a,t)},Bt=(e,a,t,i)=>{const m=e.getFullYear()===a.getFullYear(),_=Ne(e,a),v=t!=="year"&&t!=="month";let c=[];return c.push(i[e.getMonth()]),v&&(c.push(" "),c.push(e.getDate())),m||(c.push(v?", ":" "),c.push(e.getFullYear())),!_||!m?(c.push(" – "),_||c.push(i[a.getMonth()]),v&&c.push(" ")):v&&c.push(" – "),v?(c.push(a.getDate()),c.push(", ")):c.push(" "),c.push(a.getFullYear()),c.join("")},Ue=(e,a)=>{const t=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),i=Date.UTC(e.getFullYear(),e.getMonth(),e.getDate());return(t-i)/864e5},Ut=(e,a)=>!!e&&!!a&&Ue(e,a)===0,Nt=(e,a)=>!!e&&!!a&&e.getTime()===a.getTime(),Ne=(e,a)=>!!e&&!!a&&e.getFullYear()===a.getFullYear()&&e.getMonth()===a.getMonth(),Rt=e=>te(e)<te(ae()),Ht=e=>te(e)>te(ae()),Yt=e=>le(e)>ae(),zt=e=>le(e)<ae(),Wt=e=>e.getMonth()!==Q(e,7).getMonth(),Vt=e=>e.getMonth()!==Q(e,1).getMonth(),Re=e=>{let a=[...Array(7)].map(t=>0);return e.split(/\D/,7).forEach((t,i)=>a[i]=Number(t)),a[1]--,new Date(a[0],a[1],a[2],a[3],a[4],a[5],a[6])},ve=e=>typeof e=="string"?Re(e):new Date(e),le=e=>{const a=new Date(e);return a.setHours(0,0,0,0),a},qt=e=>e.substring(0,2),de=()=>typeof Intl<"u",Kt=(e,a)=>{if(!de())return[...Array(12)].map(i=>"");const t=new Intl.DateTimeFormat(e,{month:a});return[...Array(12)].map((i,m)=>t.format(new Date(2017,m,1)))},jt=(e,a,t)=>{if(!de())return[...Array(7)].map(m=>"");const i=new Intl.DateTimeFormat(e,{weekday:a});return[...Array(7)].map((m,_)=>i.format(new Date(2017,0,(_+1+t)%7)))},Gt=()=>typeof navigator>"u"?"unk":(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.language).toLowerCase(),Qt=(e,a)=>{const t=e.classes?[...e.classes]:[];return a&&t.push("isHovered"),{originalItem:e,startDate:ve(e.startDate),endDate:ve(e.endDate||e.startDate),classes:t,title:e.title||"Untitled",id:e.id,url:e.url,tooltip:e.tooltip??e.title}},r={addDays:Q,beginningOfMonth:te,beginningOfPeriod:$t,beginningOfWeek:fe,dateOnly:le,dayDiff:Ue,daysOfWeek:Pt,endOfWeek:At,formattedPeriod:Bt,formattedTime:Et,fromIsoStringToLocalDate:Re,getDefaultBrowserLocale:Gt,getFormattedMonthNames:Kt,getFormattedWeekdayNames:jt,incrementPeriod:Ft,instanceOfMonth:Ot,isFutureMonth:Ht,isInFuture:Yt,isInPast:zt,isLastDayOfMonth:Vt,isLastInstanceOfMonth:Wt,isoMonthDay:Lt,isoYearMonth:Be,isoYearMonthDay:Tt,isPastMonth:Rt,isSameDate:Ut,isSameDateTime:Nt,isSameMonth:Ne,languageCode:qt,normalizeItem:Qt,paddedDay:be,paddedMonth:ye,supportsIntl:de,today:ae,toLocalDate:ve};class Jt{constructor(){ne(this,"currentDragItem"),ne(this,"dateSelectionOrigin"),ne(this,"currentHoveredItemId",""),ne(this,"CalendarMath",r)}}const Xt={class:"cv-header-days"},Zt={key:0,class:"cv-weeknumber"},ea=["aria-multiselectable"],ta={key:0,class:"cv-weeknumber"},aa={class:"cv-weekdays"},oa=["draggable","aria-grabbed","aria-label","aria-selected","aria-dropeffect","onClick","onDragstart","onDrop","onDragover","onDragenter","onDragleave"],ra={class:"cv-day-number"},na=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick","innerHTML"],ia=["draggable","aria-grabbed","title","onDragstart","onMouseenter","onMouseleave","onClick"],sa=G({__name:"CalendarView",props:{showDate:{default:void 0},displayPeriodUom:{default:"month"},displayPeriodCount:{default:1},displayWeekNumbers:{type:Boolean,default:!1},locale:{default:void 0},monthNameFormat:{default:"long"},weekdayNameFormat:{default:"short"},showTimes:{type:Boolean,default:!1},timeFormatOptions:{default:()=>({})},disablePast:{type:Boolean,default:!1},disableFuture:{type:Boolean,default:!1},enableDateSelection:{type:Boolean,default:!1},selectionStart:{default:void 0},selectionEnd:{default:void 0},enableDragDrop:{type:Boolean,default:!1},startingDayOfWeek:{default:0},items:{default:()=>[]},dateClasses:{default:()=>({})},itemTop:{default:"1.4em"},itemContentHeight:{default:"1.4em"},itemBorderHeight:{default:"2px"},periodChangedCallback:{type:Function,default:void 0},currentPeriodLabel:{default:""},currentPeriodLabelIcons:{default:"⇤-⇥"},doEmitItemMouseEvents:{type:Boolean,default:!1},enableHtmlTitles:{type:Boolean,default:!0}},emits:["period-changed","click-date","click-item","item-mouseenter","item-mouseleave","drag-start","drag-over-date","drag-enter-date","drag-leave-date","drop-on-date","date-selection","date-selection-start","date-selection-finish"],setup(e,{emit:a}){const t=e,i=nt(new Jt),m=w(()=>t.locale||r.getDefaultBrowserLocale()),_=w(()=>t.showDate?r.dateOnly(t.showDate):r.today()),v=w(()=>r.beginningOfPeriod(_.value,t.displayPeriodUom,t.startingDayOfWeek)),c=w(()=>r.addDays(r.incrementPeriod(v.value,t.displayPeriodUom,t.displayPeriodCount),-1)),P=w(()=>{const o=r.beginningOfWeek(r.beginningOfPeriod(v.value,"year",0),t.startingDayOfWeek),s=r.beginningOfWeek(v.value,t.startingDayOfWeek);return 1+Math.floor(r.dayDiff(o,s)/7)}),M=w(()=>r.beginningOfWeek(v.value,t.startingDayOfWeek)),$=w(()=>r.endOfWeek(c.value,t.startingDayOfWeek)),C=w(()=>{const o=Math.floor((r.dayDiff(M.value,$.value)+1)/7);return[...Array(o)].map((s,h)=>r.addDays(M.value,h*7))}),x=w(()=>r.getFormattedMonthNames(m.value,t.monthNameFormat)),p=w(()=>r.getFormattedWeekdayNames(m.value,t.weekdayNameFormat,t.startingDayOfWeek)),F=w(()=>t.items?t.items.map(o=>r.normalizeItem(o,o.id===i.currentHoveredItemId)):[]),D=w(()=>r.beginningOfPeriod(r.today(),t.displayPeriodUom,t.startingDayOfWeek)),E=w(()=>r.addDays(r.incrementPeriod(D.value,t.displayPeriodUom,t.displayPeriodCount),-1)),B=w(()=>r.formattedPeriod(v.value,c.value,t.displayPeriodUom,x.value)),y=w(()=>{const o=D.value,s=v.value;return t.currentPeriodLabel?t.currentPeriodLabel==="icons"?t.currentPeriodLabelIcons[Math.sign(o.getTime()-s.getTime())+1]:t.currentPeriodLabel:r.formattedPeriod(o,E.value,t.displayPeriodUom,x.value)}),g=w(()=>({previousYear:R(-12),previousPeriod:R(-1),nextPeriod:R(1),previousFullPeriod:R(-t.displayPeriodCount),nextFullPeriod:R(t.displayPeriodCount),nextYear:R(12),currentPeriod:D.value,currentPeriodLabel:y.value,periodStart:v.value,periodEnd:c.value,displayLocale:m.value,displayFirstDate:M.value,displayLastDate:$.value,monthNames:x.value,fixedItems:F.value,periodLabel:B.value})),U=w(()=>({periodStart:v,periodEnd:c,displayFirstDate:M,displayLastDate:$}));it(()=>U,o=>{t.periodChangedCallback&&(a("period-changed"),t.periodChangedCallback(o,"watch"))},{immediate:!0,deep:!0});const S=(o,s)=>{t.disablePast&&r.isInPast(o)||t.disableFuture&&r.isInFuture(o)||a("click-date",o,we(o,o),s)},J=(o,s)=>a("click-item",o,s),T=o=>"dow"+(o+t.startingDayOfWeek)%7,R=o=>{const s=r.incrementPeriod(v.value,t.displayPeriodUom,o),h=r.incrementPeriod(s,t.displayPeriodUom,t.displayPeriodCount);return t.disablePast&&h<=r.today()||t.disableFuture&&s>r.today()?null:s},_e=(o,s)=>{i.currentHoveredItemId=o.id,t.doEmitItemMouseEvents&&a("item-mouseenter",o,s)},De=(o,s)=>{i.currentHoveredItemId="",t.doEmitItemMouseEvents&&a("item-mouseleave",o,s)},He=(o,s)=>{var h,k;if(!t.enableDateSelection)return!1;(h=s.dataTransfer)==null||h.setData("text",o.toString());let n=new Image;return n.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",(k=s.dataTransfer)==null||k.setDragImage(n,10,10),i.dateSelectionOrigin=o,a("date-selection-start",ce(o),s),!0},ke=(o,s)=>{var h;return t.enableDragDrop?((h=s.dataTransfer)==null||h.setData("text",o.id),i.currentDragItem=o,i.dateSelectionOrigin=void 0,a("drag-start",o,s),!0):!1},ce=o=>o<=i.dateSelectionOrigin?[o,i.dateSelectionOrigin]:[i.dateSelectionOrigin,o],Ye=(o,s)=>{t.enableDragDrop&&a("drag-over-date",i.currentDragItem,o,s)},ze=(o,s)=>{t.enableDateSelection&&i.dateSelectionOrigin&&a("date-selection",ce(o),s),t.enableDragDrop&&(a("drag-enter-date",i.currentDragItem,o,s),s.target.classList.add("draghover"))},We=(o,s)=>{t.enableDateSelection&&t.selectionStart||!t.enableDragDrop||(a("drag-leave-date",i.currentDragItem,o,s),s.target.classList.remove("draghover"))},Ve=(o,s)=>{if(t.enableDateSelection&&i.dateSelectionOrigin){a("date-selection-finish",ce(o),s);return}t.enableDragDrop&&(a("drop-on-date",i.currentDragItem,o,s),s.target.classList.remove("draghover"))},qe=(o,s)=>o.startDate<s.startDate?-1:s.startDate<o.startDate?1:o.endDate>s.endDate?-1:s.endDate>o.endDate?1:o.id<s.id?-1:1,Ke=o=>we(o,r.addDays(o,6)),we=(o,s)=>F.value.filter(h=>h.endDate>=o&&r.dateOnly(h.startDate)<=s,this).sort(qe),je=o=>!!F.value.find(s=>s.endDate>=o&&r.dateOnly(s.startDate)<=o),Ce=o=>!(!t.selectionStart||!t.selectionEnd||o<r.dateOnly(t.selectionStart)||o>r.dateOnly(t.selectionEnd)),xe=o=>{const s=Ke(o),h=[],k=[[],[],[],[],[],[],[]];if(!s)return h;for(let n=0;n<s.length;n++){const u=Object.assign({},s[n],{classes:[...s[n].classes],itemRow:0}),I=u.startDate<o,X=I?0:r.dayDiff(o,u.startDate),Ie=Math.min(7-X,r.dayDiff(r.addDays(o,X),u.endDate)+1);I&&u.classes.push("continued"),r.dayDiff(o,u.endDate)>6&&u.classes.push("toBeContinued"),r.isInPast(u.endDate)&&u.classes.push("past"),u.originalItem.url&&u.classes.push("hasUrl");for(let N=0;N<7;N++)if(N===X){let re=0;for(;k[N][re];)re++;u.itemRow=re,k[N][re]=!0}else N<X+Ie&&(k[N][u.itemRow]=!0);u.classes.push(`offset${X}`),u.classes.push(`span${Ie}`),h.push(u)}return h},Ge=o=>{const s='<span class="startTime">'+r.formattedTime(o.startDate,m.value,t.timeFormatOptions)+"</span>";let h="";return r.isSameDateTime(o.startDate,o.endDate)||(h='<span class="endTime">'+r.formattedTime(o.endDate,m.value,t.timeFormatOptions)+"</span>"),s+h},Se=o=>t.showTimes?Ge(o)+" "+o.title:o.title,oe=o=>{const s=o.itemRow,h=t.itemContentHeight,k=t.itemBorderHeight;return`calc(${t.itemTop} + ${s}*${h} + ${s}*${k})`};return(o,s)=>(f(),b("div",{"aria-label":"Calendar",class:Y(["cv-wrapper",`locale-${d(r).languageCode(d(m))}`,`locale-${d(m)}`,`y${d(v).getFullYear()}`,`m${d(r).paddedMonth(d(v))}`,`period-${e.displayPeriodUom}`,`periodCount-${e.displayPeriodCount}`,{past:d(r).isPastMonth(d(v)),future:d(r).isFutureMonth(d(v)),noIntl:!d(r).supportsIntl}])},[H(o.$slots,"header",{headerProps:d(g)}),l("div",Xt,[e.displayWeekNumbers?(f(),b("div",Zt)):K("",!0),(f(!0),b(W,null,V(d(p),(h,k)=>H(o.$slots,"dayHeader",{index:T(k),label:h},()=>[(f(),b("div",{key:T(k),class:Y([T(k),"cv-header-day"])},O(h),3))])),256))]),l("div",{"aria-multiselectable":e.enableDateSelection,class:"cv-weeks"},[(f(!0),b(W,null,V(d(C),(h,k)=>(f(),b("div",{key:`${k}-week`,class:Y(["cv-week",`week${k+1}`,`ws${d(r).isoYearMonthDay(h)}`])},[e.displayWeekNumbers?(f(),b("div",ta,[H(o.$slots,"weekNumber",{date:h,numberInYear:d(P)+k,numberInPeriod:k+1},()=>[l("span",null,O(d(P)+k),1)])])):K("",!0),l("div",aa,[(f(!0),b(W,null,V(d(r).daysOfWeek(h),(n,u)=>(f(),b("div",{key:T(u),draggable:e.enableDateSelection,class:Y(["cv-day",T(u),`d${d(r).isoYearMonthDay(n)}`,`d${d(r).isoMonthDay(n)}`,`d${d(r).paddedDay(n)}`,`instance${d(r).instanceOfMonth(n)}`,{today:d(r).isSameDate(n,d(r).today()),outsideOfMonth:!d(r).isSameMonth(n,d(_)),past:d(r).isInPast(n),future:d(r).isInFuture(n),last:d(r).isLastDayOfMonth(n),lastInstance:d(r).isLastInstanceOfMonth(n),hasItems:je(n),selectionStart:d(r).isSameDate(n,e.selectionStart),selectionEnd:d(r).isSameDate(n,e.selectionEnd)},...e.dateClasses&&e.dateClasses[d(r).isoYearMonthDay(n)]||[]]),"aria-grabbed":e.enableDateSelection?Ce(n):void 0,"aria-label":n.getDate().toString(),"aria-selected":Ce(n),"aria-dropeffect":e.enableDragDrop&&i.currentDragItem?"move":e.enableDateSelection&&i.dateSelectionOrigin?"execute":"none",onClick:I=>S(n,I),onDragstart:I=>He(n,I),onDrop:z(I=>Ve(n,I),["prevent"]),onDragover:z(I=>Ye(n,I),["prevent"]),onDragenter:z(I=>ze(n,I),["prevent"]),onDragleave:z(I=>We(n,I),["prevent"])},[l("div",ra,O(n.getDate()),1),H(o.$slots,"dayContent",{day:n})],42,oa))),128)),t.enableHtmlTitles?(f(!0),b(W,{key:0},V(xe(h),n=>H(o.$slots,"item",{value:n,weekStartDate:h,top:oe(n)},()=>[(f(),b("div",{key:n.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?n==i.currentDragItem:void 0,class:Y([n.classes,"cv-item"]),title:n.tooltip||n.title,style:Me(`top:${oe(n)};${n.originalItem.style}`),onDragstart:u=>ke(n,u),onMouseenter:u=>_e(n,u),onMouseleave:u=>De(n,u),onClick:z(u=>J(n,u),["stop"]),innerHTML:Se(n)},null,46,na))])),256)):(f(!0),b(W,{key:1},V(xe(h),n=>H(o.$slots,"item",{value:n,weekStartDate:h,top:oe(n)},()=>[(f(),b("div",{key:n.id,draggable:e.enableDragDrop,"aria-grabbed":e.enableDragDrop?n==i.currentDragItem:void 0,class:Y([n.classes,"cv-item"]),title:n.tooltip||n.title,style:Me(`top:${oe(n)};${n.originalItem.style}`),onDragstart:u=>ke(n,u),onMouseenter:u=>_e(n,u),onMouseleave:u=>De(n,u),onClick:z(u=>J(n,u),["stop"])},O(Se(n)),47,ia)),ee(" div> ")])),256))])],2))),128))],8,ea)],2))}}),la={class:"calendarHeader"},da=l("md-icon",null,"chevron_left",-1),ca=[da],ua=l("md-icon",null,"today",-1),ha=[ua],ma=l("md-icon",null,"chevron_right",-1),va=[ma],pa={class:"date"},ga=G({__name:"CalendarHeader",props:{headerProps:{type:Object,required:!0}},emits:["input"],setup(e,{emit:a}){const t=e;function i(){a("input",t.headerProps.nextPeriod)}function m(){a("input",t.headerProps.currentPeriod)}function _(){a("input",t.headerProps.previousPeriod)}return(v,c)=>(f(),b("div",la,[l("div",{class:"navButtons"},[l("md-icon-button",{onClick:_},ca),l("md-icon-button",{onClick:m},ha),l("md-icon-button",{onClick:i},va)]),l("div",pa,O(d(ge)[t.headerProps.periodStart.getMonth()]),1)]))}});const fa={class:"calendarContainer"},ya={id:"calendar-component"},ba=G({__name:"Calendar",emits:["onClickDay","onClickItem"],setup(e,{emit:a}){var x;let t=A(new Date);const i=(x=Te().value)==null?void 0:x.uid;function m(p){return p.map(D=>{const E=D.id.substring(0,8),B=D.id.charAt(D.id.length-1);let y;if(B==="M")y=8;else if(B==="P")y=15;else throw new Error("Formato ID non riconosciuto");const g=new Date(parseInt(E.substring(0,4),10),parseInt(E.substring(4,6),10)-1,parseInt(E.substring(6,8),10),y),U=new Date(g);U.setHours(g.getHours()+4);const S=D.players||D.users,J=S.filter(T=>T.id===i).length>0;return{id:D.id,startDate:g,endDate:U,title:S.length>=3?"Al completo":`${3-S.length} posti disponibili`,classes:J?["bookedByUser"]:["green"],slotAvailables:3-S.length,playersNames:S.map(T=>T.username),bookedByUser:J}})}const _=st(q,"availabilities"),v=lt(_,{wait:!0}),c=w(()=>m(v.value));function P(p,F){return F.filter(D=>D.slotAvailables===0&&D.startDate.getFullYear()===p.getFullYear()&&D.startDate.getMonth()===p.getMonth()&&D.startDate.getDate()===p.getDate())}function M(p){t.value=p}function $(p){P(p,c.value).length>=1||a("onClickDay",p)}function C(p){p.originalItem.slotAvailables<=0||p.startDate<new Date||a("onClickItem",p)}return(p,F)=>(f(),b("div",fa,[l("div",ya,[ie(d(sa),{"show-date":d(t),class:"theme-default",onClickDate:$,onClickItem:C,items:c.value,"disable-past":!0,"current-period-label":"icons","display-period-uom":"month",startingDayOfWeek:1},{header:Le(({headerProps:D})=>[ie(ga,{headerProps:D,onInput:M},null,8,["headerProps"])]),_:1},8,["show-date","items"])])]))}});const _a={class:"availabilityView"},Da=l("div",{class:"istruzioni"}," Per prenotare, clicca su un giorno vuoto o su uno slot già creato ",-1),ka=["open"],wa=l("div",{slot:"headline"},"Non puoi prenotare",-1),Ca=l("form",{id:"form",slot:"content",method:"dialog"}," Hai ricevuto due o più ammonizioni e non puoi più prenotare. Dai un'occhiata al regolamento se vuoi sapere come ridurre le tue ammonizioni. ",-1),xa={slot:"actions"},Sa=["open"],Ia=l("div",{slot:"headline"},"Slot prenotato",-1),Ma={slot:"content",id:"form-id",method:"dialog"},$a=["open"],Pa=l("div",{slot:"headline"},"Prenota slot",-1),Aa={slot:"content",id:"form-id",method:"dialog"},Oa={key:2,class:"clausola"},Fa={slot:"actions"},Ta={key:0},La=l("a",{target:"_blank",rel:"noopener noreferrer",href:"https://calendar.google.com/calendar/embed?src=rho5n91oc32t7pdipjecqvpe9s%40group.calendar.google.com&ctz=Europe%2FRome"},[l("md-filled-tonal-button",{id:"addToCalendar"},[ee(" Aggiungi calendario a Google Calendar "),l("md-icon",{slot:"icon"},"calendar_add_on")])],-1),Na=G({__name:"AvailabilityView",setup(e){var B;const a=A(!1),t=A(!1),i=A(new Date),m=A("mattina"),_=A(!1),v=A(!1),c=A(!1),P=A(!1),M=A(!1),$=A([]),C=(B=Te().value)==null?void 0:B.uid,x=dt(Z(q,`users/${C}`));function p(y,g){return`availabilities/${y.getFullYear()}${(y.getMonth()+1).toString().padStart(2,"0")}${y.getDate().toString().padStart(2,"0")}-${g==="mattina"?"M":"P"}`}async function F(){if(P.value=!1,i.value==null||m.value==null){console.error("Ma che cazz");return}_.value=!0;const y=Z(q,p(i.value,m.value)),g=Z(q,`users/${C}/${p(i.value,m.value)}`);(await ut(y)).exists()?ht(y,{players:mt(Z(q,`users/${C}`))}):Pe(y,{players:[Z(q,`users/${C}`)]}),Pe(g,{date:i.value,timeSlot:m.value}),_.value=!1,v.value=!0,t.value=!1,a.value=!1}function D(y){var g;if(((g=x.value)==null?void 0:g.admonitionCount)>=2){c.value=!0;return}P.value=!0,v.value=!1,i.value=y,t.value=!1,a.value=!0}function E(y){var g;if(y.originalItem.bookedByUser){M.value=!0,$.value=["Danilo",...y.originalItem.playersNames];return}if(((g=x.value)==null?void 0:g.admonitionCount)>=2){c.value=!0;return}v.value=!1,P.value=!0,y.originalItem.slotAvailables>0&&(m.value=y.id.charAt(y.id.length-1)==="M"?"mattina":"pomeriggio",i.value=y.startDate,t.value=!0,a.value=!1)}return(y,g)=>{const U=ct("RouterLink");return f(),b("div",_a,[Da,ie(ba,{onOnClickDay:D,onOnClickItem:E}),l("md-dialog",{type:"alert",open:c.value},[wa,Ca,l("div",xa,[l("md-text-button",{form:"form",value:"ok",onClick:g[0]||(g[0]=S=>c.value=!1)},"OK")])],8,ka),l("md-dialog",{type:"alert",open:M.value,onClose:g[1]||(g[1]=S=>M.value=!1)},[Ia,l("div",Ma,[ee(" Giocatori: "),l("ul",null,[(f(!0),b(W,null,V($.value,S=>(f(),b("li",null,O(S),1))),256))])])],40,Sa),l("md-dialog",{type:"alert",open:P.value},[Pa,l("form",Aa,[a.value&&!_.value?(f(),$e(Dt,{key:0,date:i.value,onSelect:g[2]||(g[2]=S=>m.value=S.timeSlot)},null,8,["date"])):K("",!0),t.value&&!_.value?(f(),$e(wt,{key:1,date:i.value,time:m.value},null,8,["date","time"])):K("",!0),!_.value&&(a.value||t.value)?(f(),b("div",Oa,[ee("Confermando accetti "),ie(U,{class:"link",to:"/rules"},{default:Le(()=>[ee(" il regolamento")]),_:1})])):K("",!0)]),l("div",Fa,[l("md-text-button",{form:"form-id",value:"cancel",onClick:g[3]||(g[3]=S=>P.value=!1)},"Annulla"),l("md-text-button",{form:"form-id",value:"delete",onClick:F},"Conferma")])],8,$a),v.value?(f(),b("div",Ta,"Prenotato")):K("",!0),La])}}});export{Na as default};
